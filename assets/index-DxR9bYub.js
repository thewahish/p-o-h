(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const h of f)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function i(f){const h={};return f.integrity&&(h.integrity=f.integrity),f.referrerPolicy&&(h.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?h.credentials="include":f.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(f){if(f.ep)return;f.ep=!0;const h=i(f);fetch(f.href,h)}})();function uc(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Xa={exports:{}},Vn={},Ja={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qu;function uf(){if(Qu)return ce;Qu=1;var c=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),C=Symbol.iterator;function O(S){return S===null||typeof S!="object"?null:(S=C&&S[C]||S["@@iterator"],typeof S=="function"?S:null)}var re={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,A={};function Q(S,j,ae){this.props=S,this.context=j,this.refs=A,this.updater=ae||re}Q.prototype.isReactComponent={},Q.prototype.setState=function(S,j){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,j,"setState")},Q.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function Ne(){}Ne.prototype=Q.prototype;function Ge(S,j,ae){this.props=S,this.context=j,this.refs=A,this.updater=ae||re}var Re=Ge.prototype=new Ne;Re.constructor=Ge,pe(Re,Q.prototype),Re.isPureReactComponent=!0;var U=Array.isArray,ne=Object.prototype.hasOwnProperty,V={current:null},xe={key:!0,ref:!0,__self:!0,__source:!0};function je(S,j,ae){var oe,se={},de=null,ke=null;if(j!=null)for(oe in j.ref!==void 0&&(ke=j.ref),j.key!==void 0&&(de=""+j.key),j)ne.call(j,oe)&&!xe.hasOwnProperty(oe)&&(se[oe]=j[oe]);var ye=arguments.length-2;if(ye===1)se.children=ae;else if(1<ye){for(var Ee=Array(ye),rt=0;rt<ye;rt++)Ee[rt]=arguments[rt+2];se.children=Ee}if(S&&S.defaultProps)for(oe in ye=S.defaultProps,ye)se[oe]===void 0&&(se[oe]=ye[oe]);return{$$typeof:c,type:S,key:de,ref:ke,props:se,_owner:V.current}}function ze(S,j){return{$$typeof:c,type:S.type,key:j,ref:S.ref,props:S.props,_owner:S._owner}}function ft(S){return typeof S=="object"&&S!==null&&S.$$typeof===c}function me(S){var j={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ae){return j[ae]})}var Ae=/\/+/g;function Qe(S,j){return typeof S=="object"&&S!==null&&S.key!=null?me(""+S.key):j.toString(36)}function M(S,j,ae,oe,se){var de=typeof S;(de==="undefined"||de==="boolean")&&(S=null);var ke=!1;if(S===null)ke=!0;else switch(de){case"string":case"number":ke=!0;break;case"object":switch(S.$$typeof){case c:case a:ke=!0}}if(ke)return ke=S,se=se(ke),S=oe===""?"."+Qe(ke,0):oe,U(se)?(ae="",S!=null&&(ae=S.replace(Ae,"$&/")+"/"),M(se,j,ae,"",function(rt){return rt})):se!=null&&(ft(se)&&(se=ze(se,ae+(!se.key||ke&&ke.key===se.key?"":(""+se.key).replace(Ae,"$&/")+"/")+S)),j.push(se)),1;if(ke=0,oe=oe===""?".":oe+":",U(S))for(var ye=0;ye<S.length;ye++){de=S[ye];var Ee=oe+Qe(de,ye);ke+=M(de,j,ae,Ee,se)}else if(Ee=O(S),typeof Ee=="function")for(S=Ee.call(S),ye=0;!(de=S.next()).done;)de=de.value,Ee=oe+Qe(de,ye++),ke+=M(de,j,ae,Ee,se);else if(de==="object")throw j=String(S),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return ke}function le(S,j,ae){if(S==null)return S;var oe=[],se=0;return M(S,oe,"","",function(de){return j.call(ae,de,se++)}),oe}function fe(S){if(S._status===-1){var j=S._result;j=j(),j.then(function(ae){(S._status===0||S._status===-1)&&(S._status=1,S._result=ae)},function(ae){(S._status===0||S._status===-1)&&(S._status=2,S._result=ae)}),S._status===-1&&(S._status=0,S._result=j)}if(S._status===1)return S._result.default;throw S._result}var ie={current:null},I={transition:null},Y={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:I,ReactCurrentOwner:V};function F(){throw Error("act(...) is not supported in production builds of React.")}return ce.Children={map:le,forEach:function(S,j,ae){le(S,function(){j.apply(this,arguments)},ae)},count:function(S){var j=0;return le(S,function(){j++}),j},toArray:function(S){return le(S,function(j){return j})||[]},only:function(S){if(!ft(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},ce.Component=Q,ce.Fragment=i,ce.Profiler=f,ce.PureComponent=Ge,ce.StrictMode=d,ce.Suspense=w,ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,ce.act=F,ce.cloneElement=function(S,j,ae){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var oe=pe({},S.props),se=S.key,de=S.ref,ke=S._owner;if(j!=null){if(j.ref!==void 0&&(de=j.ref,ke=V.current),j.key!==void 0&&(se=""+j.key),S.type&&S.type.defaultProps)var ye=S.type.defaultProps;for(Ee in j)ne.call(j,Ee)&&!xe.hasOwnProperty(Ee)&&(oe[Ee]=j[Ee]===void 0&&ye!==void 0?ye[Ee]:j[Ee])}var Ee=arguments.length-2;if(Ee===1)oe.children=ae;else if(1<Ee){ye=Array(Ee);for(var rt=0;rt<Ee;rt++)ye[rt]=arguments[rt+2];oe.children=ye}return{$$typeof:c,type:S.type,key:se,ref:de,props:oe,_owner:ke}},ce.createContext=function(S){return S={$$typeof:x,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:h,_context:S},S.Consumer=S},ce.createElement=je,ce.createFactory=function(S){var j=je.bind(null,S);return j.type=S,j},ce.createRef=function(){return{current:null}},ce.forwardRef=function(S){return{$$typeof:b,render:S}},ce.isValidElement=ft,ce.lazy=function(S){return{$$typeof:D,_payload:{_status:-1,_result:S},_init:fe}},ce.memo=function(S,j){return{$$typeof:R,type:S,compare:j===void 0?null:j}},ce.startTransition=function(S){var j=I.transition;I.transition={};try{S()}finally{I.transition=j}},ce.unstable_act=F,ce.useCallback=function(S,j){return ie.current.useCallback(S,j)},ce.useContext=function(S){return ie.current.useContext(S)},ce.useDebugValue=function(){},ce.useDeferredValue=function(S){return ie.current.useDeferredValue(S)},ce.useEffect=function(S,j){return ie.current.useEffect(S,j)},ce.useId=function(){return ie.current.useId()},ce.useImperativeHandle=function(S,j,ae){return ie.current.useImperativeHandle(S,j,ae)},ce.useInsertionEffect=function(S,j){return ie.current.useInsertionEffect(S,j)},ce.useLayoutEffect=function(S,j){return ie.current.useLayoutEffect(S,j)},ce.useMemo=function(S,j){return ie.current.useMemo(S,j)},ce.useReducer=function(S,j,ae){return ie.current.useReducer(S,j,ae)},ce.useRef=function(S){return ie.current.useRef(S)},ce.useState=function(S){return ie.current.useState(S)},ce.useSyncExternalStore=function(S,j,ae){return ie.current.useSyncExternalStore(S,j,ae)},ce.useTransition=function(){return ie.current.useTransition()},ce.version="18.3.1",ce}var qu;function si(){return qu||(qu=1,Ja.exports=uf()),Ja.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu;function cf(){if(Xu)return Vn;Xu=1;var c=si(),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,f=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function x(b,w,R){var D,C={},O=null,re=null;R!==void 0&&(O=""+R),w.key!==void 0&&(O=""+w.key),w.ref!==void 0&&(re=w.ref);for(D in w)d.call(w,D)&&!h.hasOwnProperty(D)&&(C[D]=w[D]);if(b&&b.defaultProps)for(D in w=b.defaultProps,w)C[D]===void 0&&(C[D]=w[D]);return{$$typeof:a,type:b,key:O,ref:re,props:C,_owner:f.current}}return Vn.Fragment=i,Vn.jsx=x,Vn.jsxs=x,Vn}var Ju;function df(){return Ju||(Ju=1,Xa.exports=cf()),Xa.exports}var o=df(),Z=si();const ff=uc(Z);var ll={},Za={exports:{}},dt={},ei={exports:{}},ti={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu;function pf(){return Zu||(Zu=1,function(c){function a(I,Y){var F=I.length;I.push(Y);e:for(;0<F;){var S=F-1>>>1,j=I[S];if(0<f(j,Y))I[S]=Y,I[F]=j,F=S;else break e}}function i(I){return I.length===0?null:I[0]}function d(I){if(I.length===0)return null;var Y=I[0],F=I.pop();if(F!==Y){I[0]=F;e:for(var S=0,j=I.length,ae=j>>>1;S<ae;){var oe=2*(S+1)-1,se=I[oe],de=oe+1,ke=I[de];if(0>f(se,F))de<j&&0>f(ke,se)?(I[S]=ke,I[de]=F,S=de):(I[S]=se,I[oe]=F,S=oe);else if(de<j&&0>f(ke,F))I[S]=ke,I[de]=F,S=de;else break e}}return Y}function f(I,Y){var F=I.sortIndex-Y.sortIndex;return F!==0?F:I.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;c.unstable_now=function(){return h.now()}}else{var x=Date,b=x.now();c.unstable_now=function(){return x.now()-b}}var w=[],R=[],D=1,C=null,O=3,re=!1,pe=!1,A=!1,Q=typeof setTimeout=="function"?setTimeout:null,Ne=typeof clearTimeout=="function"?clearTimeout:null,Ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Re(I){for(var Y=i(R);Y!==null;){if(Y.callback===null)d(R);else if(Y.startTime<=I)d(R),Y.sortIndex=Y.expirationTime,a(w,Y);else break;Y=i(R)}}function U(I){if(A=!1,Re(I),!pe)if(i(w)!==null)pe=!0,fe(ne);else{var Y=i(R);Y!==null&&ie(U,Y.startTime-I)}}function ne(I,Y){pe=!1,A&&(A=!1,Ne(je),je=-1),re=!0;var F=O;try{for(Re(Y),C=i(w);C!==null&&(!(C.expirationTime>Y)||I&&!me());){var S=C.callback;if(typeof S=="function"){C.callback=null,O=C.priorityLevel;var j=S(C.expirationTime<=Y);Y=c.unstable_now(),typeof j=="function"?C.callback=j:C===i(w)&&d(w),Re(Y)}else d(w);C=i(w)}if(C!==null)var ae=!0;else{var oe=i(R);oe!==null&&ie(U,oe.startTime-Y),ae=!1}return ae}finally{C=null,O=F,re=!1}}var V=!1,xe=null,je=-1,ze=5,ft=-1;function me(){return!(c.unstable_now()-ft<ze)}function Ae(){if(xe!==null){var I=c.unstable_now();ft=I;var Y=!0;try{Y=xe(!0,I)}finally{Y?Qe():(V=!1,xe=null)}}else V=!1}var Qe;if(typeof Ge=="function")Qe=function(){Ge(Ae)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,le=M.port2;M.port1.onmessage=Ae,Qe=function(){le.postMessage(null)}}else Qe=function(){Q(Ae,0)};function fe(I){xe=I,V||(V=!0,Qe())}function ie(I,Y){je=Q(function(){I(c.unstable_now())},Y)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(I){I.callback=null},c.unstable_continueExecution=function(){pe||re||(pe=!0,fe(ne))},c.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<I?Math.floor(1e3/I):5},c.unstable_getCurrentPriorityLevel=function(){return O},c.unstable_getFirstCallbackNode=function(){return i(w)},c.unstable_next=function(I){switch(O){case 1:case 2:case 3:var Y=3;break;default:Y=O}var F=O;O=Y;try{return I()}finally{O=F}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(I,Y){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var F=O;O=I;try{return Y()}finally{O=F}},c.unstable_scheduleCallback=function(I,Y,F){var S=c.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?S+F:S):F=S,I){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=F+j,I={id:D++,callback:Y,priorityLevel:I,startTime:F,expirationTime:j,sortIndex:-1},F>S?(I.sortIndex=F,a(R,I),i(w)===null&&I===i(R)&&(A?(Ne(je),je=-1):A=!0,ie(U,F-S))):(I.sortIndex=j,a(w,I),pe||re||(pe=!0,fe(ne))),I},c.unstable_shouldYield=me,c.unstable_wrapCallback=function(I){var Y=O;return function(){var F=O;O=Y;try{return I.apply(this,arguments)}finally{O=F}}}}(ti)),ti}var ec;function mf(){return ec||(ec=1,ei.exports=pf()),ei.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tc;function hf(){if(tc)return dt;tc=1;var c=si(),a=mf();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d=new Set,f={};function h(e,t){x(e,t),x(e+"Capture",t)}function x(e,t){for(f[e]=t,e=0;e<t.length;e++)d.add(t[e])}var b=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D={},C={};function O(e){return w.call(C,e)?!0:w.call(D,e)?!1:R.test(e)?C[e]=!0:(D[e]=!0,!1)}function re(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pe(e,t,r,n){if(t===null||typeof t>"u"||re(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function A(e,t,r,n,s,l,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=u}var Q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Q[e]=new A(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Q[t]=new A(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Q[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Q[e]=new A(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Q[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Q[e]=new A(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Q[e]=new A(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Q[e]=new A(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Q[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ne=/[\-:]([a-z])/g;function Ge(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ne,Ge);Q[t]=new A(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ne,Ge);Q[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ne,Ge);Q[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Q[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)}),Q.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Q[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)});function Re(e,t,r,n){var s=Q.hasOwnProperty(t)?Q[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pe(t,r,s,n)&&(r=null),n||s===null?O(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var U=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),V=Symbol.for("react.portal"),xe=Symbol.for("react.fragment"),je=Symbol.for("react.strict_mode"),ze=Symbol.for("react.profiler"),ft=Symbol.for("react.provider"),me=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Qe=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),I=Symbol.iterator;function Y(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var F=Object.assign,S;function j(e){if(S===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);S=t&&t[1]||""}return`
`+S+e}var ae=!1;function oe(e,t){if(!e||ae)return"";ae=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(N){var n=N}Reflect.construct(e,[],t)}else{try{t.call()}catch(N){n=N}e.call(t.prototype)}else{try{throw Error()}catch(N){n=N}e()}}catch(N){if(N&&n&&typeof N.stack=="string"){for(var s=N.stack.split(`
`),l=n.stack.split(`
`),u=s.length-1,p=l.length-1;1<=u&&0<=p&&s[u]!==l[p];)p--;for(;1<=u&&0<=p;u--,p--)if(s[u]!==l[p]){if(u!==1||p!==1)do if(u--,p--,0>p||s[u]!==l[p]){var g=`
`+s[u].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=u&&0<=p);break}}}finally{ae=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?j(e):""}function se(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=oe(e.type,!1),e;case 11:return e=oe(e.type.render,!1),e;case 1:return e=oe(e.type,!0),e;default:return""}}function de(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xe:return"Fragment";case V:return"Portal";case ze:return"Profiler";case je:return"StrictMode";case Qe:return"Suspense";case M:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case me:return(e.displayName||"Context")+".Consumer";case ft:return(e._context.displayName||"Context")+".Provider";case Ae:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case le:return t=e.displayName||null,t!==null?t:de(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return de(e(t))}catch{}}return null}function ke(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(t);case 8:return t===je?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ye(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rt(e){var t=Ee(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){n=""+u,l.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dr(e){e._valueTracker||(e._valueTracker=rt(e))}function an(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ee(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function jr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function on(e,t){var r=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function K(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ye(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function he(e,t){t=t.checked,t!=null&&Re(e,"checked",t,!1)}function ue(e,t){he(e,t);var r=ye(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ie(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ie(e,t.type,ye(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Se(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ie(e,t,r){(t!=="number"||jr(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ue=Array.isArray;function $e(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ye(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Tt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lt(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(i(92));if(Ue(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ye(r)}}function li(e,t){var r=ye(t.value),n=ye(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ai(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ii(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ol(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ii(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xn,oi=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function un(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var cn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fc=["Webkit","ms","Moz","O"];Object.keys(cn).forEach(function(e){fc.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cn[t]=cn[e]})});function ui(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||cn.hasOwnProperty(e)&&cn[e]?(""+t).trim():t+"px"}function ci(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=ui(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var pc=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ul(e,t){if(t){if(pc[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function cl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dl=null;function fl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pl=null,Tr=null,Mr=null;function di(e){if(e=Pn(e)){if(typeof pl!="function")throw Error(i(280));var t=e.stateNode;t&&(t=Ss(t),pl(e.stateNode,e.type,t))}}function fi(e){Tr?Mr?Mr.push(e):Mr=[e]:Tr=e}function pi(){if(Tr){var e=Tr,t=Mr;if(Mr=Tr=null,di(e),t)for(e=0;e<t.length;e++)di(t[e])}}function mi(e,t){return e(t)}function hi(){}var ml=!1;function gi(e,t,r){if(ml)return e(t,r);ml=!0;try{return mi(e,t,r)}finally{ml=!1,(Tr!==null||Mr!==null)&&(hi(),pi())}}function dn(e,t){var r=e.stateNode;if(r===null)return null;var n=Ss(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var hl=!1;if(b)try{var fn={};Object.defineProperty(fn,"passive",{get:function(){hl=!0}}),window.addEventListener("test",fn,fn),window.removeEventListener("test",fn,fn)}catch{hl=!1}function mc(e,t,r,n,s,l,u,p,g){var N=Array.prototype.slice.call(arguments,3);try{t.apply(r,N)}catch(P){this.onError(P)}}var pn=!1,Jn=null,Zn=!1,gl=null,hc={onError:function(e){pn=!0,Jn=e}};function gc(e,t,r,n,s,l,u,p,g){pn=!1,Jn=null,mc.apply(hc,arguments)}function yc(e,t,r,n,s,l,u,p,g){if(gc.apply(this,arguments),pn){if(pn){var N=Jn;pn=!1,Jn=null}else throw Error(i(198));Zn||(Zn=!0,gl=N)}}function fr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yi(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vi(e){if(fr(e)!==e)throw Error(i(188))}function vc(e){var t=e.alternate;if(!t){if(t=fr(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return vi(s),e;if(l===n)return vi(s),t;l=l.sibling}throw Error(i(188))}if(r.return!==n.return)r=s,n=l;else{for(var u=!1,p=s.child;p;){if(p===r){u=!0,r=s,n=l;break}if(p===n){u=!0,n=s,r=l;break}p=p.sibling}if(!u){for(p=l.child;p;){if(p===r){u=!0,r=l,n=s;break}if(p===n){u=!0,n=l,r=s;break}p=p.sibling}if(!u)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function xi(e){return e=vc(e),e!==null?Si(e):null}function Si(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Si(e);if(t!==null)return t;e=e.sibling}return null}var ki=a.unstable_scheduleCallback,wi=a.unstable_cancelCallback,xc=a.unstable_shouldYield,Sc=a.unstable_requestPaint,Oe=a.unstable_now,kc=a.unstable_getCurrentPriorityLevel,yl=a.unstable_ImmediatePriority,Ei=a.unstable_UserBlockingPriority,es=a.unstable_NormalPriority,wc=a.unstable_LowPriority,bi=a.unstable_IdlePriority,ts=null,Mt=null;function Ec(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(ts,e,void 0,(e.current.flags&128)===128)}catch{}}var Et=Math.clz32?Math.clz32:_c,bc=Math.log,Nc=Math.LN2;function _c(e){return e>>>=0,e===0?32:31-(bc(e)/Nc|0)|0}var rs=64,ns=4194304;function mn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ss(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,l=e.pingedLanes,u=r&268435455;if(u!==0){var p=u&~s;p!==0?n=mn(p):(l&=u,l!==0&&(n=mn(l)))}else u=r&~s,u!==0?n=mn(u):l!==0&&(n=mn(l));if(n===0)return 0;if(t!==0&&t!==n&&(t&s)===0&&(s=n&-n,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Et(t),s=1<<r,n|=e[r],t&=~s;return n}function Cc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rc(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var u=31-Et(l),p=1<<u,g=s[u];g===-1?((p&r)===0||(p&n)!==0)&&(s[u]=Cc(p,t)):g<=t&&(e.expiredLanes|=p),l&=~p}}function vl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ni(){var e=rs;return rs<<=1,(rs&4194240)===0&&(rs=64),e}function xl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function hn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Et(t),e[t]=r}function jc(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Et(r),l=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~l}}function Sl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Et(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var we=0;function _i(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ci,kl,Ri,ji,Ti,wl=!1,ls=[],Yt=null,Wt=null,Vt=null,gn=new Map,yn=new Map,Gt=[],Tc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mi(e,t){switch(e){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Wt=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":gn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(t.pointerId)}}function vn(e,t,r,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},t!==null&&(t=Pn(t),t!==null&&kl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Mc(e,t,r,n,s){switch(t){case"focusin":return Yt=vn(Yt,e,t,r,n,s),!0;case"dragenter":return Wt=vn(Wt,e,t,r,n,s),!0;case"mouseover":return Vt=vn(Vt,e,t,r,n,s),!0;case"pointerover":var l=s.pointerId;return gn.set(l,vn(gn.get(l)||null,e,t,r,n,s)),!0;case"gotpointercapture":return l=s.pointerId,yn.set(l,vn(yn.get(l)||null,e,t,r,n,s)),!0}return!1}function Pi(e){var t=pr(e.target);if(t!==null){var r=fr(t);if(r!==null){if(t=r.tag,t===13){if(t=yi(r),t!==null){e.blockedOn=t,Ti(e.priority,function(){Ri(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function as(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);dl=n,r.target.dispatchEvent(n),dl=null}else return t=Pn(r),t!==null&&kl(t),e.blockedOn=r,!1;t.shift()}return!0}function Li(e,t,r){as(e)&&r.delete(t)}function Pc(){wl=!1,Yt!==null&&as(Yt)&&(Yt=null),Wt!==null&&as(Wt)&&(Wt=null),Vt!==null&&as(Vt)&&(Vt=null),gn.forEach(Li),yn.forEach(Li)}function xn(e,t){e.blockedOn===t&&(e.blockedOn=null,wl||(wl=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Pc)))}function Sn(e){function t(s){return xn(s,e)}if(0<ls.length){xn(ls[0],e);for(var r=1;r<ls.length;r++){var n=ls[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Yt!==null&&xn(Yt,e),Wt!==null&&xn(Wt,e),Vt!==null&&xn(Vt,e),gn.forEach(t),yn.forEach(t),r=0;r<Gt.length;r++)n=Gt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gt.length&&(r=Gt[0],r.blockedOn===null);)Pi(r),r.blockedOn===null&&Gt.shift()}var Pr=U.ReactCurrentBatchConfig,is=!0;function Lc(e,t,r,n){var s=we,l=Pr.transition;Pr.transition=null;try{we=1,El(e,t,r,n)}finally{we=s,Pr.transition=l}}function Ic(e,t,r,n){var s=we,l=Pr.transition;Pr.transition=null;try{we=4,El(e,t,r,n)}finally{we=s,Pr.transition=l}}function El(e,t,r,n){if(is){var s=bl(e,t,r,n);if(s===null)Ul(e,t,n,os,r),Mi(e,n);else if(Mc(s,e,t,r,n))n.stopPropagation();else if(Mi(e,n),t&4&&-1<Tc.indexOf(e)){for(;s!==null;){var l=Pn(s);if(l!==null&&Ci(l),l=bl(e,t,r,n),l===null&&Ul(e,t,n,os,r),l===s)break;s=l}s!==null&&n.stopPropagation()}else Ul(e,t,n,null,r)}}var os=null;function bl(e,t,r,n){if(os=null,e=fl(n),e=pr(e),e!==null)if(t=fr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=yi(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return os=e,null}function Ii(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kc()){case yl:return 1;case Ei:return 4;case es:case wc:return 16;case bi:return 536870912;default:return 16}default:return 16}}var Qt=null,Nl=null,us=null;function $i(){if(us)return us;var e,t=Nl,r=t.length,n,s="value"in Qt?Qt.value:Qt.textContent,l=s.length;for(e=0;e<r&&t[e]===s[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===s[l-n];n++);return us=s.slice(e,1<n?1-n:void 0)}function cs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ds(){return!0}function Oi(){return!1}function pt(e){function t(r,n,s,l,u){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(r=e[p],this[p]=r?r(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ds:Oi,this.isPropagationStopped=Oi,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ds)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ds)},persist:function(){},isPersistent:ds}),t}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=pt(Lr),kn=F({},Lr,{view:0,detail:0}),$c=pt(kn),Cl,Rl,wn,fs=F({},kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wn&&(wn&&e.type==="mousemove"?(Cl=e.screenX-wn.screenX,Rl=e.screenY-wn.screenY):Rl=Cl=0,wn=e),Cl)},movementY:function(e){return"movementY"in e?e.movementY:Rl}}),Di=pt(fs),Oc=F({},fs,{dataTransfer:0}),Dc=pt(Oc),Ac=F({},kn,{relatedTarget:0}),jl=pt(Ac),Fc=F({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),zc=pt(Fc),Uc=F({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bc=pt(Uc),Kc=F({},Lr,{data:0}),Ai=pt(Kc),Hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wc[e])?!!t[e]:!1}function Tl(){return Vc}var Gc=F({},kn,{key:function(e){if(e.key){var t=Hc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(e){return e.type==="keypress"?cs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qc=pt(Gc),qc=F({},fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=pt(qc),Xc=F({},kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),Jc=pt(Xc),Zc=F({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ed=pt(Zc),td=F({},fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rd=pt(td),nd=[9,13,27,32],Ml=b&&"CompositionEvent"in window,En=null;b&&"documentMode"in document&&(En=document.documentMode);var sd=b&&"TextEvent"in window&&!En,zi=b&&(!Ml||En&&8<En&&11>=En),Ui=" ",Bi=!1;function Ki(e,t){switch(e){case"keyup":return nd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ir=!1;function ld(e,t){switch(e){case"compositionend":return Hi(t);case"keypress":return t.which!==32?null:(Bi=!0,Ui);case"textInput":return e=t.data,e===Ui&&Bi?null:e;default:return null}}function ad(e,t){if(Ir)return e==="compositionend"||!Ml&&Ki(e,t)?(e=$i(),us=Nl=Qt=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zi&&t.locale!=="ko"?null:t.data;default:return null}}var id={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!id[e.type]:t==="textarea"}function Wi(e,t,r,n){fi(n),t=ys(t,"onChange"),0<t.length&&(r=new _l("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var bn=null,Nn=null;function od(e){co(e,0)}function ps(e){var t=Fr(e);if(an(t))return e}function ud(e,t){if(e==="change")return t}var Vi=!1;if(b){var Pl;if(b){var Ll="oninput"in document;if(!Ll){var Gi=document.createElement("div");Gi.setAttribute("oninput","return;"),Ll=typeof Gi.oninput=="function"}Pl=Ll}else Pl=!1;Vi=Pl&&(!document.documentMode||9<document.documentMode)}function Qi(){bn&&(bn.detachEvent("onpropertychange",qi),Nn=bn=null)}function qi(e){if(e.propertyName==="value"&&ps(Nn)){var t=[];Wi(t,Nn,e,fl(e)),gi(od,t)}}function cd(e,t,r){e==="focusin"?(Qi(),bn=t,Nn=r,bn.attachEvent("onpropertychange",qi)):e==="focusout"&&Qi()}function dd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ps(Nn)}function fd(e,t){if(e==="click")return ps(t)}function pd(e,t){if(e==="input"||e==="change")return ps(t)}function md(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:md;function _n(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!w.call(t,s)||!bt(e[s],t[s]))return!1}return!0}function Xi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ji(e,t){var r=Xi(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xi(r)}}function Zi(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zi(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function eo(){for(var e=window,t=jr();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=jr(e.document)}return t}function Il(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hd(e){var t=eo(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Zi(r.ownerDocument.documentElement,r)){if(n!==null&&Il(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,l=Math.min(n.start,s);n=n.end===void 0?l:Math.min(n.end,s),!e.extend&&l>n&&(s=n,n=l,l=s),s=Ji(r,l);var u=Ji(r,n);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gd=b&&"documentMode"in document&&11>=document.documentMode,$r=null,$l=null,Cn=null,Ol=!1;function to(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ol||$r==null||$r!==jr(n)||(n=$r,"selectionStart"in n&&Il(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Cn&&_n(Cn,n)||(Cn=n,n=ys($l,"onSelect"),0<n.length&&(t=new _l("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=$r)))}function ms(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Or={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},Dl={},ro={};b&&(ro=document.createElement("div").style,"AnimationEvent"in window||(delete Or.animationend.animation,delete Or.animationiteration.animation,delete Or.animationstart.animation),"TransitionEvent"in window||delete Or.transitionend.transition);function hs(e){if(Dl[e])return Dl[e];if(!Or[e])return e;var t=Or[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ro)return Dl[e]=t[r];return e}var no=hs("animationend"),so=hs("animationiteration"),lo=hs("animationstart"),ao=hs("transitionend"),io=new Map,oo="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){io.set(e,t),h(t,[e])}for(var Al=0;Al<oo.length;Al++){var Fl=oo[Al],yd=Fl.toLowerCase(),vd=Fl[0].toUpperCase()+Fl.slice(1);qt(yd,"on"+vd)}qt(no,"onAnimationEnd"),qt(so,"onAnimationIteration"),qt(lo,"onAnimationStart"),qt("dblclick","onDoubleClick"),qt("focusin","onFocus"),qt("focusout","onBlur"),qt(ao,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rn));function uo(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,yc(n,t,void 0,e),e.currentTarget=null}function co(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var u=n.length-1;0<=u;u--){var p=n[u],g=p.instance,N=p.currentTarget;if(p=p.listener,g!==l&&s.isPropagationStopped())break e;uo(s,p,N),l=g}else for(u=0;u<n.length;u++){if(p=n[u],g=p.instance,N=p.currentTarget,p=p.listener,g!==l&&s.isPropagationStopped())break e;uo(s,p,N),l=g}}}if(Zn)throw e=gl,Zn=!1,gl=null,e}function _e(e,t){var r=t[Vl];r===void 0&&(r=t[Vl]=new Set);var n=e+"__bubble";r.has(n)||(fo(t,e,2,!1),r.add(n))}function zl(e,t,r){var n=0;t&&(n|=4),fo(r,e,n,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[gs]){e[gs]=!0,d.forEach(function(r){r!=="selectionchange"&&(xd.has(r)||zl(r,!1,e),zl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,zl("selectionchange",!1,t))}}function fo(e,t,r,n){switch(Ii(t)){case 1:var s=Lc;break;case 4:s=Ic;break;default:s=El}r=s.bind(null,t,r,e),s=void 0,!hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ul(e,t,r,n,s){var l=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var p=n.stateNode.containerInfo;if(p===s||p.nodeType===8&&p.parentNode===s)break;if(u===4)for(u=n.return;u!==null;){var g=u.tag;if((g===3||g===4)&&(g=u.stateNode.containerInfo,g===s||g.nodeType===8&&g.parentNode===s))return;u=u.return}for(;p!==null;){if(u=pr(p),u===null)return;if(g=u.tag,g===5||g===6){n=l=u;continue e}p=p.parentNode}}n=n.return}gi(function(){var N=l,P=fl(r),L=[];e:{var T=io.get(e);if(T!==void 0){var z=_l,H=e;switch(e){case"keypress":if(cs(r)===0)break e;case"keydown":case"keyup":z=Qc;break;case"focusin":H="focus",z=jl;break;case"focusout":H="blur",z=jl;break;case"beforeblur":case"afterblur":z=jl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=Dc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=Jc;break;case no:case so:case lo:z=zc;break;case ao:z=ed;break;case"scroll":z=$c;break;case"wheel":z=rd;break;case"copy":case"cut":case"paste":z=Bc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Fi}var W=(t&4)!==0,De=!W&&e==="scroll",k=W?T!==null?T+"Capture":null:T;W=[];for(var y=N,E;y!==null;){E=y;var $=E.stateNode;if(E.tag===5&&$!==null&&(E=$,k!==null&&($=dn(y,k),$!=null&&W.push(Tn(y,$,E)))),De)break;y=y.return}0<W.length&&(T=new z(T,H,null,r,P),L.push({event:T,listeners:W}))}}if((t&7)===0){e:{if(T=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",T&&r!==dl&&(H=r.relatedTarget||r.fromElement)&&(pr(H)||H[Dt]))break e;if((z||T)&&(T=P.window===P?P:(T=P.ownerDocument)?T.defaultView||T.parentWindow:window,z?(H=r.relatedTarget||r.toElement,z=N,H=H?pr(H):null,H!==null&&(De=fr(H),H!==De||H.tag!==5&&H.tag!==6)&&(H=null)):(z=null,H=N),z!==H)){if(W=Di,$="onMouseLeave",k="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(W=Fi,$="onPointerLeave",k="onPointerEnter",y="pointer"),De=z==null?T:Fr(z),E=H==null?T:Fr(H),T=new W($,y+"leave",z,r,P),T.target=De,T.relatedTarget=E,$=null,pr(P)===N&&(W=new W(k,y+"enter",H,r,P),W.target=E,W.relatedTarget=De,$=W),De=$,z&&H)t:{for(W=z,k=H,y=0,E=W;E;E=Dr(E))y++;for(E=0,$=k;$;$=Dr($))E++;for(;0<y-E;)W=Dr(W),y--;for(;0<E-y;)k=Dr(k),E--;for(;y--;){if(W===k||k!==null&&W===k.alternate)break t;W=Dr(W),k=Dr(k)}W=null}else W=null;z!==null&&po(L,T,z,W,!1),H!==null&&De!==null&&po(L,De,H,W,!0)}}e:{if(T=N?Fr(N):window,z=T.nodeName&&T.nodeName.toLowerCase(),z==="select"||z==="input"&&T.type==="file")var G=ud;else if(Yi(T))if(Vi)G=pd;else{G=dd;var X=cd}else(z=T.nodeName)&&z.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(G=fd);if(G&&(G=G(e,N))){Wi(L,G,r,P);break e}X&&X(e,T,N),e==="focusout"&&(X=T._wrapperState)&&X.controlled&&T.type==="number"&&Ie(T,"number",T.value)}switch(X=N?Fr(N):window,e){case"focusin":(Yi(X)||X.contentEditable==="true")&&($r=X,$l=N,Cn=null);break;case"focusout":Cn=$l=$r=null;break;case"mousedown":Ol=!0;break;case"contextmenu":case"mouseup":case"dragend":Ol=!1,to(L,r,P);break;case"selectionchange":if(gd)break;case"keydown":case"keyup":to(L,r,P)}var J;if(Ml)e:{switch(e){case"compositionstart":var ee="onCompositionStart";break e;case"compositionend":ee="onCompositionEnd";break e;case"compositionupdate":ee="onCompositionUpdate";break e}ee=void 0}else Ir?Ki(e,r)&&(ee="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ee="onCompositionStart");ee&&(zi&&r.locale!=="ko"&&(Ir||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&Ir&&(J=$i()):(Qt=P,Nl="value"in Qt?Qt.value:Qt.textContent,Ir=!0)),X=ys(N,ee),0<X.length&&(ee=new Ai(ee,e,null,r,P),L.push({event:ee,listeners:X}),J?ee.data=J:(J=Hi(r),J!==null&&(ee.data=J)))),(J=sd?ld(e,r):ad(e,r))&&(N=ys(N,"onBeforeInput"),0<N.length&&(P=new Ai("onBeforeInput","beforeinput",null,r,P),L.push({event:P,listeners:N}),P.data=J))}co(L,t)})}function Tn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ys(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=dn(e,r),l!=null&&n.unshift(Tn(e,l,s)),l=dn(e,t),l!=null&&n.push(Tn(e,l,s))),e=e.return}return n}function Dr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function po(e,t,r,n,s){for(var l=t._reactName,u=[];r!==null&&r!==n;){var p=r,g=p.alternate,N=p.stateNode;if(g!==null&&g===n)break;p.tag===5&&N!==null&&(p=N,s?(g=dn(r,l),g!=null&&u.unshift(Tn(r,g,p))):s||(g=dn(r,l),g!=null&&u.push(Tn(r,g,p)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var Sd=/\r\n?/g,kd=/\u0000|\uFFFD/g;function mo(e){return(typeof e=="string"?e:""+e).replace(Sd,`
`).replace(kd,"")}function vs(e,t,r){if(t=mo(t),mo(e)!==t&&r)throw Error(i(425))}function xs(){}var Bl=null,Kl=null;function Hl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yl=typeof setTimeout=="function"?setTimeout:void 0,wd=typeof clearTimeout=="function"?clearTimeout:void 0,ho=typeof Promise=="function"?Promise:void 0,Ed=typeof queueMicrotask=="function"?queueMicrotask:typeof ho<"u"?function(e){return ho.resolve(null).then(e).catch(bd)}:Yl;function bd(e){setTimeout(function(){throw e})}function Wl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Sn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Sn(t)}function Xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function go(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Ar,Mn="__reactProps$"+Ar,Dt="__reactContainer$"+Ar,Vl="__reactEvents$"+Ar,Nd="__reactListeners$"+Ar,_d="__reactHandles$"+Ar;function pr(e){var t=e[Pt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Dt]||r[Pt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=go(e);e!==null;){if(r=e[Pt])return r;e=go(e)}return t}e=r,r=e.parentNode}return null}function Pn(e){return e=e[Pt]||e[Dt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Ss(e){return e[Mn]||null}var Gl=[],zr=-1;function Jt(e){return{current:e}}function Ce(e){0>zr||(e.current=Gl[zr],Gl[zr]=null,zr--)}function be(e,t){zr++,Gl[zr]=e.current,e.current=t}var Zt={},Je=Jt(Zt),at=Jt(!1),mr=Zt;function Ur(e,t){var r=e.type.contextTypes;if(!r)return Zt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in r)s[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function it(e){return e=e.childContextTypes,e!=null}function ks(){Ce(at),Ce(Je)}function yo(e,t,r){if(Je.current!==Zt)throw Error(i(168));be(Je,t),be(at,r)}function vo(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(i(108,ke(e)||"Unknown",s));return F({},r,n)}function ws(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Zt,mr=Je.current,be(Je,e),be(at,at.current),!0}function xo(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=vo(e,t,mr),n.__reactInternalMemoizedMergedChildContext=e,Ce(at),Ce(Je),be(Je,e)):Ce(at),be(at,r)}var At=null,Es=!1,Ql=!1;function So(e){At===null?At=[e]:At.push(e)}function Cd(e){Es=!0,So(e)}function er(){if(!Ql&&At!==null){Ql=!0;var e=0,t=we;try{var r=At;for(we=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}At=null,Es=!1}catch(s){throw At!==null&&(At=At.slice(e+1)),ki(yl,er),s}finally{we=t,Ql=!1}}return null}var Br=[],Kr=0,bs=null,Ns=0,yt=[],vt=0,hr=null,Ft=1,zt="";function gr(e,t){Br[Kr++]=Ns,Br[Kr++]=bs,bs=e,Ns=t}function ko(e,t,r){yt[vt++]=Ft,yt[vt++]=zt,yt[vt++]=hr,hr=e;var n=Ft;e=zt;var s=32-Et(n)-1;n&=~(1<<s),r+=1;var l=32-Et(t)+s;if(30<l){var u=s-s%5;l=(n&(1<<u)-1).toString(32),n>>=u,s-=u,Ft=1<<32-Et(t)+s|r<<s|n,zt=l+e}else Ft=1<<l|r<<s|n,zt=e}function ql(e){e.return!==null&&(gr(e,1),ko(e,1,0))}function Xl(e){for(;e===bs;)bs=Br[--Kr],Br[Kr]=null,Ns=Br[--Kr],Br[Kr]=null;for(;e===hr;)hr=yt[--vt],yt[vt]=null,zt=yt[--vt],yt[vt]=null,Ft=yt[--vt],yt[vt]=null}var mt=null,ht=null,Te=!1,Nt=null;function wo(e,t){var r=wt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Eo(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mt=e,ht=Xt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hr!==null?{id:Ft,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,mt=e,ht=null,!0):!1;default:return!1}}function Jl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zl(e){if(Te){var t=ht;if(t){var r=t;if(!Eo(e,t)){if(Jl(e))throw Error(i(418));t=Xt(r.nextSibling);var n=mt;t&&Eo(e,t)?wo(n,r):(e.flags=e.flags&-4097|2,Te=!1,mt=e)}}else{if(Jl(e))throw Error(i(418));e.flags=e.flags&-4097|2,Te=!1,mt=e}}}function bo(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mt=e}function _s(e){if(e!==mt)return!1;if(!Te)return bo(e),Te=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hl(e.type,e.memoizedProps)),t&&(t=ht)){if(Jl(e))throw No(),Error(i(418));for(;t;)wo(e,t),t=Xt(t.nextSibling)}if(bo(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=Xt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=mt?Xt(e.stateNode.nextSibling):null;return!0}function No(){for(var e=ht;e;)e=Xt(e.nextSibling)}function Hr(){ht=mt=null,Te=!1}function ea(e){Nt===null?Nt=[e]:Nt.push(e)}var Rd=U.ReactCurrentBatchConfig;function Ln(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var s=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(u){var p=s.refs;u===null?delete p[l]:p[l]=u},t._stringRef=l,t)}if(typeof e!="string")throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Cs(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _o(e){var t=e._init;return t(e._payload)}function Co(e){function t(k,y){if(e){var E=k.deletions;E===null?(k.deletions=[y],k.flags|=16):E.push(y)}}function r(k,y){if(!e)return null;for(;y!==null;)t(k,y),y=y.sibling;return null}function n(k,y){for(k=new Map;y!==null;)y.key!==null?k.set(y.key,y):k.set(y.index,y),y=y.sibling;return k}function s(k,y){return k=or(k,y),k.index=0,k.sibling=null,k}function l(k,y,E){return k.index=E,e?(E=k.alternate,E!==null?(E=E.index,E<y?(k.flags|=2,y):E):(k.flags|=2,y)):(k.flags|=1048576,y)}function u(k){return e&&k.alternate===null&&(k.flags|=2),k}function p(k,y,E,$){return y===null||y.tag!==6?(y=Ya(E,k.mode,$),y.return=k,y):(y=s(y,E),y.return=k,y)}function g(k,y,E,$){var G=E.type;return G===xe?P(k,y,E.props.children,$,E.key):y!==null&&(y.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===fe&&_o(G)===y.type)?($=s(y,E.props),$.ref=Ln(k,y,E),$.return=k,$):($=Xs(E.type,E.key,E.props,null,k.mode,$),$.ref=Ln(k,y,E),$.return=k,$)}function N(k,y,E,$){return y===null||y.tag!==4||y.stateNode.containerInfo!==E.containerInfo||y.stateNode.implementation!==E.implementation?(y=Wa(E,k.mode,$),y.return=k,y):(y=s(y,E.children||[]),y.return=k,y)}function P(k,y,E,$,G){return y===null||y.tag!==7?(y=br(E,k.mode,$,G),y.return=k,y):(y=s(y,E),y.return=k,y)}function L(k,y,E){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ya(""+y,k.mode,E),y.return=k,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ne:return E=Xs(y.type,y.key,y.props,null,k.mode,E),E.ref=Ln(k,null,y),E.return=k,E;case V:return y=Wa(y,k.mode,E),y.return=k,y;case fe:var $=y._init;return L(k,$(y._payload),E)}if(Ue(y)||Y(y))return y=br(y,k.mode,E,null),y.return=k,y;Cs(k,y)}return null}function T(k,y,E,$){var G=y!==null?y.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return G!==null?null:p(k,y,""+E,$);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ne:return E.key===G?g(k,y,E,$):null;case V:return E.key===G?N(k,y,E,$):null;case fe:return G=E._init,T(k,y,G(E._payload),$)}if(Ue(E)||Y(E))return G!==null?null:P(k,y,E,$,null);Cs(k,E)}return null}function z(k,y,E,$,G){if(typeof $=="string"&&$!==""||typeof $=="number")return k=k.get(E)||null,p(y,k,""+$,G);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ne:return k=k.get($.key===null?E:$.key)||null,g(y,k,$,G);case V:return k=k.get($.key===null?E:$.key)||null,N(y,k,$,G);case fe:var X=$._init;return z(k,y,E,X($._payload),G)}if(Ue($)||Y($))return k=k.get(E)||null,P(y,k,$,G,null);Cs(y,$)}return null}function H(k,y,E,$){for(var G=null,X=null,J=y,ee=y=0,We=null;J!==null&&ee<E.length;ee++){J.index>ee?(We=J,J=null):We=J.sibling;var ve=T(k,J,E[ee],$);if(ve===null){J===null&&(J=We);break}e&&J&&ve.alternate===null&&t(k,J),y=l(ve,y,ee),X===null?G=ve:X.sibling=ve,X=ve,J=We}if(ee===E.length)return r(k,J),Te&&gr(k,ee),G;if(J===null){for(;ee<E.length;ee++)J=L(k,E[ee],$),J!==null&&(y=l(J,y,ee),X===null?G=J:X.sibling=J,X=J);return Te&&gr(k,ee),G}for(J=n(k,J);ee<E.length;ee++)We=z(J,k,ee,E[ee],$),We!==null&&(e&&We.alternate!==null&&J.delete(We.key===null?ee:We.key),y=l(We,y,ee),X===null?G=We:X.sibling=We,X=We);return e&&J.forEach(function(ur){return t(k,ur)}),Te&&gr(k,ee),G}function W(k,y,E,$){var G=Y(E);if(typeof G!="function")throw Error(i(150));if(E=G.call(E),E==null)throw Error(i(151));for(var X=G=null,J=y,ee=y=0,We=null,ve=E.next();J!==null&&!ve.done;ee++,ve=E.next()){J.index>ee?(We=J,J=null):We=J.sibling;var ur=T(k,J,ve.value,$);if(ur===null){J===null&&(J=We);break}e&&J&&ur.alternate===null&&t(k,J),y=l(ur,y,ee),X===null?G=ur:X.sibling=ur,X=ur,J=We}if(ve.done)return r(k,J),Te&&gr(k,ee),G;if(J===null){for(;!ve.done;ee++,ve=E.next())ve=L(k,ve.value,$),ve!==null&&(y=l(ve,y,ee),X===null?G=ve:X.sibling=ve,X=ve);return Te&&gr(k,ee),G}for(J=n(k,J);!ve.done;ee++,ve=E.next())ve=z(J,k,ee,ve.value,$),ve!==null&&(e&&ve.alternate!==null&&J.delete(ve.key===null?ee:ve.key),y=l(ve,y,ee),X===null?G=ve:X.sibling=ve,X=ve);return e&&J.forEach(function(of){return t(k,of)}),Te&&gr(k,ee),G}function De(k,y,E,$){if(typeof E=="object"&&E!==null&&E.type===xe&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ne:e:{for(var G=E.key,X=y;X!==null;){if(X.key===G){if(G=E.type,G===xe){if(X.tag===7){r(k,X.sibling),y=s(X,E.props.children),y.return=k,k=y;break e}}else if(X.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===fe&&_o(G)===X.type){r(k,X.sibling),y=s(X,E.props),y.ref=Ln(k,X,E),y.return=k,k=y;break e}r(k,X);break}else t(k,X);X=X.sibling}E.type===xe?(y=br(E.props.children,k.mode,$,E.key),y.return=k,k=y):($=Xs(E.type,E.key,E.props,null,k.mode,$),$.ref=Ln(k,y,E),$.return=k,k=$)}return u(k);case V:e:{for(X=E.key;y!==null;){if(y.key===X)if(y.tag===4&&y.stateNode.containerInfo===E.containerInfo&&y.stateNode.implementation===E.implementation){r(k,y.sibling),y=s(y,E.children||[]),y.return=k,k=y;break e}else{r(k,y);break}else t(k,y);y=y.sibling}y=Wa(E,k.mode,$),y.return=k,k=y}return u(k);case fe:return X=E._init,De(k,y,X(E._payload),$)}if(Ue(E))return H(k,y,E,$);if(Y(E))return W(k,y,E,$);Cs(k,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,y!==null&&y.tag===6?(r(k,y.sibling),y=s(y,E),y.return=k,k=y):(r(k,y),y=Ya(E,k.mode,$),y.return=k,k=y),u(k)):r(k,y)}return De}var Yr=Co(!0),Ro=Co(!1),Rs=Jt(null),js=null,Wr=null,ta=null;function ra(){ta=Wr=js=null}function na(e){var t=Rs.current;Ce(Rs),e._currentValue=t}function sa(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Vr(e,t){js=e,ta=Wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ot=!0),e.firstContext=null)}function xt(e){var t=e._currentValue;if(ta!==e)if(e={context:e,memoizedValue:t,next:null},Wr===null){if(js===null)throw Error(i(308));Wr=e,js.dependencies={lanes:0,firstContext:e}}else Wr=Wr.next=e;return t}var yr=null;function la(e){yr===null?yr=[e]:yr.push(e)}function jo(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,la(t)):(r.next=s.next,s.next=r),t.interleaved=r,Ut(e,n)}function Ut(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var tr=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function To(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ge&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Ut(e,r)}return s=n.interleaved,s===null?(t.next=t,la(n)):(t.next=s.next,s.next=t),n.interleaved=t,Ut(e,r)}function Ts(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Sl(e,r)}}function Mo(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?s=l=u:l=l.next=u,r=r.next}while(r!==null);l===null?s=l=t:l=l.next=t}else s=l=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ms(e,t,r,n){var s=e.updateQueue;tr=!1;var l=s.firstBaseUpdate,u=s.lastBaseUpdate,p=s.shared.pending;if(p!==null){s.shared.pending=null;var g=p,N=g.next;g.next=null,u===null?l=N:u.next=N,u=g;var P=e.alternate;P!==null&&(P=P.updateQueue,p=P.lastBaseUpdate,p!==u&&(p===null?P.firstBaseUpdate=N:p.next=N,P.lastBaseUpdate=g))}if(l!==null){var L=s.baseState;u=0,P=N=g=null,p=l;do{var T=p.lane,z=p.eventTime;if((n&T)===T){P!==null&&(P=P.next={eventTime:z,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var H=e,W=p;switch(T=t,z=r,W.tag){case 1:if(H=W.payload,typeof H=="function"){L=H.call(z,L,T);break e}L=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=W.payload,T=typeof H=="function"?H.call(z,L,T):H,T==null)break e;L=F({},L,T);break e;case 2:tr=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,T=s.effects,T===null?s.effects=[p]:T.push(p))}else z={eventTime:z,lane:T,tag:p.tag,payload:p.payload,callback:p.callback,next:null},P===null?(N=P=z,g=L):P=P.next=z,u|=T;if(p=p.next,p===null){if(p=s.shared.pending,p===null)break;T=p,p=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(P===null&&(g=L),s.baseState=g,s.firstBaseUpdate=N,s.lastBaseUpdate=P,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);Sr|=u,e.lanes=u,e.memoizedState=L}}function Po(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(i(191,s));s.call(n)}}}var In={},Lt=Jt(In),$n=Jt(In),On=Jt(In);function vr(e){if(e===In)throw Error(i(174));return e}function ia(e,t){switch(be(On,t),be($n,e),be(Lt,In),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ol(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ol(t,e)}Ce(Lt),be(Lt,t)}function Gr(){Ce(Lt),Ce($n),Ce(On)}function Lo(e){vr(On.current);var t=vr(Lt.current),r=ol(t,e.type);t!==r&&(be($n,e),be(Lt,r))}function oa(e){$n.current===e&&(Ce(Lt),Ce($n))}var Me=Jt(0);function Ps(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function ca(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var Ls=U.ReactCurrentDispatcher,da=U.ReactCurrentBatchConfig,xr=0,Pe=null,Be=null,He=null,Is=!1,Dn=!1,An=0,jd=0;function Ze(){throw Error(i(321))}function fa(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bt(e[r],t[r]))return!1;return!0}function pa(e,t,r,n,s,l){if(xr=l,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ls.current=e===null||e.memoizedState===null?Ld:Id,e=r(n,s),Dn){l=0;do{if(Dn=!1,An=0,25<=l)throw Error(i(301));l+=1,He=Be=null,t.updateQueue=null,Ls.current=$d,e=r(n,s)}while(Dn)}if(Ls.current=Ds,t=Be!==null&&Be.next!==null,xr=0,He=Be=Pe=null,Is=!1,t)throw Error(i(300));return e}function ma(){var e=An!==0;return An=0,e}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Pe.memoizedState=He=e:He=He.next=e,He}function St(){if(Be===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=He===null?Pe.memoizedState:He.next;if(t!==null)He=t,Be=e;else{if(e===null)throw Error(i(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},He===null?Pe.memoizedState=He=e:He=He.next=e}return He}function Fn(e,t){return typeof t=="function"?t(e):t}function ha(e){var t=St(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var n=Be,s=n.baseQueue,l=r.pending;if(l!==null){if(s!==null){var u=s.next;s.next=l.next,l.next=u}n.baseQueue=s=l,r.pending=null}if(s!==null){l=s.next,n=n.baseState;var p=u=null,g=null,N=l;do{var P=N.lane;if((xr&P)===P)g!==null&&(g=g.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),n=N.hasEagerState?N.eagerState:e(n,N.action);else{var L={lane:P,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};g===null?(p=g=L,u=n):g=g.next=L,Pe.lanes|=P,Sr|=P}N=N.next}while(N!==null&&N!==l);g===null?u=n:g.next=p,bt(n,t.memoizedState)||(ot=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=g,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do l=s.lane,Pe.lanes|=l,Sr|=l,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ga(e){var t=St(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,l=t.memoizedState;if(s!==null){r.pending=null;var u=s=s.next;do l=e(l,u.action),u=u.next;while(u!==s);bt(l,t.memoizedState)||(ot=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Io(){}function $o(e,t){var r=Pe,n=St(),s=t(),l=!bt(n.memoizedState,s);if(l&&(n.memoizedState=s,ot=!0),n=n.queue,ya(Ao.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||He!==null&&He.memoizedState.tag&1){if(r.flags|=2048,zn(9,Do.bind(null,r,n,s,t),void 0,null),Ye===null)throw Error(i(349));(xr&30)!==0||Oo(r,t,s)}return s}function Oo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Do(e,t,r,n){t.value=r,t.getSnapshot=n,Fo(t)&&zo(e)}function Ao(e,t,r){return r(function(){Fo(t)&&zo(e)})}function Fo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bt(e,r)}catch{return!0}}function zo(e){var t=Ut(e,1);t!==null&&jt(t,e,1,-1)}function Uo(e){var t=It();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fn,lastRenderedState:e},t.queue=e,e=e.dispatch=Pd.bind(null,Pe,e),[t.memoizedState,e]}function zn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Bo(){return St().memoizedState}function $s(e,t,r,n){var s=It();Pe.flags|=e,s.memoizedState=zn(1|t,r,void 0,n===void 0?null:n)}function Os(e,t,r,n){var s=St();n=n===void 0?null:n;var l=void 0;if(Be!==null){var u=Be.memoizedState;if(l=u.destroy,n!==null&&fa(n,u.deps)){s.memoizedState=zn(t,r,l,n);return}}Pe.flags|=e,s.memoizedState=zn(1|t,r,l,n)}function Ko(e,t){return $s(8390656,8,e,t)}function ya(e,t){return Os(2048,8,e,t)}function Ho(e,t){return Os(4,2,e,t)}function Yo(e,t){return Os(4,4,e,t)}function Wo(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vo(e,t,r){return r=r!=null?r.concat([e]):null,Os(4,4,Wo.bind(null,t,e),r)}function va(){}function Go(e,t){var r=St();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fa(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qo(e,t){var r=St();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&fa(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function qo(e,t,r){return(xr&21)===0?(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=r):(bt(r,t)||(r=Ni(),Pe.lanes|=r,Sr|=r,e.baseState=!0),t)}function Td(e,t){var r=we;we=r!==0&&4>r?r:4,e(!0);var n=da.transition;da.transition={};try{e(!1),t()}finally{we=r,da.transition=n}}function Xo(){return St().memoizedState}function Md(e,t,r){var n=ar(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jo(e))Zo(t,r);else if(r=jo(e,t,r,n),r!==null){var s=st();jt(r,e,n,s),eu(r,t,n)}}function Pd(e,t,r){var n=ar(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var u=t.lastRenderedState,p=l(u,r);if(s.hasEagerState=!0,s.eagerState=p,bt(p,u)){var g=t.interleaved;g===null?(s.next=s,la(t)):(s.next=g.next,g.next=s),t.interleaved=s;return}}catch{}finally{}r=jo(e,t,s,n),r!==null&&(s=st(),jt(r,e,n,s),eu(r,t,n))}}function Jo(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function Zo(e,t){Dn=Is=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function eu(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Sl(e,r)}}var Ds={readContext:xt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},Ld={readContext:xt,useCallback:function(e,t){return It().memoizedState=[e,t===void 0?null:t],e},useContext:xt,useEffect:Ko,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$s(4194308,4,Wo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){return $s(4,2,e,t)},useMemo:function(e,t){var r=It();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=It();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Md.bind(null,Pe,e),[n.memoizedState,e]},useRef:function(e){var t=It();return e={current:e},t.memoizedState=e},useState:Uo,useDebugValue:va,useDeferredValue:function(e){return It().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Td.bind(null,e[1]),It().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Pe,s=It();if(Te){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Ye===null)throw Error(i(349));(xr&30)!==0||Oo(n,t,r)}s.memoizedState=r;var l={value:r,getSnapshot:t};return s.queue=l,Ko(Ao.bind(null,n,l,e),[e]),n.flags|=2048,zn(9,Do.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=It(),t=Ye.identifierPrefix;if(Te){var r=zt,n=Ft;r=(n&~(1<<32-Et(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=An++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jd++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Id={readContext:xt,useCallback:Go,useContext:xt,useEffect:ya,useImperativeHandle:Vo,useInsertionEffect:Ho,useLayoutEffect:Yo,useMemo:Qo,useReducer:ha,useRef:Bo,useState:function(){return ha(Fn)},useDebugValue:va,useDeferredValue:function(e){var t=St();return qo(t,Be.memoizedState,e)},useTransition:function(){var e=ha(Fn)[0],t=St().memoizedState;return[e,t]},useMutableSource:Io,useSyncExternalStore:$o,useId:Xo,unstable_isNewReconciler:!1},$d={readContext:xt,useCallback:Go,useContext:xt,useEffect:ya,useImperativeHandle:Vo,useInsertionEffect:Ho,useLayoutEffect:Yo,useMemo:Qo,useReducer:ga,useRef:Bo,useState:function(){return ga(Fn)},useDebugValue:va,useDeferredValue:function(e){var t=St();return Be===null?t.memoizedState=e:qo(t,Be.memoizedState,e)},useTransition:function(){var e=ga(Fn)[0],t=St().memoizedState;return[e,t]},useMutableSource:Io,useSyncExternalStore:$o,useId:Xo,unstable_isNewReconciler:!1};function _t(e,t){if(e&&e.defaultProps){t=F({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function xa(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:F({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var As={isMounted:function(e){return(e=e._reactInternals)?fr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=st(),s=ar(e),l=Bt(n,s);l.payload=t,r!=null&&(l.callback=r),t=rr(e,l,s),t!==null&&(jt(t,e,s,n),Ts(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=st(),s=ar(e),l=Bt(n,s);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=rr(e,l,s),t!==null&&(jt(t,e,s,n),Ts(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=st(),n=ar(e),s=Bt(r,n);s.tag=2,t!=null&&(s.callback=t),t=rr(e,s,n),t!==null&&(jt(t,e,n,r),Ts(t,e,n))}};function tu(e,t,r,n,s,l,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,u):t.prototype&&t.prototype.isPureReactComponent?!_n(r,n)||!_n(s,l):!0}function ru(e,t,r){var n=!1,s=Zt,l=t.contextType;return typeof l=="object"&&l!==null?l=xt(l):(s=it(t)?mr:Je.current,n=t.contextTypes,l=(n=n!=null)?Ur(e,s):Zt),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=As,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function nu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&As.enqueueReplaceState(t,t.state,null)}function Sa(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},aa(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=xt(l):(l=it(t)?mr:Je.current,s.context=Ur(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(xa(e,t,l,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&As.enqueueReplaceState(s,s.state,null),Ms(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Qr(e,t){try{var r="",n=t;do r+=se(n),n=n.return;while(n);var s=r}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function ka(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function wa(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Od=typeof WeakMap=="function"?WeakMap:Map;function su(e,t,r){r=Bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ys||(Ys=!0,Da=n),wa(e,t)},r}function lu(e,t,r){r=Bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){wa(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){wa(e,t),typeof n!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function au(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Od;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=qd.bind(null,e,t,r),t.then(e,e))}function iu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ou(e,t,r,n,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bt(-1,1),t.tag=2,rr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Dd=U.ReactCurrentOwner,ot=!1;function nt(e,t,r,n){t.child=e===null?Ro(t,null,r,n):Yr(t,e.child,r,n)}function uu(e,t,r,n,s){r=r.render;var l=t.ref;return Vr(t,s),n=pa(e,t,r,n,l,s),r=ma(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(Te&&r&&ql(t),t.flags|=1,nt(e,t,n,s),t.child)}function cu(e,t,r,n,s){if(e===null){var l=r.type;return typeof l=="function"&&!Ha(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,du(e,t,l,n,s)):(e=Xs(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,(e.lanes&s)===0){var u=l.memoizedProps;if(r=r.compare,r=r!==null?r:_n,r(u,n)&&e.ref===t.ref)return Kt(e,t,s)}return t.flags|=1,e=or(l,n),e.ref=t.ref,e.return=t,t.child=e}function du(e,t,r,n,s){if(e!==null){var l=e.memoizedProps;if(_n(l,n)&&e.ref===t.ref)if(ot=!1,t.pendingProps=n=l,(e.lanes&s)!==0)(e.flags&131072)!==0&&(ot=!0);else return t.lanes=e.lanes,Kt(e,t,s)}return Ea(e,t,r,n,s)}function fu(e,t,r){var n=t.pendingProps,s=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Xr,gt),gt|=r;else{if((r&1073741824)===0)return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,be(Xr,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,be(Xr,gt),gt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,be(Xr,gt),gt|=n;return nt(e,t,s,r),t.child}function pu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,r,n,s){var l=it(r)?mr:Je.current;return l=Ur(t,l),Vr(t,s),r=pa(e,t,r,n,l,s),n=ma(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Kt(e,t,s)):(Te&&n&&ql(t),t.flags|=1,nt(e,t,r,s),t.child)}function mu(e,t,r,n,s){if(it(r)){var l=!0;ws(t)}else l=!1;if(Vr(t,s),t.stateNode===null)zs(e,t),ru(t,r,n),Sa(t,r,n,s),n=!0;else if(e===null){var u=t.stateNode,p=t.memoizedProps;u.props=p;var g=u.context,N=r.contextType;typeof N=="object"&&N!==null?N=xt(N):(N=it(r)?mr:Je.current,N=Ur(t,N));var P=r.getDerivedStateFromProps,L=typeof P=="function"||typeof u.getSnapshotBeforeUpdate=="function";L||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==n||g!==N)&&nu(t,u,n,N),tr=!1;var T=t.memoizedState;u.state=T,Ms(t,n,u,s),g=t.memoizedState,p!==n||T!==g||at.current||tr?(typeof P=="function"&&(xa(t,r,P,n),g=t.memoizedState),(p=tr||tu(t,r,p,n,T,g,N))?(L||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=g),u.props=n,u.state=g,u.context=N,n=p):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,To(e,t),p=t.memoizedProps,N=t.type===t.elementType?p:_t(t.type,p),u.props=N,L=t.pendingProps,T=u.context,g=r.contextType,typeof g=="object"&&g!==null?g=xt(g):(g=it(r)?mr:Je.current,g=Ur(t,g));var z=r.getDerivedStateFromProps;(P=typeof z=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(p!==L||T!==g)&&nu(t,u,n,g),tr=!1,T=t.memoizedState,u.state=T,Ms(t,n,u,s);var H=t.memoizedState;p!==L||T!==H||at.current||tr?(typeof z=="function"&&(xa(t,r,z,n),H=t.memoizedState),(N=tr||tu(t,r,N,n,T,H,g)||!1)?(P||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,H,g),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,H,g)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=H),u.props=n,u.state=H,u.context=g,n=N):(typeof u.componentDidUpdate!="function"||p===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),n=!1)}return ba(e,t,r,n,l,s)}function ba(e,t,r,n,s,l){pu(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return s&&xo(t,r,!1),Kt(e,t,l);n=t.stateNode,Dd.current=t;var p=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=Yr(t,e.child,null,l),t.child=Yr(t,null,p,l)):nt(e,t,p,l),t.memoizedState=n.state,s&&xo(t,r,!0),t.child}function hu(e){var t=e.stateNode;t.pendingContext?yo(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yo(e,t.context,!1),ia(e,t.containerInfo)}function gu(e,t,r,n,s){return Hr(),ea(s),t.flags|=256,nt(e,t,r,n),t.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function _a(e){return{baseLanes:e,cachePool:null,transitions:null}}function yu(e,t,r){var n=t.pendingProps,s=Me.current,l=!1,u=(t.flags&128)!==0,p;if((p=u)||(p=e!==null&&e.memoizedState===null?!1:(s&2)!==0),p?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),be(Me,s&1),e===null)return Zl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(u=n.children,e=n.fallback,l?(n=t.mode,l=t.child,u={mode:"hidden",children:u},(n&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=u):l=Js(u,n,0,null),e=br(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=_a(r),t.memoizedState=Na,e):Ca(t,u));if(s=e.memoizedState,s!==null&&(p=s.dehydrated,p!==null))return Ad(e,t,u,n,p,s,r);if(l){l=n.fallback,u=t.mode,s=e.child,p=s.sibling;var g={mode:"hidden",children:n.children};return(u&1)===0&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=g,t.deletions=null):(n=or(s,g),n.subtreeFlags=s.subtreeFlags&14680064),p!==null?l=or(p,l):(l=br(l,u,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,u=e.child.memoizedState,u=u===null?_a(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=e.childLanes&~r,t.memoizedState=Na,n}return l=e.child,e=l.sibling,n=or(l,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ca(e,t){return t=Js({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fs(e,t,r,n){return n!==null&&ea(n),Yr(t,e.child,null,r),e=Ca(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ad(e,t,r,n,s,l,u){if(r)return t.flags&256?(t.flags&=-257,n=ka(Error(i(422))),Fs(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,s=t.mode,n=Js({mode:"visible",children:n.children},s,0,null),l=br(l,s,u,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,(t.mode&1)!==0&&Yr(t,e.child,null,u),t.child.memoizedState=_a(u),t.memoizedState=Na,l);if((t.mode&1)===0)return Fs(e,t,u,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var p=n.dgst;return n=p,l=Error(i(419)),n=ka(l,n,void 0),Fs(e,t,u,n)}if(p=(u&e.childLanes)!==0,ot||p){if(n=Ye,n!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(n.suspendedLanes|u))!==0?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,Ut(e,s),jt(n,e,s,-1))}return Ka(),n=ka(Error(i(421))),Fs(e,t,u,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Xd.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,ht=Xt(s.nextSibling),mt=t,Te=!0,Nt=null,e!==null&&(yt[vt++]=Ft,yt[vt++]=zt,yt[vt++]=hr,Ft=e.id,zt=e.overflow,hr=t),t=Ca(t,n.children),t.flags|=4096,t)}function vu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),sa(e.return,t,r)}function Ra(e,t,r,n,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=s)}function xu(e,t,r){var n=t.pendingProps,s=n.revealOrder,l=n.tail;if(nt(e,t,n.children,r),n=Me.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vu(e,r,t);else if(e.tag===19)vu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(be(Me,n),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Ps(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ra(t,!1,s,r,l);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ps(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ra(t,!0,r,null,l);break;case"together":Ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Sr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=or(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=or(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Fd(e,t,r){switch(t.tag){case 3:hu(t),Hr();break;case 5:Lo(t);break;case 1:it(t.type)&&ws(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;be(Rs,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(be(Me,Me.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?yu(e,t,r):(be(Me,Me.current&1),e=Kt(e,t,r),e!==null?e.sibling:null);be(Me,Me.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return xu(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(Me,Me.current),n)break;return null;case 22:case 23:return t.lanes=0,fu(e,t,r)}return Kt(e,t,r)}var Su,ja,ku,wu;Su=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ja=function(){},ku=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,vr(Lt.current);var l=null;switch(r){case"input":s=on(e,s),n=on(e,n),l=[];break;case"select":s=F({},s,{value:void 0}),n=F({},n,{value:void 0}),l=[];break;case"textarea":s=Tt(e,s),n=Tt(e,n),l=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=xs)}ul(r,n);var u;r=null;for(N in s)if(!n.hasOwnProperty(N)&&s.hasOwnProperty(N)&&s[N]!=null)if(N==="style"){var p=s[N];for(u in p)p.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(f.hasOwnProperty(N)?l||(l=[]):(l=l||[]).push(N,null));for(N in n){var g=n[N];if(p=s?.[N],n.hasOwnProperty(N)&&g!==p&&(g!=null||p!=null))if(N==="style")if(p){for(u in p)!p.hasOwnProperty(u)||g&&g.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in g)g.hasOwnProperty(u)&&p[u]!==g[u]&&(r||(r={}),r[u]=g[u])}else r||(l||(l=[]),l.push(N,r)),r=g;else N==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,p=p?p.__html:void 0,g!=null&&p!==g&&(l=l||[]).push(N,g)):N==="children"?typeof g!="string"&&typeof g!="number"||(l=l||[]).push(N,""+g):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(f.hasOwnProperty(N)?(g!=null&&N==="onScroll"&&_e("scroll",e),l||p===g||(l=[])):(l=l||[]).push(N,g))}r&&(l=l||[]).push("style",r);var N=l;(t.updateQueue=N)&&(t.flags|=4)}},wu=function(e,t,r,n){r!==n&&(t.flags|=4)};function Un(e,t){if(!Te)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function zd(e,t,r){var n=t.pendingProps;switch(Xl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return it(t.type)&&ks(),et(t),null;case 3:return n=t.stateNode,Gr(),Ce(at),Ce(Je),ca(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_s(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nt!==null&&(za(Nt),Nt=null))),ja(e,t),et(t),null;case 5:oa(t);var s=vr(On.current);if(r=t.type,e!==null&&t.stateNode!=null)ku(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(i(166));return et(t),null}if(e=vr(Lt.current),_s(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Pt]=t,n[Mn]=l,e=(t.mode&1)!==0,r){case"dialog":_e("cancel",n),_e("close",n);break;case"iframe":case"object":case"embed":_e("load",n);break;case"video":case"audio":for(s=0;s<Rn.length;s++)_e(Rn[s],n);break;case"source":_e("error",n);break;case"img":case"image":case"link":_e("error",n),_e("load",n);break;case"details":_e("toggle",n);break;case"input":K(n,l),_e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},_e("invalid",n);break;case"textarea":lt(n,l),_e("invalid",n)}ul(r,l),s=null;for(var u in l)if(l.hasOwnProperty(u)){var p=l[u];u==="children"?typeof p=="string"?n.textContent!==p&&(l.suppressHydrationWarning!==!0&&vs(n.textContent,p,e),s=["children",p]):typeof p=="number"&&n.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&vs(n.textContent,p,e),s=["children",""+p]):f.hasOwnProperty(u)&&p!=null&&u==="onScroll"&&_e("scroll",n)}switch(r){case"input":dr(n),Se(n,l,!0);break;case"textarea":dr(n),ai(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=xs)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ii(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[Pt]=t,e[Mn]=n,Su(e,t,!1,!1),t.stateNode=e;e:{switch(u=cl(r,n),r){case"dialog":_e("cancel",e),_e("close",e),s=n;break;case"iframe":case"object":case"embed":_e("load",e),s=n;break;case"video":case"audio":for(s=0;s<Rn.length;s++)_e(Rn[s],e);s=n;break;case"source":_e("error",e),s=n;break;case"img":case"image":case"link":_e("error",e),_e("load",e),s=n;break;case"details":_e("toggle",e),s=n;break;case"input":K(e,n),s=on(e,n),_e("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=F({},n,{value:void 0}),_e("invalid",e);break;case"textarea":lt(e,n),s=Tt(e,n),_e("invalid",e);break;default:s=n}ul(r,s),p=s;for(l in p)if(p.hasOwnProperty(l)){var g=p[l];l==="style"?ci(e,g):l==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&oi(e,g)):l==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&un(e,g):typeof g=="number"&&un(e,""+g):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(f.hasOwnProperty(l)?g!=null&&l==="onScroll"&&_e("scroll",e):g!=null&&Re(e,l,g,u))}switch(r){case"input":dr(e),Se(e,n,!1);break;case"textarea":dr(e),ai(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ye(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?$e(e,!!n.multiple,l,!1):n.defaultValue!=null&&$e(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=xs)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)wu(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(i(166));if(r=vr(On.current),vr(Lt.current),_s(t)){if(n=t.stateNode,r=t.memoizedProps,n[Pt]=t,(l=n.nodeValue!==r)&&(e=mt,e!==null))switch(e.tag){case 3:vs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vs(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Pt]=t,t.stateNode=n}return et(t),null;case 13:if(Ce(Me),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Te&&ht!==null&&(t.mode&1)!==0&&(t.flags&128)===0)No(),Hr(),t.flags|=98560,l=!1;else if(l=_s(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[Pt]=t}else Hr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;et(t),l=!1}else Nt!==null&&(za(Nt),Nt=null),l=!0;if(!l)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Me.current&1)!==0?Ke===0&&(Ke=3):Ka())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return Gr(),ja(e,t),e===null&&jn(t.stateNode.containerInfo),et(t),null;case 10:return na(t.type._context),et(t),null;case 17:return it(t.type)&&ks(),et(t),null;case 19:if(Ce(Me),l=t.memoizedState,l===null)return et(t),null;if(n=(t.flags&128)!==0,u=l.rendering,u===null)if(n)Un(l,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ps(e),u!==null){for(t.flags|=128,Un(l,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,u=l.alternate,u===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,e=u.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return be(Me,Me.current&1|2),t.child}e=e.sibling}l.tail!==null&&Oe()>Jr&&(t.flags|=128,n=!0,Un(l,!1),t.lanes=4194304)}else{if(!n)if(e=Ps(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Un(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Te)return et(t),null}else 2*Oe()-l.renderingStartTime>Jr&&r!==1073741824&&(t.flags|=128,n=!0,Un(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(r=l.last,r!==null?r.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Oe(),t.sibling=null,r=Me.current,be(Me,n?r&1|2:r&1),t):(et(t),null);case 22:case 23:return Ba(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(gt&1073741824)!==0&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function Ud(e,t){switch(Xl(t),t.tag){case 1:return it(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gr(),Ce(at),Ce(Je),ca(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return oa(t),null;case 13:if(Ce(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Me),null;case 4:return Gr(),null;case 10:return na(t.type._context),null;case 22:case 23:return Ba(),null;case 24:return null;default:return null}}var Us=!1,tt=!1,Bd=typeof WeakSet=="function"?WeakSet:Set,B=null;function qr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Le(e,t,n)}else r.current=null}function Ta(e,t,r){try{r()}catch(n){Le(e,t,n)}}var Eu=!1;function Kd(e,t){if(Bl=is,e=eo(),Il(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var u=0,p=-1,g=-1,N=0,P=0,L=e,T=null;t:for(;;){for(var z;L!==r||s!==0&&L.nodeType!==3||(p=u+s),L!==l||n!==0&&L.nodeType!==3||(g=u+n),L.nodeType===3&&(u+=L.nodeValue.length),(z=L.firstChild)!==null;)T=L,L=z;for(;;){if(L===e)break t;if(T===r&&++N===s&&(p=u),T===l&&++P===n&&(g=u),(z=L.nextSibling)!==null)break;L=T,T=L.parentNode}L=z}r=p===-1||g===-1?null:{start:p,end:g}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kl={focusedElem:e,selectionRange:r},is=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var H=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var W=H.memoizedProps,De=H.memoizedState,k=t.stateNode,y=k.getSnapshotBeforeUpdate(t.elementType===t.type?W:_t(t.type,W),De);k.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch($){Le(t,t.return,$)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return H=Eu,Eu=!1,H}function Bn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Ta(t,r,l)}s=s.next}while(s!==n)}}function Bs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ma(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function bu(e){var t=e.alternate;t!==null&&(e.alternate=null,bu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Pt],delete t[Mn],delete t[Vl],delete t[Nd],delete t[_d])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nu(e){return e.tag===5||e.tag===3||e.tag===4}function _u(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pa(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=xs));else if(n!==4&&(e=e.child,e!==null))for(Pa(e,t,r),e=e.sibling;e!==null;)Pa(e,t,r),e=e.sibling}function La(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(La(e,t,r),e=e.sibling;e!==null;)La(e,t,r),e=e.sibling}var qe=null,Ct=!1;function nr(e,t,r){for(r=r.child;r!==null;)Cu(e,t,r),r=r.sibling}function Cu(e,t,r){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(ts,r)}catch{}switch(r.tag){case 5:tt||qr(r,t);case 6:var n=qe,s=Ct;qe=null,nr(e,t,r),qe=n,Ct=s,qe!==null&&(Ct?(e=qe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):qe.removeChild(r.stateNode));break;case 18:qe!==null&&(Ct?(e=qe,r=r.stateNode,e.nodeType===8?Wl(e.parentNode,r):e.nodeType===1&&Wl(e,r),Sn(e)):Wl(qe,r.stateNode));break;case 4:n=qe,s=Ct,qe=r.stateNode.containerInfo,Ct=!0,nr(e,t,r),qe=n,Ct=s;break;case 0:case 11:case 14:case 15:if(!tt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var l=s,u=l.destroy;l=l.tag,u!==void 0&&((l&2)!==0||(l&4)!==0)&&Ta(r,t,u),s=s.next}while(s!==n)}nr(e,t,r);break;case 1:if(!tt&&(qr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(p){Le(r,t,p)}nr(e,t,r);break;case 21:nr(e,t,r);break;case 22:r.mode&1?(tt=(n=tt)||r.memoizedState!==null,nr(e,t,r),tt=n):nr(e,t,r);break;default:nr(e,t,r)}}function Ru(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Bd),t.forEach(function(n){var s=Jd.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Rt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var l=e,u=t,p=u;e:for(;p!==null;){switch(p.tag){case 5:qe=p.stateNode,Ct=!1;break e;case 3:qe=p.stateNode.containerInfo,Ct=!0;break e;case 4:qe=p.stateNode.containerInfo,Ct=!0;break e}p=p.return}if(qe===null)throw Error(i(160));Cu(l,u,s),qe=null,Ct=!1;var g=s.alternate;g!==null&&(g.return=null),s.return=null}catch(N){Le(s,t,N)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ju(t,e),t=t.sibling}function ju(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),$t(e),n&4){try{Bn(3,e,e.return),Bs(3,e)}catch(W){Le(e,e.return,W)}try{Bn(5,e,e.return)}catch(W){Le(e,e.return,W)}}break;case 1:Rt(t,e),$t(e),n&512&&r!==null&&qr(r,r.return);break;case 5:if(Rt(t,e),$t(e),n&512&&r!==null&&qr(r,r.return),e.flags&32){var s=e.stateNode;try{un(s,"")}catch(W){Le(e,e.return,W)}}if(n&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,u=r!==null?r.memoizedProps:l,p=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&he(s,l),cl(p,u);var N=cl(p,l);for(u=0;u<g.length;u+=2){var P=g[u],L=g[u+1];P==="style"?ci(s,L):P==="dangerouslySetInnerHTML"?oi(s,L):P==="children"?un(s,L):Re(s,P,L,N)}switch(p){case"input":ue(s,l);break;case"textarea":li(s,l);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var z=l.value;z!=null?$e(s,!!l.multiple,z,!1):T!==!!l.multiple&&(l.defaultValue!=null?$e(s,!!l.multiple,l.defaultValue,!0):$e(s,!!l.multiple,l.multiple?[]:"",!1))}s[Mn]=l}catch(W){Le(e,e.return,W)}}break;case 6:if(Rt(t,e),$t(e),n&4){if(e.stateNode===null)throw Error(i(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(W){Le(e,e.return,W)}}break;case 3:if(Rt(t,e),$t(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sn(t.containerInfo)}catch(W){Le(e,e.return,W)}break;case 4:Rt(t,e),$t(e);break;case 13:Rt(t,e),$t(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(Oa=Oe())),n&4&&Ru(e);break;case 22:if(P=r!==null&&r.memoizedState!==null,e.mode&1?(tt=(N=tt)||P,Rt(t,e),tt=N):Rt(t,e),$t(e),n&8192){if(N=e.memoizedState!==null,(e.stateNode.isHidden=N)&&!P&&(e.mode&1)!==0)for(B=e,P=e.child;P!==null;){for(L=B=P;B!==null;){switch(T=B,z=T.child,T.tag){case 0:case 11:case 14:case 15:Bn(4,T,T.return);break;case 1:qr(T,T.return);var H=T.stateNode;if(typeof H.componentWillUnmount=="function"){n=T,r=T.return;try{t=n,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(W){Le(n,r,W)}}break;case 5:qr(T,T.return);break;case 22:if(T.memoizedState!==null){Pu(L);continue}}z!==null?(z.return=T,B=z):Pu(L)}P=P.sibling}e:for(P=null,L=e;;){if(L.tag===5){if(P===null){P=L;try{s=L.stateNode,N?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=L.stateNode,g=L.memoizedProps.style,u=g!=null&&g.hasOwnProperty("display")?g.display:null,p.style.display=ui("display",u))}catch(W){Le(e,e.return,W)}}}else if(L.tag===6){if(P===null)try{L.stateNode.nodeValue=N?"":L.memoizedProps}catch(W){Le(e,e.return,W)}}else if((L.tag!==22&&L.tag!==23||L.memoizedState===null||L===e)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===e)break e;for(;L.sibling===null;){if(L.return===null||L.return===e)break e;P===L&&(P=null),L=L.return}P===L&&(P=null),L.sibling.return=L.return,L=L.sibling}}break;case 19:Rt(t,e),$t(e),n&4&&Ru(e);break;case 21:break;default:Rt(t,e),$t(e)}}function $t(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Nu(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(un(s,""),n.flags&=-33);var l=_u(e);La(e,l,s);break;case 3:case 4:var u=n.stateNode.containerInfo,p=_u(e);Pa(e,p,u);break;default:throw Error(i(161))}}catch(g){Le(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hd(e,t,r){B=e,Tu(e)}function Tu(e,t,r){for(var n=(e.mode&1)!==0;B!==null;){var s=B,l=s.child;if(s.tag===22&&n){var u=s.memoizedState!==null||Us;if(!u){var p=s.alternate,g=p!==null&&p.memoizedState!==null||tt;p=Us;var N=tt;if(Us=u,(tt=g)&&!N)for(B=s;B!==null;)u=B,g=u.child,u.tag===22&&u.memoizedState!==null?Lu(s):g!==null?(g.return=u,B=g):Lu(s);for(;l!==null;)B=l,Tu(l),l=l.sibling;B=s,Us=p,tt=N}Mu(e)}else(s.subtreeFlags&8772)!==0&&l!==null?(l.return=s,B=l):Mu(e)}}function Mu(e){for(;B!==null;){var t=B;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:tt||Bs(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!tt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:_t(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Po(t,l,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Po(t,u,r)}break;case 5:var p=t.stateNode;if(r===null&&t.flags&4){r=p;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&r.focus();break;case"img":g.src&&(r.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var N=t.alternate;if(N!==null){var P=N.memoizedState;if(P!==null){var L=P.dehydrated;L!==null&&Sn(L)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}tt||t.flags&512&&Ma(t)}catch(T){Le(t,t.return,T)}}if(t===e){B=null;break}if(r=t.sibling,r!==null){r.return=t.return,B=r;break}B=t.return}}function Pu(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var r=t.sibling;if(r!==null){r.return=t.return,B=r;break}B=t.return}}function Lu(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Bs(4,t)}catch(g){Le(t,r,g)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(g){Le(t,s,g)}}var l=t.return;try{Ma(t)}catch(g){Le(t,l,g)}break;case 5:var u=t.return;try{Ma(t)}catch(g){Le(t,u,g)}}}catch(g){Le(t,t.return,g)}if(t===e){B=null;break}var p=t.sibling;if(p!==null){p.return=t.return,B=p;break}B=t.return}}var Yd=Math.ceil,Ks=U.ReactCurrentDispatcher,Ia=U.ReactCurrentOwner,kt=U.ReactCurrentBatchConfig,ge=0,Ye=null,Fe=null,Xe=0,gt=0,Xr=Jt(0),Ke=0,Kn=null,Sr=0,Hs=0,$a=0,Hn=null,ut=null,Oa=0,Jr=1/0,Ht=null,Ys=!1,Da=null,sr=null,Ws=!1,lr=null,Vs=0,Yn=0,Aa=null,Gs=-1,Qs=0;function st(){return(ge&6)!==0?Oe():Gs!==-1?Gs:Gs=Oe()}function ar(e){return(e.mode&1)===0?1:(ge&2)!==0&&Xe!==0?Xe&-Xe:Rd.transition!==null?(Qs===0&&(Qs=Ni()),Qs):(e=we,e!==0||(e=window.event,e=e===void 0?16:Ii(e.type)),e)}function jt(e,t,r,n){if(50<Yn)throw Yn=0,Aa=null,Error(i(185));hn(e,r,n),((ge&2)===0||e!==Ye)&&(e===Ye&&((ge&2)===0&&(Hs|=r),Ke===4&&ir(e,Xe)),ct(e,n),r===1&&ge===0&&(t.mode&1)===0&&(Jr=Oe()+500,Es&&er()))}function ct(e,t){var r=e.callbackNode;Rc(e,t);var n=ss(e,e===Ye?Xe:0);if(n===0)r!==null&&wi(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&wi(r),t===1)e.tag===0?Cd($u.bind(null,e)):So($u.bind(null,e)),Ed(function(){(ge&6)===0&&er()}),r=null;else{switch(_i(n)){case 1:r=yl;break;case 4:r=Ei;break;case 16:r=es;break;case 536870912:r=bi;break;default:r=es}r=Ku(r,Iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Iu(e,t){if(Gs=-1,Qs=0,(ge&6)!==0)throw Error(i(327));var r=e.callbackNode;if(Zr()&&e.callbackNode!==r)return null;var n=ss(e,e===Ye?Xe:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=qs(e,n);else{t=n;var s=ge;ge|=2;var l=Du();(Ye!==e||Xe!==t)&&(Ht=null,Jr=Oe()+500,wr(e,t));do try{Gd();break}catch(p){Ou(e,p)}while(!0);ra(),Ks.current=l,ge=s,Fe!==null?t=0:(Ye=null,Xe=0,t=Ke)}if(t!==0){if(t===2&&(s=vl(e),s!==0&&(n=s,t=Fa(e,s))),t===1)throw r=Kn,wr(e,0),ir(e,n),ct(e,Oe()),r;if(t===6)ir(e,n);else{if(s=e.current.alternate,(n&30)===0&&!Wd(s)&&(t=qs(e,n),t===2&&(l=vl(e),l!==0&&(n=l,t=Fa(e,l))),t===1))throw r=Kn,wr(e,0),ir(e,n),ct(e,Oe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:Er(e,ut,Ht);break;case 3:if(ir(e,n),(n&130023424)===n&&(t=Oa+500-Oe(),10<t)){if(ss(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){st(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yl(Er.bind(null,e,ut,Ht),t);break}Er(e,ut,Ht);break;case 4:if(ir(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var u=31-Et(n);l=1<<u,u=t[u],u>s&&(s=u),n&=~l}if(n=s,n=Oe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Yd(n/1960))-n,10<n){e.timeoutHandle=Yl(Er.bind(null,e,ut,Ht),n);break}Er(e,ut,Ht);break;case 5:Er(e,ut,Ht);break;default:throw Error(i(329))}}}return ct(e,Oe()),e.callbackNode===r?Iu.bind(null,e):null}function Fa(e,t){var r=Hn;return e.current.memoizedState.isDehydrated&&(wr(e,t).flags|=256),e=qs(e,t),e!==2&&(t=ut,ut=r,t!==null&&za(t)),e}function za(e){ut===null?ut=e:ut.push.apply(ut,e)}function Wd(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],l=s.getSnapshot;s=s.value;try{if(!bt(l(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ir(e,t){for(t&=~$a,t&=~Hs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Et(t),n=1<<r;e[r]=-1,t&=~n}}function $u(e){if((ge&6)!==0)throw Error(i(327));Zr();var t=ss(e,0);if((t&1)===0)return ct(e,Oe()),null;var r=qs(e,t);if(e.tag!==0&&r===2){var n=vl(e);n!==0&&(t=n,r=Fa(e,n))}if(r===1)throw r=Kn,wr(e,0),ir(e,t),ct(e,Oe()),r;if(r===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Er(e,ut,Ht),ct(e,Oe()),null}function Ua(e,t){var r=ge;ge|=1;try{return e(t)}finally{ge=r,ge===0&&(Jr=Oe()+500,Es&&er())}}function kr(e){lr!==null&&lr.tag===0&&(ge&6)===0&&Zr();var t=ge;ge|=1;var r=kt.transition,n=we;try{if(kt.transition=null,we=1,e)return e()}finally{we=n,kt.transition=r,ge=t,(ge&6)===0&&er()}}function Ba(){gt=Xr.current,Ce(Xr)}function wr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,wd(r)),Fe!==null)for(r=Fe.return;r!==null;){var n=r;switch(Xl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ks();break;case 3:Gr(),Ce(at),Ce(Je),ca();break;case 5:oa(n);break;case 4:Gr();break;case 13:Ce(Me);break;case 19:Ce(Me);break;case 10:na(n.type._context);break;case 22:case 23:Ba()}r=r.return}if(Ye=e,Fe=e=or(e.current,null),Xe=gt=t,Ke=0,Kn=null,$a=Hs=Sr=0,ut=Hn=null,yr!==null){for(t=0;t<yr.length;t++)if(r=yr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,l=r.pending;if(l!==null){var u=l.next;l.next=s,n.next=u}r.pending=n}yr=null}return e}function Ou(e,t){do{var r=Fe;try{if(ra(),Ls.current=Ds,Is){for(var n=Pe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Is=!1}if(xr=0,He=Be=Pe=null,Dn=!1,An=0,Ia.current=null,r===null||r.return===null){Ke=1,Kn=t,Fe=null;break}e:{var l=e,u=r.return,p=r,g=t;if(t=Xe,p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var N=g,P=p,L=P.tag;if((P.mode&1)===0&&(L===0||L===11||L===15)){var T=P.alternate;T?(P.updateQueue=T.updateQueue,P.memoizedState=T.memoizedState,P.lanes=T.lanes):(P.updateQueue=null,P.memoizedState=null)}var z=iu(u);if(z!==null){z.flags&=-257,ou(z,u,p,l,t),z.mode&1&&au(l,N,t),t=z,g=N;var H=t.updateQueue;if(H===null){var W=new Set;W.add(g),t.updateQueue=W}else H.add(g);break e}else{if((t&1)===0){au(l,N,t),Ka();break e}g=Error(i(426))}}else if(Te&&p.mode&1){var De=iu(u);if(De!==null){(De.flags&65536)===0&&(De.flags|=256),ou(De,u,p,l,t),ea(Qr(g,p));break e}}l=g=Qr(g,p),Ke!==4&&(Ke=2),Hn===null?Hn=[l]:Hn.push(l),l=u;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var k=su(l,g,t);Mo(l,k);break e;case 1:p=g;var y=l.type,E=l.stateNode;if((l.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(sr===null||!sr.has(E)))){l.flags|=65536,t&=-t,l.lanes|=t;var $=lu(l,p,t);Mo(l,$);break e}}l=l.return}while(l!==null)}Fu(r)}catch(G){t=G,Fe===r&&r!==null&&(Fe=r=r.return);continue}break}while(!0)}function Du(){var e=Ks.current;return Ks.current=Ds,e===null?Ds:e}function Ka(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Ye===null||(Sr&268435455)===0&&(Hs&268435455)===0||ir(Ye,Xe)}function qs(e,t){var r=ge;ge|=2;var n=Du();(Ye!==e||Xe!==t)&&(Ht=null,wr(e,t));do try{Vd();break}catch(s){Ou(e,s)}while(!0);if(ra(),ge=r,Ks.current=n,Fe!==null)throw Error(i(261));return Ye=null,Xe=0,Ke}function Vd(){for(;Fe!==null;)Au(Fe)}function Gd(){for(;Fe!==null&&!xc();)Au(Fe)}function Au(e){var t=Bu(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?Fu(e):Fe=t,Ia.current=null}function Fu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=zd(r,t,gt),r!==null){Fe=r;return}}else{if(r=Ud(r,t),r!==null){r.flags&=32767,Fe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Fe=null;return}}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);Ke===0&&(Ke=5)}function Er(e,t,r){var n=we,s=kt.transition;try{kt.transition=null,we=1,Qd(e,t,r,n)}finally{kt.transition=s,we=n}return null}function Qd(e,t,r,n){do Zr();while(lr!==null);if((ge&6)!==0)throw Error(i(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(jc(e,l),e===Ye&&(Fe=Ye=null,Xe=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||Ws||(Ws=!0,Ku(es,function(){return Zr(),null})),l=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||l){l=kt.transition,kt.transition=null;var u=we;we=1;var p=ge;ge|=4,Ia.current=null,Kd(e,r),ju(r,e),hd(Kl),is=!!Bl,Kl=Bl=null,e.current=r,Hd(r),Sc(),ge=p,we=u,kt.transition=l}else e.current=r;if(Ws&&(Ws=!1,lr=e,Vs=s),l=e.pendingLanes,l===0&&(sr=null),Ec(r.stateNode),ct(e,Oe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ys)throw Ys=!1,e=Da,Da=null,e;return(Vs&1)!==0&&e.tag!==0&&Zr(),l=e.pendingLanes,(l&1)!==0?e===Aa?Yn++:(Yn=0,Aa=e):Yn=0,er(),null}function Zr(){if(lr!==null){var e=_i(Vs),t=kt.transition,r=we;try{if(kt.transition=null,we=16>e?16:e,lr===null)var n=!1;else{if(e=lr,lr=null,Vs=0,(ge&6)!==0)throw Error(i(331));var s=ge;for(ge|=4,B=e.current;B!==null;){var l=B,u=l.child;if((B.flags&16)!==0){var p=l.deletions;if(p!==null){for(var g=0;g<p.length;g++){var N=p[g];for(B=N;B!==null;){var P=B;switch(P.tag){case 0:case 11:case 15:Bn(8,P,l)}var L=P.child;if(L!==null)L.return=P,B=L;else for(;B!==null;){P=B;var T=P.sibling,z=P.return;if(bu(P),P===N){B=null;break}if(T!==null){T.return=z,B=T;break}B=z}}}var H=l.alternate;if(H!==null){var W=H.child;if(W!==null){H.child=null;do{var De=W.sibling;W.sibling=null,W=De}while(W!==null)}}B=l}}if((l.subtreeFlags&2064)!==0&&u!==null)u.return=l,B=u;else e:for(;B!==null;){if(l=B,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:Bn(9,l,l.return)}var k=l.sibling;if(k!==null){k.return=l.return,B=k;break e}B=l.return}}var y=e.current;for(B=y;B!==null;){u=B;var E=u.child;if((u.subtreeFlags&2064)!==0&&E!==null)E.return=u,B=E;else e:for(u=y;B!==null;){if(p=B,(p.flags&2048)!==0)try{switch(p.tag){case 0:case 11:case 15:Bs(9,p)}}catch(G){Le(p,p.return,G)}if(p===u){B=null;break e}var $=p.sibling;if($!==null){$.return=p.return,B=$;break e}B=p.return}}if(ge=s,er(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(ts,e)}catch{}n=!0}return n}finally{we=r,kt.transition=t}}return!1}function zu(e,t,r){t=Qr(r,t),t=su(e,t,1),e=rr(e,t,1),t=st(),e!==null&&(hn(e,1,t),ct(e,t))}function Le(e,t,r){if(e.tag===3)zu(e,e,r);else for(;t!==null;){if(t.tag===3){zu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(sr===null||!sr.has(n))){e=Qr(r,e),e=lu(t,e,1),t=rr(t,e,1),e=st(),t!==null&&(hn(t,1,e),ct(t,e));break}}t=t.return}}function qd(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&r,Ye===e&&(Xe&r)===r&&(Ke===4||Ke===3&&(Xe&130023424)===Xe&&500>Oe()-Oa?wr(e,0):$a|=r),ct(e,t)}function Uu(e,t){t===0&&((e.mode&1)===0?t=1:(t=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var r=st();e=Ut(e,t),e!==null&&(hn(e,t,r),ct(e,r))}function Xd(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Uu(e,r)}function Jd(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}n!==null&&n.delete(t),Uu(e,r)}var Bu;Bu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||at.current)ot=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return ot=!1,Fd(e,t,r);ot=(e.flags&131072)!==0}else ot=!1,Te&&(t.flags&1048576)!==0&&ko(t,Ns,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;zs(e,t),e=t.pendingProps;var s=Ur(t,Je.current);Vr(t,r),s=pa(null,t,n,e,s,r);var l=ma();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(n)?(l=!0,ws(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,aa(t),s.updater=As,t.stateNode=s,s._reactInternals=t,Sa(t,n,e,r),t=ba(null,t,n,!0,l,r)):(t.tag=0,Te&&l&&ql(t),nt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=ef(n),e=_t(n,e),s){case 0:t=Ea(null,t,n,e,r);break e;case 1:t=mu(null,t,n,e,r);break e;case 11:t=uu(null,t,n,e,r);break e;case 14:t=cu(null,t,n,_t(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),Ea(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),mu(e,t,n,s,r);case 3:e:{if(hu(t),e===null)throw Error(i(387));n=t.pendingProps,l=t.memoizedState,s=l.element,To(e,t),Ms(t,n,null,r);var u=t.memoizedState;if(n=u.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=Qr(Error(i(423)),t),t=gu(e,t,n,r,s);break e}else if(n!==s){s=Qr(Error(i(424)),t),t=gu(e,t,n,r,s);break e}else for(ht=Xt(t.stateNode.containerInfo.firstChild),mt=t,Te=!0,Nt=null,r=Ro(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hr(),n===s){t=Kt(e,t,r);break e}nt(e,t,n,r)}t=t.child}return t;case 5:return Lo(t),e===null&&Zl(t),n=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,u=s.children,Hl(n,s)?u=null:l!==null&&Hl(n,l)&&(t.flags|=32),pu(e,t),nt(e,t,u,r),t.child;case 6:return e===null&&Zl(t),null;case 13:return yu(e,t,r);case 4:return ia(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Yr(t,null,n,r):nt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),uu(e,t,n,s,r);case 7:return nt(e,t,t.pendingProps,r),t.child;case 8:return nt(e,t,t.pendingProps.children,r),t.child;case 12:return nt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,l=t.memoizedProps,u=s.value,be(Rs,n._currentValue),n._currentValue=u,l!==null)if(bt(l.value,u)){if(l.children===s.children&&!at.current){t=Kt(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var p=l.dependencies;if(p!==null){u=l.child;for(var g=p.firstContext;g!==null;){if(g.context===n){if(l.tag===1){g=Bt(-1,r&-r),g.tag=2;var N=l.updateQueue;if(N!==null){N=N.shared;var P=N.pending;P===null?g.next=g:(g.next=P.next,P.next=g),N.pending=g}}l.lanes|=r,g=l.alternate,g!==null&&(g.lanes|=r),sa(l.return,r,t),p.lanes|=r;break}g=g.next}}else if(l.tag===10)u=l.type===t.type?null:l.child;else if(l.tag===18){if(u=l.return,u===null)throw Error(i(341));u.lanes|=r,p=u.alternate,p!==null&&(p.lanes|=r),sa(u,r,t),u=l.sibling}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===t){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}nt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Vr(t,r),s=xt(s),n=n(s),t.flags|=1,nt(e,t,n,r),t.child;case 14:return n=t.type,s=_t(n,t.pendingProps),s=_t(n.type,s),cu(e,t,n,s,r);case 15:return du(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:_t(n,s),zs(e,t),t.tag=1,it(n)?(e=!0,ws(t)):e=!1,Vr(t,r),ru(t,n,s),Sa(t,n,s,r),ba(null,t,n,!0,e,r);case 19:return xu(e,t,r);case 22:return fu(e,t,r)}throw Error(i(156,t.tag))};function Ku(e,t){return ki(e,t)}function Zd(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,r,n){return new Zd(e,t,r,n)}function Ha(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ef(e){if(typeof e=="function")return Ha(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ae)return 11;if(e===le)return 14}return 2}function or(e,t){var r=e.alternate;return r===null?(r=wt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xs(e,t,r,n,s,l){var u=2;if(n=e,typeof e=="function")Ha(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case xe:return br(r.children,s,l,t);case je:u=8,s|=8;break;case ze:return e=wt(12,r,t,s|2),e.elementType=ze,e.lanes=l,e;case Qe:return e=wt(13,r,t,s),e.elementType=Qe,e.lanes=l,e;case M:return e=wt(19,r,t,s),e.elementType=M,e.lanes=l,e;case ie:return Js(r,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ft:u=10;break e;case me:u=9;break e;case Ae:u=11;break e;case le:u=14;break e;case fe:u=16,n=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=wt(u,r,t,s),t.elementType=e,t.type=n,t.lanes=l,t}function br(e,t,r,n){return e=wt(7,e,n,t),e.lanes=r,e}function Js(e,t,r,n){return e=wt(22,e,n,t),e.elementType=ie,e.lanes=r,e.stateNode={isHidden:!1},e}function Ya(e,t,r){return e=wt(6,e,null,t),e.lanes=r,e}function Wa(e,t,r){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tf(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xl(0),this.expirationTimes=xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Va(e,t,r,n,s,l,u,p,g){return e=new tf(e,t,r,p,g),t===1?(t=1,l===!0&&(t|=8)):t=0,l=wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},aa(l),e}function rf(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Hu(e){if(!e)return Zt;e=e._reactInternals;e:{if(fr(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var r=e.type;if(it(r))return vo(e,r,t)}return t}function Yu(e,t,r,n,s,l,u,p,g){return e=Va(r,n,!0,e,s,l,u,p,g),e.context=Hu(null),r=e.current,n=st(),s=ar(r),l=Bt(n,s),l.callback=t??null,rr(r,l,s),e.current.lanes=s,hn(e,s,n),ct(e,n),e}function Zs(e,t,r,n){var s=t.current,l=st(),u=ar(s);return r=Hu(r),t.context===null?t.context=r:t.pendingContext=r,t=Bt(l,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=rr(s,t,u),e!==null&&(jt(e,s,u,l),Ts(e,s,u)),u}function el(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Wu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ga(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}function nf(){return null}var Vu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qa(e){this._internalRoot=e}tl.prototype.render=Qa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));Zs(e,t,null,null)},tl.prototype.unmount=Qa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kr(function(){Zs(null,e,null,null)}),t[Dt]=null}};function tl(e){this._internalRoot=e}tl.prototype.unstable_scheduleHydration=function(e){if(e){var t=ji();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gt.length&&t!==0&&t<Gt[r].priority;r++);Gt.splice(r,0,e),r===0&&Pi(e)}};function qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gu(){}function sf(e,t,r,n,s){if(s){if(typeof n=="function"){var l=n;n=function(){var N=el(u);l.call(N)}}var u=Yu(t,n,e,0,null,!1,!1,"",Gu);return e._reactRootContainer=u,e[Dt]=u.current,jn(e.nodeType===8?e.parentNode:e),kr(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var p=n;n=function(){var N=el(g);p.call(N)}}var g=Va(e,0,!1,null,null,!1,!1,"",Gu);return e._reactRootContainer=g,e[Dt]=g.current,jn(e.nodeType===8?e.parentNode:e),kr(function(){Zs(t,g,r,n)}),g}function nl(e,t,r,n,s){var l=r._reactRootContainer;if(l){var u=l;if(typeof s=="function"){var p=s;s=function(){var g=el(u);p.call(g)}}Zs(t,u,e,s)}else u=sf(r,t,e,s,n);return el(u)}Ci=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=mn(t.pendingLanes);r!==0&&(Sl(t,r|1),ct(t,Oe()),(ge&6)===0&&(Jr=Oe()+500,er()))}break;case 13:kr(function(){var n=Ut(e,1);if(n!==null){var s=st();jt(n,e,1,s)}}),Ga(e,1)}},kl=function(e){if(e.tag===13){var t=Ut(e,134217728);if(t!==null){var r=st();jt(t,e,134217728,r)}Ga(e,134217728)}},Ri=function(e){if(e.tag===13){var t=ar(e),r=Ut(e,t);if(r!==null){var n=st();jt(r,e,t,n)}Ga(e,t)}},ji=function(){return we},Ti=function(e,t){var r=we;try{return we=e,t()}finally{we=r}},pl=function(e,t,r){switch(t){case"input":if(ue(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ss(n);if(!s)throw Error(i(90));an(n),ue(n,s)}}}break;case"textarea":li(e,r);break;case"select":t=r.value,t!=null&&$e(e,!!r.multiple,t,!1)}},mi=Ua,hi=kr;var lf={usingClientEntryPoint:!1,Events:[Pn,Fr,Ss,fi,pi,Ua]},Wn={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},af={bundleType:Wn.bundleType,version:Wn.version,rendererPackageName:Wn.rendererPackageName,rendererConfig:Wn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:U.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xi(e),e===null?null:e.stateNode},findFiberByHostInstance:Wn.findFiberByHostInstance||nf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{ts=sl.inject(af),Mt=sl}catch{}}return dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lf,dt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qa(t))throw Error(i(200));return rf(e,t,null,r)},dt.createRoot=function(e,t){if(!qa(e))throw Error(i(299));var r=!1,n="",s=Vu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Va(e,1,!1,null,null,r,!1,n,s),e[Dt]=t.current,jn(e.nodeType===8?e.parentNode:e),new Qa(t)},dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=xi(t),e=e===null?null:e.stateNode,e},dt.flushSync=function(e){return kr(e)},dt.hydrate=function(e,t,r){if(!rl(t))throw Error(i(200));return nl(null,e,t,!0,r)},dt.hydrateRoot=function(e,t,r){if(!qa(e))throw Error(i(405));var n=r!=null&&r.hydratedSources||null,s=!1,l="",u=Vu;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=Yu(t,null,e,1,r??null,s,!1,l,u),e[Dt]=t.current,jn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new tl(t)},dt.render=function(e,t,r){if(!rl(t))throw Error(i(200));return nl(null,e,t,!1,r)},dt.unmountComponentAtNode=function(e){if(!rl(e))throw Error(i(40));return e._reactRootContainer?(kr(function(){nl(null,null,e,!1,function(){e._reactRootContainer=null,e[Dt]=null})}),!0):!1},dt.unstable_batchedUpdates=Ua,dt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!rl(r))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return nl(e,t,r,!1,n)},dt.version="18.3.1-next-f1338f8080-20240426",dt}var rc;function gf(){if(rc)return Za.exports;rc=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(a){console.error(a)}}return c(),Za.exports=hf(),Za.exports}var nc;function yf(){if(nc)return ll;nc=1;var c=gf();return ll.createRoot=c.createRoot,ll.hydrateRoot=c.hydrateRoot,ll}var vf=yf();const xf=uc(vf),_={logs:[],_subscribers:new Set,subscribe(c){return this._subscribers.add(c),c([...this.logs]),()=>this._subscribers.delete(c)},_notify(){const c=[...this.logs];for(const a of this._subscribers)a(c)},log(c,a="SYSTEM"){const i=new Date().toLocaleTimeString(),d={id:Date.now()+Math.random(),timestamp:i,source:a,message:c};this.logs.push(d),console.log(`[${a}] ${c}`),this._notify()},initGlobalErrorHandling(){this.log("Initializing global error handlers.","LOGGER"),window.onerror=(c,a,i,d,f)=>(this.log(`[UNCAUGHT ERROR] ${c} at ${a}:${i}:${d}`,"ERROR"),!0),window.onunhandledrejection=c=>{this.log(`[UNHANDLED PROMISE] ${c.reason}`,"ERROR")}}},Sf={SYSTEM:"text-common",STATE:"text-epic",UI:"text-mana-light",INPUT:"text-rare",COMBAT:"text-health-mid",LOGGER:"text-legendary",ERROR:"text-health-full font-bold"};function Ot(){const[c,a]=Z.useState([]),[i,d]=Z.useState(!1);return Z.useEffect(()=>_.subscribe(h=>{a(h)}),[]),i?o.jsxs("div",{className:"fixed bottom-0 left-0 right-0 h-1/3 bg-rpg-bg-darkest/80 backdrop-blur-sm border-t-2 border-rpg-primary z-[9999] flex flex-col text-sm font-mono",children:[o.jsxs("div",{className:"flex justify-between items-center bg-rpg-bg-darker p-2 border-b border-rpg-secondary",children:[o.jsx("h3",{className:"font-bold text-rpg-primary",children:"Persistent Debugger"}),o.jsx("button",{onClick:()=>d(!1),className:"bg-health-full hover:bg-health-mid text-rpg-text px-2 py-1 rounded",children:"Hide"})]}),o.jsx("ul",{className:"flex-grow overflow-y-auto p-2",children:c.map(f=>o.jsxs("li",{className:"border-b border-rpg-secondary py-1",children:[o.jsx("span",{className:"text-rpg-text opacity-60",children:f.timestamp}),o.jsxs("span",{className:`ml-2 font-semibold ${Sf[f.source]||"text-rpg-text"}`,children:["[",f.source,"]"]}),o.jsx("span",{className:"ml-2 text-rpg-text opacity-90",children:f.message})]},f.id))})]}):o.jsx("button",{onClick:()=>d(!0),className:"fixed top-4 right-4 bg-rpg-bg-darker hover:bg-rpg-secondary text-rpg-text w-8 h-8 rounded-full shadow-lg z-[9999] flex items-center justify-center text-lg",title:"Show Debugger",children:""})}const ln={WARRIOR:{id:"warrior",nameKey:"characters.warrior.name",resourceKey:"resources.vigor",resourceIcon:"",roleKey:"characters.warrior.role",descriptionKey:"characters.warrior.description",traits:["characters.warrior.traits.highDefense","characters.warrior.traits.resolute","characters.warrior.traits.areaStrikes"],baseStats:{hp:115,resource:55,atk:13,def:11,spd:6,crit:12},growthRates:{hp:6,atk:1.2,def:1.8,spd:.4,crit:.2},abilities:["power_strike","defensive_stance","shield_bash","battle_cry","whirlwind_attack","iron_will","execute","last_stand"],progressionPath:"defensive_tank",preferredEnemyTypes:["brute","physical"],bossScalingModifier:1,uniqueRewards:["heavy_armor","shields"]},SORCERESS:{id:"sorceress",nameKey:"characters.sorceress.name",resourceKey:"resources.mana",resourceIcon:"",roleKey:"characters.sorceress.role",descriptionKey:"characters.sorceress.description",traits:["characters.sorceress.traits.elementalMagic","characters.sorceress.traits.spellMastery","characters.sorceress.traits.ancientKnowledge"],baseStats:{hp:95,resource:80,atk:15,def:7,spd:7,crit:14},growthRates:{hp:4,atk:1.4,def:.6,spd:.6,crit:.4},abilities:["magic_missile","mana_shield","fireball","ice_shard","lightning_bolt","arcane_intellect","meteor","time_warp"],progressionPath:"elemental_mage",preferredEnemyTypes:["magical","undead"],bossScalingModifier:1,uniqueRewards:["staves","mana_crystals"]},ROGUE:{id:"rogue",nameKey:"characters.rogue.name",resourceKey:"resources.energy",resourceIcon:"",roleKey:"characters.rogue.role",descriptionKey:"characters.rogue.description",traits:["characters.rogue.traits.berserkerRage","characters.rogue.traits.rawStrength","characters.rogue.traits.intimidating"],baseStats:{hp:90,resource:60,atk:13,def:7,spd:9,crit:14},growthRates:{hp:5,atk:1.5,def:.9,spd:.8,crit:.6},abilities:["quick_strike","evasion","venom_strike","shadow_step","fan_of_knives","deadly_precision","backstab","death_mark"],progressionPath:"assassin_berserker",preferredEnemyTypes:["fast","elite"],bossScalingModifier:1,uniqueRewards:["daggers","poisons"]}},te={DEBUG_MODE:!1,GAME_VERSION:"V.40.1",LOADING_DURATION_MS:1e3,SCREENS:{intro:{html:"screens/intro.html",js:"js/screens/intro.js"},"character-select":{html:"screens/character-select.html",js:"js/screens/character-select.js"},battle:{html:"screens/battle.html",js:"js/screens/battle.js"}},DEFAULT_LANGUAGE:"en",AUTOSAVE_FLOORS:[1,5,10],INVENTORY:{startingGold:100,maxSlots:20,startingPotions:[{type:"hp_potion",quantity:3},{type:"resource_potion",quantity:2}]},XP_CURVE:{baseXP:70,increment:50,maxLevel:60},RARITIES:{common:{name:{en:"Common",ar:""},chance:60,statMult:1,color:"#95a5a6"},uncommon:{name:{en:"Uncommon",ar:" "},chance:25,statMult:1.2,color:"#27ae60"},rare:{name:{en:"Rare",ar:""},chance:10,statMult:1.5,color:"#3498db"},epic:{name:{en:"Epic",ar:""},chance:4,statMult:1.9,color:"#9b59b6"},mythic:{name:{en:"Mythic",ar:""},chance:.8,statMult:2.4,color:"#e67e22"},legendary:{name:{en:"Legendary",ar:""},chance:.2,statMult:3,color:"#f1c40f"}},EQUIPMENT_SLOTS:{weapon:{name:{en:"Weapon",ar:""},icon:""},head:{name:{en:"Head",ar:""},icon:""},chest:{name:{en:"Chest",ar:""},icon:""}},ITEM_TYPES:{sword:{name:{en:"Sword",ar:""},slot:"weapon",icon:"",baseStats:{atk:5}},staff:{name:{en:"Staff",ar:""},slot:"weapon",icon:"",baseStats:{atk:7}},hp_potion:{name:{en:"Health Potion",ar:" "},slot:null,icon:"",consumable:!0,effect:"heal_hp",value:50,description:{en:"Restores 50 HP instantly.",ar:" 50   ."}},resource_potion:{name:{en:"Resource Potion",ar:" "},slot:null,icon:"",consumable:!0,effect:"restore_resource",value:40,description:{en:"Restores 40 resource points.",ar:" 40  ."}},greater_hp_potion:{name:{en:"Greater Health Potion",ar:"  "},slot:null,icon:"",consumable:!0,effect:"heal_hp",value:80,description:{en:"Restores 80 HP instantly.",ar:" 80   ."}},elixir_of_vitality:{name:{en:"Elixir of Vitality",ar:" "},slot:null,icon:"",consumable:!0,effect:"full_heal",value:100,description:{en:"Fully restores HP and resource.",ar:"   ."}}},ITEM_PREFIXES:[{name:{en:"Sturdy",ar:""},statMod:{def:2}},{name:{en:"Sharp",ar:""},statMod:{atk:2}}],ITEM_SUFFIXES:[{name:{en:"of Speed",ar:""},statMod:{spd:1}},{name:{en:"of Power",ar:""},statMod:{atk:1,def:1}}],COMBAT:{baseCritMultiplier:1.6,fleeChance:.6,resourceRegeneration:{baseAmount:0,levelScaling:0}},ABILITIES:{power_strike:{name:{en:"Power Strike",ar:" "},description:{en:"Deal 150% weapon damage to single target.",ar:" 150%     ."},cost:8,target:"single",type:"attack",damageMultiplier:1.5,unlockLevel:1},defensive_stance:{name:{en:"Defensive Stance",ar:" "},description:{en:"+50% DEF and regenerate 5 HP per turn for 2 turns.",ar:"+50%   5      ."},cost:10,target:"self",type:"buff",effect:{type:"def_buff",stat:"def",multiplier:1.5,duration:2,regen:5,icon:""},cooldown:3,unlockLevel:1},shield_bash:{name:{en:"Shield Bash",ar:" "},description:{en:"Deal 90% damage and reduce enemy ATK by 30% for 2 turns.",ar:" 90%      30%  ."},cost:12,target:"single",type:"attack_debuff",damageMultiplier:.9,effect:{type:"weaken",stat:"atk",amount:.7,duration:2,icon:""},unlockLevel:3},battle_cry:{name:{en:"Battle Cry",ar:" "},description:{en:"+25% ATK and +2 SPD for 3 turns.",ar:"+25%   +2   3 ."},cost:15,target:"self",type:"buff",effect:{type:"atk_buff",stat:"atk",multiplier:1.25,spdBonus:2,duration:3,icon:""},cooldown:4,unlockLevel:6},whirlwind_attack:{name:{en:"Whirlwind Attack",ar:" "},description:{en:"Deal 70% damage to ALL enemies.",ar:" 70%   ."},cost:20,target:"all",type:"attack_aoe",damageMultiplier:.7,unlockLevel:9},iron_will:{name:{en:"Iron Will",ar:" "},description:{en:"Heal 30 HP and gain 20% damage resistance for 2 turns.",ar:" 30     20%    ."},cost:25,target:"self",type:"heal_buff",healAmount:30,effect:{type:"resistance",amount:.8,duration:2,icon:""},cooldown:5,unlockLevel:12},execute:{name:{en:"Execute",ar:""},description:{en:"Deal 200% damage, +100% bonus if enemy HP < 30%.",ar:" 200%  +100%      < 30%."},cost:18,target:"single",type:"attack",damageMultiplier:2,effect:{type:"execute",threshold:.3,bonusMultiplier:1},cooldown:2,unlockLevel:15},last_stand:{name:{en:"Last Stand",ar:" "},description:{en:"Deal 250% damage to all enemies and heal 20% of damage dealt.",ar:" 250%     20%   ."},cost:40,target:"all",type:"attack_aoe",damageMultiplier:2.5,effect:{type:"vampiric",percentage:20},cooldown:6,unlockLevel:18},magic_missile:{name:{en:"Magic Missile",ar:" "},description:{en:"Deal 140% magic damage to single target, never misses.",ar:" 140%       ."},cost:8,target:"single",type:"attack",damageMultiplier:1.4,neverMiss:!0,unlockLevel:1},mana_shield:{name:{en:"Mana Shield",ar:" "},description:{en:"Absorb next 40 damage taken (lasts 3 turns).",ar:"   40 ( 3 )."},cost:12,target:"self",type:"buff",effect:{type:"shield",amount:40,duration:3,icon:""},cooldown:4,unlockLevel:1},fireball:{name:{en:"Fireball",ar:" "},description:{en:"Deal 80% fire damage to ALL enemies.",ar:" 80%    ."},cost:20,target:"all",type:"attack_aoe",damageMultiplier:.8,unlockLevel:3},ice_shard:{name:{en:"Ice Shard",ar:" "},description:{en:"Deal 120% damage and slow enemy (-30% SPD) for 2 turns.",ar:" 120%    (-30% )  ."},cost:15,target:"single",type:"attack_debuff",damageMultiplier:1.2,effect:{type:"slow",stat:"spd",amount:.7,duration:2,icon:""},unlockLevel:6},lightning_bolt:{name:{en:"Lightning Bolt",ar:" "},description:{en:"Deal 180% damage with +40% crit chance.",ar:" 180%   +40%  ."},cost:18,target:"single",type:"attack",damageMultiplier:1.8,effect:{type:"crit_boost",bonus:40},cooldown:2,unlockLevel:9},arcane_intellect:{name:{en:"Arcane Intellect",ar:" "},description:{en:"+40% ATK and +20 max Mana for rest of battle.",ar:"+40%   +20     ."},cost:25,target:"self",type:"buff",effect:{type:"permanent_buff",stat:"atk",multiplier:1.4,resourceBonus:20,duration:"battle",icon:""},cooldown:999,unlockLevel:12},meteor:{name:{en:"Meteor",ar:""},description:{en:"Deal 120% damage to all enemies + 20% burn over 2 turns.",ar:" 120%    + 20%    ."},cost:35,target:"all",type:"attack_aoe",damageMultiplier:1.2,effect:{type:"burn",damagePercent:.2,duration:2,icon:""},cooldown:4,unlockLevel:15},time_warp:{name:{en:"Time Warp",ar:" "},description:{en:"Take an extra turn immediately and restore 20 resource.",ar:"     20 ."},cost:50,target:"self",type:"utility",effect:{type:"extra_turn",resourceRestore:20},cooldown:7,unlockLevel:18},quick_strike:{name:{en:"Quick Strike",ar:" "},description:{en:"Deal 130% damage with +20% crit chance.",ar:" 130%   +20%  ."},cost:7,target:"single",type:"attack",damageMultiplier:1.3,effect:{type:"crit_boost",bonus:20},unlockLevel:1},evasion:{name:{en:"Evasion",ar:""},description:{en:"+40% dodge chance (avoid damage) for 2 turns.",ar:"+40%   ( )  ."},cost:10,target:"self",type:"buff",effect:{type:"dodge_buff",amount:40,duration:2,icon:""},cooldown:4,unlockLevel:1},venom_strike:{name:{en:"Venom Strike",ar:" "},description:{en:"Deal 130% damage + poison (10 dmg/turn for 3 turns).",ar:" 130%  +  (10 /  3 )."},cost:15,target:"single",type:"attack_dot",damageMultiplier:1.3,effect:{type:"poison",damage:10,duration:3,icon:""},unlockLevel:3},shadow_step:{name:{en:"Shadow Step",ar:" "},description:{en:"Next attack deals +60% damage and cannot miss.",ar:"   +60%     ."},cost:12,target:"self",type:"buff",effect:{type:"guaranteed_hit",bonusMultiplier:.6,duration:1,icon:""},cooldown:3,unlockLevel:6},fan_of_knives:{name:{en:"Fan of Knives",ar:" "},description:{en:"Deal 60% damage to all enemies + weak poison (5 dmg/turn).",ar:" 60%    +   (5 /)."},cost:20,target:"all",type:"attack_aoe",damageMultiplier:.6,effect:{type:"poison",damage:5,duration:3,icon:""},unlockLevel:9},deadly_precision:{name:{en:"Deadly Precision",ar:" "},description:{en:"+50% crit chance and +30% crit damage for 3 turns.",ar:"+50%    +30%    3 ."},cost:25,target:"self",type:"buff",effect:{type:"crit_buff",critBonus:50,critDamageBonus:.3,duration:3,icon:""},cooldown:5,unlockLevel:12},backstab:{name:{en:"Backstab",ar:"  "},description:{en:"Deal 250% damage to single target, guaranteed crit.",ar:" 250%     ."},cost:22,target:"single",type:"attack",damageMultiplier:2.5,guaranteedCrit:!0,cooldown:3,unlockLevel:15},death_mark:{name:{en:"Death Mark",ar:" "},description:{en:"Mark enemy - all attacks deal +50% damage to marked target for 4 turns.",ar:"    -    +50%     4 ."},cost:45,target:"single",type:"debuff",effect:{type:"marked",multiplier:1.5,duration:4,icon:""},cooldown:6,unlockLevel:18}},BATTLE_BUFFS:{berserker_rage:{name:{en:"Berserker Rage",ar:" "},description:{en:"+25% attack damage this battle",ar:"+25%     "},icon:"",effect:{stat:"atk",multiplier:1.25,duration:"battle"}},precision_strike:{name:{en:"Precision Strike",ar:" "},description:{en:"+15% critical hit chance this battle",ar:"+15%      "},icon:"",effect:{stat:"crit",bonus:15,duration:"battle"}},swift_reflexes:{name:{en:"Swift Reflexes",ar:"  "},description:{en:"+30% speed this battle",ar:"+30%    "},icon:"",effect:{stat:"spd",multiplier:1.3,duration:"battle"}},iron_skin:{name:{en:"Iron Skin",ar:" "},description:{en:"+40% defense this battle",ar:"+40%    "},icon:"",effect:{stat:"def",multiplier:1.4,duration:"battle"}},vampiric_aura:{name:{en:"Vampiric Aura",ar:"  "},description:{en:"Heal 20% of damage dealt as HP",ar:" 20%   "},icon:"",effect:{type:"vampiric",percentage:20,duration:"battle"}},mana_surge:{name:{en:"Mana Surge",ar:" "},description:{en:"+50% resource regeneration this battle",ar:"+50%     "},icon:"",effect:{type:"resource_boost",multiplier:1.5,duration:"battle"}},battle_focus:{name:{en:"Battle Focus",ar:" "},description:{en:"Abilities cost 25% less resource",ar:"  25% "},icon:"",effect:{type:"cost_reduction",percentage:25,duration:"battle"}},lucky_strikes:{name:{en:"Lucky Strikes",ar:" "},description:{en:"20% chance to not consume resource on ability use",ar:"20%   "},icon:"",effect:{type:"resource_save",chance:20,duration:"battle"}},second_wind:{name:{en:"Second Wind",ar:" "},description:{en:"Heal 15 HP at start of each turn",ar:" 15     "},icon:"",effect:{type:"regeneration",amount:15,duration:"battle"}}},DIFFICULTIES:{easy:{enemyHp:.8,enemyAtk:.8,xpGain:1,goldGain:1,playerDmgMult:1.2,enemyDmgMult:.7},normal:{enemyHp:1,enemyAtk:1,xpGain:1.1,goldGain:1.1,playerDmgMult:1,enemyDmgMult:1},hard:{enemyHp:1.3,enemyAtk:1.2,xpGain:1.3,goldGain:1.2,playerDmgMult:.9,enemyDmgMult:1.2}}};class kf{constructor(){this.currentLanguage="en",this.translations={en:{},ar:{}},this.isLoaded=!1,this.subscribers=new Set;const a=localStorage.getItem("pathOfHeroes_language");a&&(a==="en"||a==="ar")&&(this.currentLanguage=a)}async loadTranslations(){try{_.log("Loading translation files...","SYSTEM");const a="/p-o-h/",[i,d]=await Promise.all([fetch(`${a}locales/en.json`),fetch(`${a}locales/ar.json`)]);if(!i.ok||!d.ok)throw new Error("Failed to load translation files");this.translations.en=await i.json(),this.translations.ar=await d.json(),this.isLoaded=!0,_.log(`Translations loaded successfully. Current language: ${this.currentLanguage}`,"SYSTEM"),this.setLanguage(this.currentLanguage),this.notifySubscribers()}catch(a){_.log(`Failed to load translations: ${a.message}`,"ERROR"),this.loadFallbackTranslations()}}loadFallbackTranslations(){this.translations={en:{game:{title:"Path of Heroes"},language:{select:"Select Language",english:"English",arabic:""},menu:{loading:"Loading..."}},ar:{game:{title:" "},language:{select:" ",english:"English",arabic:""},menu:{loading:" ..."}}},this.isLoaded=!0,_.log("Loaded fallback translations","SYSTEM")}subscribe(a){return this.subscribers.add(a),()=>this.subscribers.delete(a)}notifySubscribers(){this.subscribers.forEach(a=>{try{a(this.currentLanguage)}catch(i){_.log(`Error in localization subscriber: ${i}`,"ERROR")}})}get(a,i={}){if(!this.isLoaded)return a;const d=a.split(".");let f=this.translations[this.currentLanguage];for(const h of d)if(f&&typeof f=="object"&&h in f)f=f[h];else{if(this.currentLanguage==="ar"){let x=this.translations.en;for(const b of d)if(x&&typeof x=="object"&&b in x)x=x[b];else{x=a;break}f=x}else f=a;break}return typeof f=="string"&&Object.keys(i).length>0?this.interpolate(f,i):f}interpolate(a,i){return a.replace(/\{(\w+)\}/g,(d,f)=>i[f]!==void 0?i[f]:d)}setLanguage(a){if(!["en","ar"].includes(a)){_.log(`Unsupported language: ${a}`,"ERROR");return}this.currentLanguage=a,document.documentElement.setAttribute("dir",a==="ar"?"rtl":"ltr"),document.documentElement.setAttribute("lang",a),localStorage.setItem("pathOfHeroes_language",a),_.log(`Language changed to: ${a}`,"SYSTEM"),this.notifySubscribers()}getCurrentLanguage(){return this.currentLanguage}isReady(){return this.isLoaded}}const Ve=new kf,v=(c,a)=>Ve.get(c,a);class cc{static initializeStartingPotions(){m.current.potions||(m.current.potions={}),(te.INVENTORY.startingPotions||[]).forEach(({type:i,quantity:d})=>{m.current.potions[i]=(m.current.potions[i]||0)+d}),_.log(`Initialized starting potions: ${JSON.stringify(m.current.potions)}`,"SYSTEM"),m._notify()}static usePotion(a){if(!m.current.potions||!m.current.potions[a]||m.current.potions[a]<=0)return _.log(`No ${a} available`,"SYSTEM"),!1;const i=te.ITEM_TYPES[a];if(!i||!i.consumable)return _.log(`Invalid potion type: ${a}`,"ERROR"),!1;const d=m.current.player;let f="";switch(i.effect){case"heal_hp":const h=Math.min(i.value,d.maxStats.hp-d.stats.hp);d.stats.hp+=h,f=`Healed ${h} HP`;break;case"restore_resource":const x=Math.min(i.value,d.resource.max-d.resource.current);d.resource.current+=x,f=`Restored ${x} ${v(d.resource.nameKey)}`;break;case"full_heal":const b=d.maxStats.hp-d.stats.hp,w=d.resource.max-d.resource.current;d.stats.hp=d.maxStats.hp,d.resource.current=d.resource.max,f=`Fully healed (+${b} HP, +${w} ${v(d.resource.nameKey)})`;break;default:return _.log(`Unknown potion effect: ${i.effect}`,"ERROR"),!1}return m.current.potions[a]--,_.log(`Used ${a}: ${f}`,"SYSTEM"),m._notify(),{success:!0,message:f}}static getAvailablePotions(){return m.current.potions?Object.entries(m.current.potions).filter(([a,i])=>i>0).map(([a,i])=>({type:a,quantity:i,config:te.ITEM_TYPES[a],name:v(`items.${a}`)||te.ITEM_TYPES[a]?.name?.en||a})):[]}static addPotion(a,i=1){m.current.potions||(m.current.potions={}),m.current.potions[a]=(m.current.potions[a]||0)+i,_.log(`Added ${i}x ${a}`,"SYSTEM"),m._notify()}static hasPotion(a,i=1){return m.current.potions&&m.current.potions[a]&&m.current.potions[a]>=i}}const m={current:{gameStarted:!1,currentScreen:"main-menu",player:null,selectedCharacter:null,currentFloor:1,gold:0,level:1,inventory:[],equipped:{},battleInProgress:!1,enemies:[],turnOrder:[],currentTurnIndex:0,enemiesDefeated:0,dungeon:null,playerPos:null,onBattleEnd:null,godMode:!1,currentRunSouls:0,totalSouls:0,soulUpgrades:{},characterSouls:{},characterUpgrades:{}},subscribers:[],subscribe(c){return this.subscribers.push(c),()=>{this.subscribers=this.subscribers.filter(a=>a!==c)}},_notify(){this.subscribers.forEach(c=>{try{c({...this.current})}catch(a){_.log(`Error in GameState subscriber: ${a}`,"ERROR")}})},update(c,a){this.current[c]=a,this._notify()},reset(){const c=this.current.selectedCharacter;this.current={...this.current,gameStarted:!1,currentScreen:c?"save-slots":"main-menu",player:null,currentFloor:1,gold:0,experience:0,level:1,inventory:[],equipped:{},battleInProgress:!1,enemies:[],turnOrder:[],currentTurnIndex:0,enemiesDefeated:0},_.log(`Game state has been reset. Returning to ${this.current.currentScreen}`,"STATE"),this._notify()},newGame(c,a="normal"){this.current={...this.current,gameStarted:!0,currentScreen:"exploration",difficulty:a,selectedCharacter:c,currentFloor:1,gold:25,experience:0,level:1,inventory:[],equipped:{},battleInProgress:!1,enemies:[],turnOrder:[],currentTurnIndex:0,enemiesDefeated:0};const i=ln[c.toUpperCase()];if(!i)throw new Error(`Invalid character: ${c}`);return this.current.player=this.createPlayerFromCharacter(i),cc.initializeStartingPotions(),_.log(`New game started with character: ${c}`,"STATE"),this._notify(),!0},createPlayerFromCharacter(c){return{id:c.id,nameKey:c.nameKey,class:c.id,roleKey:c.roleKey,sprite:"...",stats:{...c.baseStats},maxStats:{...c.baseStats},resource:{nameKey:c.resourceKey,current:c.baseStats.resource,max:c.baseStats.resource},abilities:[...c.abilities],statusEffects:[]}},updatePlayerStats(){if(!this.current.player)return;const c=ln[this.current.selectedCharacter.toUpperCase()],a={...c.baseStats},i=c.growthRates,d=this.current.level-1;a.hp=Math.floor(a.hp+i.hp*d),a.maxHp=a.hp,a.atk=Math.floor(a.atk+i.atk*d),a.def=Math.floor(a.def+i.def*d),a.spd=Math.floor(a.spd+i.spd*d),a.crit=parseFloat((a.crit+i.crit*d).toFixed(2)),Object.values(this.current.equipped).forEach(h=>{h&&h.stats&&Object.keys(h.stats).forEach(x=>{a.hasOwnProperty(x)&&(a[x]+=h.stats[x])})});const f=this.applyPermanentUpgrades();a.hp=Math.floor(a.hp*f.hpMultiplier),this.current.player.stats=a,this.current.player.maxStats={...a}},addExperience(c){if(!this.current.player)return;const a=this.applyPermanentUpgrades();c=Math.floor(c*a.xpMultiplier),this.current.experience+=c;const i=this.current.level,d=this.getRequiredExperience(i+1);this.current.experience>=d&&this.levelUp(),this._notify()},levelUp(){this.current.player&&(this.current.level++,this.updatePlayerStats(),this.healPlayerToFull(),_.log(`Player leveled up to ${this.current.level}!`,"SYSTEM"),this._notify())},getRequiredExperience(c){return c<=1?0:te.XP_CURVE.baseXP+(c-2)*te.XP_CURVE.increment},healPlayerToFull(){this.current.player&&(this.current.player.stats.hp=this.current.player.maxStats.hp,this.current.player.resource.current=this.current.player.resource.max,_.log("Player healed to full HP and resource.","SYSTEM"),this._notify())},spendResource(c){return this.current.player&&this.current.player.resource.current>=c?(this.current.player.resource.current-=c,this._notify(),!0):!1},addGold(c){const a=this.applyPermanentUpgrades();c===te.INVENTORY.startingGold&&(c=Math.floor(c*a.startingGoldMultiplier)),this.current.gold+=c,this._notify()},spendGold(c){return this.current.gold>=c?(this.current.gold-=c,this._notify(),!0):!1},applyDeathPenalty(){const c=Math.floor(this.current.gold*.9),a=this.current.gold-c;return this.current.gold=a,_.log(`Death penalty applied: Lost ${c} gold, kept ${a}`,"SYSTEM"),this._notify(),{goldLost:c,goldKept:a}},awardSouls(c,a){this.current.currentRunSouls+=c,_.log(`Earned ${c} Hero Souls: ${a}`,"SYSTEM"),this._notify()},collectRunSouls(){const c=this.current.currentRunSouls;this.current.totalSouls+=c;const a=this.current.selectedCharacter,i=this.getCurrentSaveSlot();a&&i&&this.addCharacterSouls(a,i,c),this.current.currentRunSouls=0,this.saveSoulData(),_.log(`Collected ${c} Hero Souls. Total: ${this.current.totalSouls}`,"SYSTEM")},getCharacterSouls(c,a){this.current.characterSouls[c]||(this.current.characterSouls[c]={});const i=`slot${a}`;return this.current.characterSouls[c][i]||0},addCharacterSouls(c,a,i){this.current.characterSouls[c]||(this.current.characterSouls[c]={});const d=`slot${a}`;this.current.characterSouls[c][d]=(this.current.characterSouls[c][d]||0)+i,this.saveSoulData()},spendCharacterSouls(c,a,i){const d=this.getCharacterSouls(c,a);if(d>=i){const f=`slot${a}`;return this.current.characterSouls[c][f]=d-i,this.saveSoulData(),!0}return!1},getCurrentSaveSlot(){return this.current.currentSaveSlot||1},getCharacterLevel(c,a){const i=`pathOfHeroes_save_${c}_slot${a}`,d=localStorage.getItem(i);return d&&JSON.parse(d).level||1},getCharacterUpgrades(c,a){this.current.characterUpgrades[c]||(this.current.characterUpgrades[c]={});const i=`slot${a}`;return this.current.characterUpgrades[c][i]||{}},purchaseCharacterUpgrade(c,a,i){const d=this.getCharacterLevel(c,a),h=this.getSoulUpgrades(c,d)[i],x=this.getCharacterUpgrades(c,a);if(!h||x[i])return!1;if(this.spendCharacterSouls(c,a,h.cost)){this.current.characterUpgrades[c]||(this.current.characterUpgrades[c]={});const b=`slot${a}`;return this.current.characterUpgrades[c][b]||(this.current.characterUpgrades[c][b]={}),this.current.characterUpgrades[c][b][i]=!0,this.saveSoulData(),_.log(`Purchased upgrade: ${i} for ${c} slot ${a}`,"SYSTEM"),!0}return!1},spendSouls(c){return this.current.totalSouls>=c?(this.current.totalSouls-=c,this.saveSoulData(),this._notify(),!0):!1},purchaseUpgrade(c){const i=this.getSoulUpgrades()[c];return!i||this.current.soulUpgrades[c]?!1:this.spendSouls(i.cost)?(this.current.soulUpgrades[c]=!0,this.saveSoulData(),_.log(`Purchased upgrade: ${c}`,"SYSTEM"),!0):!1},getSoulUpgrades(c,a=1){const i={vitality:{nameKey:"upgrades.vitality.name",descriptionKey:"upgrades.vitality.description",baseCost:10,tier:1,type:"stat",maxLevel:5},fortune:{nameKey:"upgrades.fortune.name",descriptionKey:"upgrades.fortune.description",baseCost:12,tier:1,type:"economic",maxLevel:3},wisdom:{nameKey:"upgrades.wisdom.name",descriptionKey:"upgrades.wisdom.description",baseCost:15,tier:1,type:"progression",maxLevel:3},strength:{nameKey:"upgrades.strength.name",descriptionKey:"upgrades.strength.description",baseCost:18,tier:1,type:"stat",maxLevel:5},resilience:{nameKey:"upgrades.resilience.name",descriptionKey:"upgrades.resilience.description",baseCost:16,tier:1,type:"stat",maxLevel:4},swiftness:{nameKey:"upgrades.swiftness.name",descriptionKey:"upgrades.swiftness.description",baseCost:25,tier:2,type:"stat",maxLevel:3},merchantsFavor:{nameKey:"upgrades.merchantsFavor.name",descriptionKey:"upgrades.merchantsFavor.description",baseCost:30,tier:2,type:"economic",maxLevel:3},battleMastery:{nameKey:"upgrades.battleMastery.name",descriptionKey:"upgrades.battleMastery.description",baseCost:35,tier:2,type:"combat",maxLevel:4},treasureHunter:{nameKey:"upgrades.treasureHunter.name",descriptionKey:"upgrades.treasureHunter.description",baseCost:40,tier:2,type:"economic",maxLevel:3},mysticism:{nameKey:"upgrades.mysticism.name",descriptionKey:"upgrades.mysticism.description",baseCost:45,tier:2,type:"magic",maxLevel:3},regeneration:{nameKey:"upgrades.regeneration.name",descriptionKey:"upgrades.regeneration.description",baseCost:38,tier:2,type:"survival",maxLevel:4},floorMaster:{nameKey:"upgrades.floorMaster.name",descriptionKey:"upgrades.floorMaster.description",baseCost:60,tier:3,type:"progression",maxLevel:1},soulReaper:{nameKey:"upgrades.soulReaper.name",descriptionKey:"upgrades.soulReaper.description",baseCost:80,tier:3,type:"meta",maxLevel:3},criticalStrike:{nameKey:"upgrades.criticalStrike.name",descriptionKey:"upgrades.criticalStrike.description",baseCost:70,tier:3,type:"combat",maxLevel:4},resourceMastery:{nameKey:"upgrades.resourceMastery.name",descriptionKey:"upgrades.resourceMastery.description",baseCost:75,tier:3,type:"resource",maxLevel:3},goldRush:{nameKey:"upgrades.goldRush.name",descriptionKey:"upgrades.goldRush.description",baseCost:65,tier:3,type:"economic",maxLevel:2},titanicHealth:{nameKey:"upgrades.titanicHealth.name",descriptionKey:"upgrades.titanicHealth.description",baseCost:85,tier:3,type:"stat",maxLevel:2},legendaryLuck:{nameKey:"upgrades.legendaryLuck.name",descriptionKey:"upgrades.legendaryLuck.description",baseCost:120,tier:4,type:"rare",maxLevel:2},transcendence:{nameKey:"upgrades.transcendence.name",descriptionKey:"upgrades.transcendence.description",baseCost:200,tier:4,type:"ultimate",maxLevel:1},soulSiphon:{nameKey:"upgrades.soulSiphon.name",descriptionKey:"upgrades.soulSiphon.description",baseCost:150,tier:4,type:"meta",maxLevel:2},divineBlessing:{nameKey:"upgrades.divineBlessing.name",descriptionKey:"upgrades.divineBlessing.description",baseCost:180,tier:4,type:"ultimate",maxLevel:1},omnipotence:{nameKey:"upgrades.omnipotence.name",descriptionKey:"upgrades.omnipotence.description",baseCost:500,tier:5,type:"godlike",maxLevel:1,rarity:"mythical"},immortality:{nameKey:"upgrades.immortality.name",descriptionKey:"upgrades.immortality.description",baseCost:400,tier:5,type:"godlike",maxLevel:1,rarity:"mythical"},timeManipulation:{nameKey:"upgrades.timeManipulation.name",descriptionKey:"upgrades.timeManipulation.description",baseCost:600,tier:5,type:"godlike",maxLevel:1,rarity:"mythical"}},d={warrior:{shieldMastery:{nameKey:"upgrades.shieldMastery.name",descriptionKey:"upgrades.shieldMastery.description",cost:45,tier:2,type:"class"},armorExpert:{nameKey:"upgrades.armorExpert.name",descriptionKey:"upgrades.armorExpert.description",cost:80,tier:3,type:"class"},guardianSpirit:{nameKey:"upgrades.guardianSpirit.name",descriptionKey:"upgrades.guardianSpirit.description",cost:130,tier:4,type:"class"}},sorceress:{manaFlow:{nameKey:"upgrades.manaFlow.name",descriptionKey:"upgrades.manaFlow.description",cost:45,tier:2,type:"class"},elementalMastery:{nameKey:"upgrades.elementalMastery.name",descriptionKey:"upgrades.elementalMastery.description",cost:80,tier:3,type:"class"},arcaneTranscendence:{nameKey:"upgrades.arcaneTranscendence.name",descriptionKey:"upgrades.arcaneTranscendence.description",cost:130,tier:4,type:"class"}},rogue:{poisonMastery:{nameKey:"upgrades.poisonMastery.name",descriptionKey:"upgrades.poisonMastery.description",cost:45,tier:2,type:"class"},shadowStep:{nameKey:"upgrades.shadowStep.name",descriptionKey:"upgrades.shadowStep.description",cost:80,tier:3,type:"class"},deathFromShadows:{nameKey:"upgrades.deathFromShadows.name",descriptionKey:"upgrades.deathFromShadows.description",cost:130,tier:4,type:"class"}}},f={...i};d[c]&&Object.assign(f,d[c]);const h=Math.min(4,Math.ceil(a/3)),x={};return Object.keys(f).forEach(b=>{const w=f[b];w.tier<=h&&(x[b]=w)}),x},applyPermanentUpgrades(){const c=this.current.soulUpgrades;let a={hpMultiplier:1,startingGoldMultiplier:1,xpMultiplier:1};return c.vitality&&(a.hpMultiplier=1.2),c.fortune&&(a.startingGoldMultiplier=1.5),c.wisdom&&(a.xpMultiplier=1.25),a},saveSoulData(){try{const c={totalSouls:this.current.totalSouls,soulUpgrades:this.current.soulUpgrades,characterSouls:this.current.characterSouls,characterUpgrades:this.current.characterUpgrades};localStorage.setItem("pathOfHeroes_souls",JSON.stringify(c))}catch(c){_.log(`Failed to save soul data: ${c}`,"ERROR")}},loadSoulData(){try{const c=localStorage.getItem("pathOfHeroes_souls");if(c){const a=JSON.parse(c);this.current.totalSouls=a.totalSouls||0,this.current.soulUpgrades=a.soulUpgrades||{},this.current.characterSouls=a.characterSouls||{},this.current.characterUpgrades=a.characterUpgrades||{},_.log(`Loaded soul data: ${this.current.totalSouls} souls`,"SYSTEM")}}catch(c){_.log(`Failed to load soul data: ${c}`,"ERROR")}},nextFloor(){const c=this.calculateFloorReward();if(this.addGold(c.gold),this.awardSouls(c.souls,`Completing floor ${this.current.currentFloor}`),this.current.currentFloor+=1,this.current.player){const a=Math.floor(this.current.player.maxStats.hp*.25);this.current.player.stats.hp=Math.min(this.current.player.maxStats.hp,this.current.player.stats.hp+a)}return _.log(`Advanced to floor ${this.current.currentFloor}. Rewards: ${c.gold} gold, ${c.souls} souls`,"SYSTEM"),this._notify(),c},calculateFloorReward(){const c=5+this.current.currentFloor*2,a=5+Math.floor(this.current.currentFloor/2);return{gold:c,souls:a,reason:`Floor ${this.current.currentFloor} completion bonus`}},checkBossDefeat(){const c=this.current.dungeon;if(!c)return!1;for(let a=0;a<c.length;a++)for(let i=0;i<c[a].length;i++){const d=c[a][i];if(d.type==="boss"&&d.completed)return!0}return!1},resetForNewFloor(){this.current.dungeon=null,this.current.playerPos=null,this.current.battleInProgress=!1,this.current.enemies=[],this.current.turnOrder=[],this.current.currentTurnIndex=0,this.current.currentScreen="exploration",_.log(`Reset game state for floor ${this.current.currentFloor}`,"SYSTEM"),this._notify()},saveGame(c,a){try{const i=`pathOfHeroes_save_${c}_slot${a}`,d={characterId:c,currentFloor:this.current.currentFloor,gold:this.current.gold,experience:this.current.experience,level:this.current.level,inventory:this.current.inventory,equipped:this.current.equipped,player:this.current.player,currentRunSouls:this.current.currentRunSouls,timestamp:Date.now(),gameVersion:"1.0.0",currentSaveSlot:a};return localStorage.setItem(i,JSON.stringify(d)),_.log(`Game saved for ${c} in slot ${a}`,"SYSTEM"),!0}catch(i){return _.log(`Failed to save game: ${i}`,"ERROR"),!1}},loadGame(c,a){try{const i=`pathOfHeroes_save_${c}_slot${a}`,d=localStorage.getItem(i);if(!d)return _.log(`No save found for ${c} slot ${a}`,"SYSTEM"),!1;const f=JSON.parse(d);return this.current.gameStarted=!0,this.current.selectedCharacter=f.characterId,this.current.currentFloor=f.currentFloor,this.current.gold=f.gold,this.current.experience=f.experience,this.current.level=f.level,this.current.inventory=f.inventory||[],this.current.equipped=f.equipped||{},this.current.player=f.player,this.current.currentRunSouls=f.currentRunSouls||0,this.current.currentSaveSlot=f.currentSaveSlot||a,this.current.currentScreen="exploration",_.log(`Game loaded for ${c} from slot ${a}`,"SYSTEM"),this._notify(),!0}catch(i){return _.log(`Failed to load game: ${i}`,"ERROR"),!1}},getSaveSlotInfo(c,a){try{const i=`pathOfHeroes_save_${c}_slot${a}`,d=localStorage.getItem(i);if(!d)return null;const f=JSON.parse(d);return{exists:!0,level:f.level,floor:f.currentFloor,gold:f.gold,timestamp:f.timestamp,characterId:f.characterId}}catch(i){return _.log(`Failed to get save slot info: ${i}`,"ERROR"),null}},deleteSave(c,a){try{const i=`pathOfHeroes_save_${c}_slot${a}`;return localStorage.removeItem(i),_.log(`Deleted save for ${c} slot ${a}`,"SYSTEM"),!0}catch(i){return _.log(`Failed to delete save: ${i}`,"ERROR"),!1}}};_.log("state.js: Module loaded.","SYSTEM");const ri={goblin:{id:"goblin",nameKey:"enemies.goblin",baseStats:{hp:48,atk:10,def:3,spd:6,crit:5},goldReward:{min:2,max:5},xpReward:20,abilities:[],icon:"",types:["physical","fast"]},slime:{id:"slime",nameKey:"enemies.slime",baseStats:{hp:54,atk:9,def:8,spd:3,crit:3},goldReward:{min:3,max:6},xpReward:25,abilities:[],icon:"",types:["magical","brute"]},orcBrute:{id:"orcBrute",nameKey:"enemies.orcBrute",baseStats:{hp:72,atk:14,def:5,spd:5,crit:8},goldReward:{min:5,max:10},xpReward:35,abilities:[],icon:"",types:["brute","physical"]},orcWarlord:{id:"orcWarlord",nameKey:"enemies.orcWarlord",baseStats:{hp:144,atk:23,def:10,spd:10,crit:12},goldReward:{min:8,max:15},xpReward:100,abilities:["intimidate"],icon:"",isBoss:!0,types:["elite","brute","physical"]},skeleton:{id:"skeleton",nameKey:"enemies.skeleton",baseStats:{hp:48,atk:18,def:12,spd:6,crit:15},goldReward:{min:3,max:5},xpReward:30,abilities:["bone_throw"],icon:"",types:["undead","physical"]},ghoul:{id:"ghoul",nameKey:"enemies.ghoul",baseStats:{hp:72,atk:20,def:8,spd:14,crit:10},goldReward:{min:3,max:6},xpReward:35,abilities:["life_drain"],icon:"",types:["undead","fast"]},wraith:{id:"wraith",nameKey:"enemies.wraith",baseStats:{hp:54,atk:25,def:5,spd:18,crit:25},goldReward:{min:4,max:7},xpReward:45,abilities:["phase","wail"],icon:"",types:["undead","magical","fast"]},graveGolem:{id:"graveGolem",nameKey:"enemies.graveGolem",baseStats:{hp:240,atk:31,def:20,spd:5,crit:5},goldReward:{min:10,max:18},xpReward:200,abilities:["slam","regenerate"],icon:"",isBoss:!0,types:["elite","brute","undead"]},demonicImp:{id:"demonicImp",nameKey:"enemies.imp",baseStats:{hp:66,atk:30,def:10,spd:20,crit:18},goldReward:{min:4,max:8},xpReward:55,abilities:["fireball","teleport"],icon:"",types:["magical","fast"]},cultist:{id:"cultist",nameKey:"enemies.cultist",baseStats:{hp:84,atk:28,def:15,spd:12,crit:15},goldReward:{min:5,max:9},xpReward:60,abilities:["dark_ritual","curse"],icon:"",types:["magical","elite"]},cryptLord:{id:"cryptLord",nameKey:"enemies.cryptLord",baseStats:{hp:360,atk:44,def:25,spd:12,crit:20},goldReward:{min:15,max:25},xpReward:500,abilities:["death_ray","summon_minions","unholy_aura"],icon:"",isBoss:!0,types:["elite","magical","undead"]}},nn=c=>c<=10?["goblin","slime","orcBrute"]:c<=20?["skeleton","ghoul","wraith"]:["demonicImp","cultist"],wf=c=>c===10?"orcWarlord":c===20?"graveGolem":c===30?"cryptLord":null,sc={PREFERRED_TYPE_WEIGHT:2,NEUTRAL_TYPE_WEIGHT:1};class Ef{constructor(){this.currentCharacterId=null,this.characterConfig=null}initialize(a){const i=a.toUpperCase();return this.characterConfig=ln[i],this.characterConfig?(this.currentCharacterId=a,_.log(`CharacterService: Initialized for ${a}`,"SYSTEM"),!0):(_.log(`CharacterService: Invalid character ID: ${a}`,"ERROR"),!1)}getPreferredEnemyTypes(){return this.characterConfig?this.characterConfig.preferredEnemyTypes||[]:(_.log("CharacterService: Not initialized","ERROR"),[])}isPreferredEnemy(a){if(!a.types||!this.characterConfig)return!1;const i=this.getPreferredEnemyTypes();return a.types.some(d=>i.includes(d))}calculateEnemyWeight(a){return this.isPreferredEnemy(a)?sc.PREFERRED_TYPE_WEIGHT:sc.NEUTRAL_TYPE_WEIGHT}generateEnemyPool(a){const i=nn(a),d=[];return i.forEach(f=>{const h=ri[f];if(!h)return;const x=this.calculateEnemyWeight(h),b=Math.floor(x*10);for(let w=0;w<b;w++)d.push(f)}),d}selectFromPool(a){if(a.length===0)return _.log("CharacterService: Empty pool, using fallback","ERROR"),"goblin";const i=Math.floor(Math.random()*a.length);return a[i]}generateEncounter(a,i=1){if(!this.characterConfig){_.log("CharacterService: Not initialized, using default encounters","ERROR");const h=nn(a);return Array(i).fill(h[0])}const d=this.generateEnemyPool(a),f=[];for(let h=0;h<i;h++){const x=this.selectFromPool(d);f.push(x)}return f}getEncounterStats(a,i=100){if(!this.characterConfig)return{error:"Service not initialized"};const d={floor:a,character:this.currentCharacterId,preferredTypes:this.getPreferredEnemyTypes(),enemyCounts:{},totalPreferred:0,totalNeutral:0};for(let f=0;f<i;f++){const x=this.generateEncounter(a,1)[0];d.enemyCounts[x]=(d.enemyCounts[x]||0)+1,this.isPreferredEnemy(ri[x])?d.totalPreferred++:d.totalNeutral++}return d.preferredPercentage=Math.round(d.totalPreferred/i*100),d}getBossScalingModifier(){return this.characterConfig&&this.characterConfig.bossScalingModifier||1}getUniqueRewardTypes(){return this.characterConfig?this.characterConfig.uniqueRewards||[]:[]}getProgressionPath(){return this.characterConfig&&this.characterConfig.progressionPath||"default"}reset(){this.currentCharacterId=null,this.characterConfig=null,_.log("CharacterService: Reset","SYSTEM")}}const _r=new Ef;_.log("character-service.js: Module loaded.","SYSTEM");const q={EMPTY:"empty",WALL:"wall",BATTLE:"battle",ELITE:"elite",SHOP:"shop",CAMPFIRE:"campfire",SHRINE:"shrine",TREASURE:"treasure",BOSS:"boss",STAIRS:"stairs"},bf={[q.EMPTY]:"",[q.WALL]:"",[q.BATTLE]:"",[q.ELITE]:"",[q.SHOP]:"",[q.CAMPFIRE]:"",[q.SHRINE]:"",[q.TREASURE]:"",[q.BOSS]:"",[q.STAIRS]:""},Cr=5,Rr=9;function en(c,a){const i=ri[c];if(!i)return _.log(`Enemy ID not found: ${c}`,"ERROR"),null;const d=JSON.parse(JSON.stringify(i)),f=m.current.level||1;let h;a<=2?h=Math.max(1,f-1):a<=4?h=f:a<=7?h=Math.max(1,f+Math.floor(Math.random()*2)):h=Math.max(1,f+Math.floor(Math.random()*3)-1),d.isBoss&&(h=Math.max(f+1,h)),d.level=h;const x=h-1,b=1+x*.12;d.baseStats.hp=Math.ceil(d.baseStats.hp*b),d.baseStats.atk=Math.ceil(d.baseStats.atk*b),d.baseStats.def=Math.ceil(d.baseStats.def*b),d.baseStats.spd=Math.ceil(d.baseStats.spd*(1+x*.08)),d.baseStats.crit&&(d.baseStats.crit=Math.min(30,d.baseStats.crit+x*1.5)),d.isBoss||(d.baseStats.atk=Math.ceil(d.baseStats.atk*.95)),d.stats={...d.baseStats},d.maxStats={...d.baseStats};const w=1+(h-1)*.08;return d.goldReward.min=Math.ceil(d.goldReward.min*w),d.goldReward.max=Math.ceil(d.goldReward.max*w),d.xpReward=Math.ceil(d.xpReward*w),_.log(`Generated Lv.${h} ${d.nameKey} (Player Lv.${f}, Floor ${a})`,"SYSTEM"),d}function Nf(c,a){return c>=0&&c<Cr&&a>=0&&a<Rr}function _f(c,a){return[{x:c-2,y:a},{x:c+2,y:a},{x:c,y:a-2},{x:c,y:a+2}].filter(i=>Nf(i.x,i.y))}function Cf(){const c=Array(Rr).fill(null).map(()=>Array(Cr).fill(null).map(()=>({type:q.WALL,isPath:!1}))),a=Math.floor(Cr/2),i=Rr-2;c[i][a]={type:q.EMPTY,isPath:!0};const d=[{x:a,y:i}],f=new Set;for(f.add(`${a},${i}`);d.length>0;){const h=d[d.length-1],x=_f(h.x,h.y).filter(b=>!f.has(`${b.x},${b.y}`));if(x.length>0){const b=x[Math.floor(Math.random()*x.length)],w=(h.x+b.x)/2,R=(h.y+b.y)/2;c[b.y][b.x]={type:q.EMPTY,isPath:!0},c[R][w]={type:q.EMPTY,isPath:!0},f.add(`${b.x},${b.y}`),d.push(b)}else d.pop()}return{maze:c,startX:a,startY:i}}function ni(){const{maze:c,startX:a,startY:i}=Cf(),d=Array(Rr).fill(null).map((C,O)=>Array(Cr).fill(null).map((re,pe)=>({type:c[O][pe].type,revealed:!0,visited:!1,completed:!1,encounter:null,isPath:c[O][pe].isPath||!1}))),f={x:a,y:i};d[f.y][f.x].revealed=!0,d[f.y][f.x].visited=!0,d[f.y][f.x].completed=!0;const h=[];for(let C=0;C<Rr;C++)for(let O=0;O<Cr;O++)d[C][O].isPath&&!(O===f.x&&C===f.y)&&h.push({x:O,y:C});for(let C=h.length-1;C>0;C--){const O=Math.floor(Math.random()*(C+1));[h[C],h[O]]=[h[O],h[C]]}let x=0;const b=m.current.currentFloor;let w=0,R=null;h.forEach(C=>{const O=Math.abs(C.x-f.x)+Math.abs(C.y-f.y);O>w&&(w=O,R=C)}),R&&(d[R.y][R.x].type=q.BOSS,h.splice(h.findIndex(C=>C.x===R.x&&C.y===R.y),1)),[{type:q.SHOP,count:1},{type:q.SHRINE,count:2},{type:q.TREASURE,count:3},{type:q.ELITE,count:2}].forEach(({type:C,count:O})=>{for(let re=0;re<O&&x<h.length;re++)d[h[x].y][h[x].x].type=C,x++});for(let C=x;C<h.length;C++)d[h[C].y][h[C].x].type=q.BATTLE;return Rf(d,b),m.current.dungeon=d,m.current.playerPos={...f},m._notify(),_.log(`Generated visible dungeon for floor ${b} with ${h.length+1} rooms. Path fully revealed for strategic planning.`,"SYSTEM"),d}function Rf(c,a){const i=wf(a),d=m.current.selectedCharacter&&_r.currentCharacterId;for(let f=0;f<Rr;f++)for(let h=0;h<Cr;h++){const x=c[f][h];if(x.type===q.BATTLE){let b=[];if(d)b.push(_r.generateEncounter(a,1)[0]);else{const R=nn(a),D=R[Math.floor(Math.random()*R.length)];b.push(D)}x.encounter=[en(b[0],a)];const w=Math.min(.6,.3+(a-1)*.1);if(Math.random()<w){let R;if(d)R=_r.generateEncounter(a,1)[0];else{const D=nn(a);R=D[Math.floor(Math.random()*D.length)]}if(x.encounter.push(en(R,a)),a>=5&&Math.random()<.2){let D;if(d)D=_r.generateEncounter(a,1)[0];else{const C=nn(a);D=C[Math.floor(Math.random()*C.length)]}x.encounter.push(en(D,a))}}}else if(x.type===q.ELITE){let b;if(d)b=_r.generateEncounter(a,1)[0];else{const D=nn(a);b=D[Math.floor(Math.random()*D.length)]}const w=en(b,a),R=1.5+(a-1)*.1;if(w.baseStats.hp=Math.floor(w.baseStats.hp*R),w.baseStats.atk=Math.floor(w.baseStats.atk*R),w.baseStats.def=Math.floor(w.baseStats.def*R),w.stats={...w.baseStats},w.maxStats={...w.baseStats},w.prefixKey="prefixes.elite",x.encounter=[w],a>=3&&Math.random()<.4){const D=availableEnemies[Math.floor(Math.random()*availableEnemies.length)];x.encounter.push(en(D,a))}}else if(x.type===q.BOSS&&i){const b=en(i,a),w=m.current.selectedCharacter?.toUpperCase()||"WARRIOR",R=ln[w],D=R?.bossScalingModifier||1;let C=1.8+(a-1)*.15;if(C*=D,b.baseStats.hp=Math.floor(b.baseStats.hp*C),b.baseStats.atk=Math.floor(b.baseStats.atk*C),b.baseStats.def=Math.floor(b.baseStats.def*C),b.stats={...b.baseStats},b.maxStats={...b.baseStats},a>1){const O=R?.progressionPath||"standard";b.nameKey=`${b.nameKey} - Floor ${a} ${O} Nemesis`}x.encounter=[b]}}}function jf(){const c=m.current.dungeon;if(!c)return;let a=null;for(let i=0;i<Rr;i++){for(let d=0;d<Cr;d++)if(c[i][d].type===q.BOSS){a={x:d,y:i};break}if(a)break}a&&(c[a.y][a.x].type=q.STAIRS,c[a.y][a.x].encounter=null,c[a.y][a.x].completed=!0,m._notify(),_.log("Stairs to next floor have appeared!","SYSTEM"))}class cr{static initializeBattle(){m.current.battleBuffs||(m.current.battleBuffs=[]),m.current.battleBuffs=m.current.battleBuffs.filter(a=>a.duration!=="battle")}static generateBuffChoices(a=3){return Object.keys(te.BATTLE_BUFFS).sort(()=>.5-Math.random()).slice(0,a).map(f=>({key:f,...te.BATTLE_BUFFS[f]}))}static applyBuff(a){const i=te.BATTLE_BUFFS[a];if(!i)return _.log(`Invalid buff: ${a}`,"ERROR"),!1;const d=m.current.player,f={key:a,...i,appliedAt:Date.now()};switch(i.effect.type){case"vampiric":break;case"resource_boost":break;case"cost_reduction":break;case"resource_save":break;case"regeneration":break;default:if(i.effect.stat&&i.effect.multiplier){const h=d.stats[i.effect.stat],x=Math.floor(h*i.effect.multiplier);d.stats[i.effect.stat]=x}else i.effect.stat&&i.effect.bonus&&(d.stats[i.effect.stat]+=i.effect.bonus)}return m.current.battleBuffs||(m.current.battleBuffs=[]),m.current.battleBuffs.push(f),_.log(`Applied buff: ${a}`,"SYSTEM"),m._notify(),!0}static processBuffEffects(a,i={}){if(!m.current.battleBuffs)return;const d=m.current.player;m.current.battleBuffs.forEach(f=>{const h=f.effect;switch(a){case"turn_start":if(h.type==="regeneration"){const x=Math.min(h.amount,d.maxStats.hp-d.stats.hp);d.stats.hp+=x,x>0&&i.onLog&&i.onLog(`${f.icon} Second Wind: Healed ${x} HP`)}break;case"damage_dealt":if(h.type==="vampiric"&&i.damage){const x=Math.floor(i.damage*(h.percentage/100)),b=Math.min(x,d.maxStats.hp-d.stats.hp);d.stats.hp+=b,b>0&&i.onLog&&i.onLog(`${f.icon} Vampiric: Healed ${b} HP`)}break;case"ability_used":if(h.type==="resource_save"&&i.cost){const x=Math.random(),b=h.chance/100;if(_.log(`[BUFF] Lucky Strikes roll: ${(x*100).toFixed(1)}% (need < ${h.chance}%)`,"SYSTEM"),x<b){const w=d.resource.current;d.resource.current+=i.cost;const R=d.resource.current;return _.log(`[BUFF] Lucky Strikes triggered! Resource refunded: ${w}  ${R} (+${i.cost})`,"SYSTEM"),i.onLog&&i.onLog(`${f.icon} Lucky Strike: Resource saved! (+${i.cost})`),{resourceSaved:!0}}else _.log("[BUFF] Lucky Strikes did not trigger","SYSTEM")}break}}),m._notify()}static getModifiedAbilityCost(a){if(!m.current.battleBuffs)return a;let i=a;return m.current.battleBuffs.forEach(d=>{if(d.effect.type==="cost_reduction"){const f=d.effect.percentage/100;i=Math.floor(i*(1-f))}}),Math.max(1,i)}static getModifiedResourceRegen(a){if(!m.current.battleBuffs)return a;let i=a;return m.current.battleBuffs.forEach(d=>{d.effect.type==="resource_boost"&&(i=Math.floor(i*d.effect.multiplier))}),i}static getActiveBuffs(){return m.current.battleBuffs||[]}static clearBattleBuffs(){m.current.battleBuffs=m.current.battleBuffs?.filter(a=>a.duration!=="battle")||[],m._notify()}}const Tf={goblin:{weaknesses:["fire","lightning"],resistances:["physical"],baseToughness:60},slime:{weaknesses:["ice","lightning"],resistances:["poison"],baseToughness:50},orcBrute:{weaknesses:["poison","ice"],resistances:["fire"],baseToughness:80},skeleton:{weaknesses:["holy","fire"],resistances:["physical"],baseToughness:55},ghoul:{weaknesses:["fire","holy"],resistances:["poison"],baseToughness:70},wraith:{weaknesses:["holy","physical"],resistances:["shadow"],baseToughness:65},imp:{weaknesses:["ice","holy"],resistances:["fire"],baseToughness:60},cultist:{weaknesses:["physical","lightning"],resistances:["shadow"],baseToughness:55},orcWarlord:{weaknesses:["ice","lightning"],resistances:["physical"],baseToughness:120},graveGolem:{weaknesses:["fire","lightning"],resistances:["physical"],baseToughness:100},cryptLord:{weaknesses:["holy","fire"],resistances:["shadow"],baseToughness:150}},Mf={power_strike:"physical",shield_bash:"physical",whirlwind_attack:"physical",execute:"physical",last_stand:"fire",iron_will:"holy",magic_missile:"lightning",fireball:"fire",ice_shard:"ice",lightning_bolt:"lightning",meteor:"fire",quick_strike:"physical",venom_strike:"poison",shadow_step:"shadow",fan_of_knives:"poison",backstab:"shadow",death_mark:"shadow",basic_attack:"physical"},lc={physical:{name:{en:"Physical Break",ar:" "},damage:25,effect:"instant",description:{en:"25 instant damage",ar:"25  "}},fire:{name:{en:"Fire Break",ar:" "},damage:30,effect:"burn",duration:2,description:{en:"30 burn damage over 2 turns",ar:"30     "}},ice:{name:{en:"Ice Break",ar:" "},damage:20,effect:"freeze",description:{en:"Freeze + 20 damage",ar:" + 20 "}},lightning:{name:{en:"Lightning Break",ar:" "},damage:40,effect:"instant",description:{en:"40 instant damage",ar:"40  "}},poison:{name:{en:"Poison Break",ar:" "},damage:15,effect:"poison",duration:3,description:{en:"15 damage per turn for 3 turns",ar:"15     3 "}},shadow:{name:{en:"Shadow Break",ar:" "},damage:0,effect:"defense_down",duration:2,debuff:.7,description:{en:"-30% DEF for 2 turns",ar:"-30%   "}},holy:{name:{en:"Holy Break",ar:" "},damage:35,effect:"instant",description:{en:"35 instant damage + cleanse",ar:"35   + "}}};function Pf(c){return Tf[c]||{weaknesses:[],resistances:[],baseToughness:60}}function Lf(c){return Mf[c]||"physical"}function If(c,a,i){return a.includes(c)?1.5:i.includes(c)?.75:1}function $f(c,a,i){return a.includes(c)?20:i.includes(c)?2:5}class Gn{static initializeEnemyBreakData(a,i=1){const d=a.type||"goblin",f=Pf(d),h=f.baseToughness||60,x=(i-1)*10,b=h+x;return a.breakData={maxToughness:b,currentToughness:b,weaknesses:f.weaknesses||[],resistances:f.resistances||[],isBroken:!1,brokenTurnsRemaining:0,breakEffects:[]},_.log(`Enemy ${a.type} initialized with toughness: ${b}, weaknesses: ${a.breakData.weaknesses.join(", ")}`,"COMBAT"),a}static dealToughnessDamage(a,i,d){a.breakData||this.initializeEnemyBreakData(a,m.current.currentFloor);const f=a.breakData;if(f.isBroken)return{broken:!1,toughnessDamage:0};const h=$f(i,f.weaknesses,f.resistances),x=f.currentToughness;return f.currentToughness=Math.max(0,f.currentToughness-h),_.log(`Toughness damage: ${h} (${x}  ${f.currentToughness})`,"COMBAT"),f.currentToughness===0&&x>0?this.breakEnemy(a,i,d):{broken:!1,toughnessDamage:h}}static breakEnemy(a,i,d){const f=a.breakData;f.isBroken=!0,f.brokenTurnsRemaining=1;const h=lc[i]||lc.physical,x=a.nameKey||a.type;let b=h.damage||0;return h.effect==="instant"?(a.stats.hp=Math.max(0,a.stats.hp-b),d&&d(` ${x.toUpperCase()} BROKEN!  ${h.name.en}: ${b} damage!`),_.log(`Break: ${x} broken by ${i}! Instant damage: ${b}`,"COMBAT")):h.effect==="burn"||h.effect==="poison"?(a.statusEffects=a.statusEffects||[],a.statusEffects.push({type:h.effect,damage:Math.floor(h.damage/h.duration),duration:h.duration,icon:h.effect==="burn"?"":""}),d&&d(` ${x.toUpperCase()} BROKEN!  ${h.name.en}: ${h.description.en}!`),_.log(`Break: ${x} broken by ${i}! ${h.effect} applied`,"COMBAT")):h.effect==="freeze"?(a.stats.hp=Math.max(0,a.stats.hp-b),f.brokenTurnsRemaining=2,d&&d(` ${x.toUpperCase()} BROKEN!  Frozen solid! ${b} damage!`),_.log(`Break: ${x} frozen! Stunned for 2 turns`,"COMBAT")):h.effect==="defense_down"&&(a.statusEffects=a.statusEffects||[],a.statusEffects.push({type:"defense_down",amount:h.debuff,duration:h.duration,icon:""}),d&&d(` ${x.toUpperCase()} BROKEN!  ${h.description.en}!`),_.log(`Break: ${x} defense reduced by ${h.debuff}`,"COMBAT")),d&&d(" Enemy STUNNED! Takes 50% bonus damage this turn!"),{broken:!0,toughnessDamage:a.breakData.maxToughness,breakElement:i,breakEffect:h}}static recoverFromBreak(a,i){if(!(!a.breakData||!a.breakData.isBroken)&&(a.breakData.brokenTurnsRemaining--,a.breakData.brokenTurnsRemaining<=0)){a.breakData.isBroken=!1,a.breakData.brokenTurnsRemaining=0,a.breakData.currentToughness=Math.floor(a.breakData.maxToughness*.5);const d=a.nameKey||a.type;i&&i(` ${d} recovered from break! Toughness restored to ${a.breakData.currentToughness}`),_.log(`${d} recovered from break`,"COMBAT")}}static isBroken(a){return a.breakData&&a.breakData.isBroken}static getBrokenMultiplier(a){return this.isBroken(a)?1.5:1}static processBreakEffects(a,i){a.breakData&&a.breakData.isBroken&&this.recoverFromBreak(a,i)}static shouldSkipTurn(a){return a.breakData&&a.breakData.isBroken&&a.breakData.brokenTurnsRemaining>0}}class Nr{static initializeUltimateGauge(){m.current.player.ultimate||(m.current.player.ultimate={current:0,max:100,ready:!1},_.log("Ultimate gauge initialized","COMBAT"))}static addUltimatePoints(a,i,d){this.initializeUltimateGauge();const f=m.current.player.ultimate,h=f.current;f.current=Math.min(f.max,f.current+a),f.ready=f.current>=f.max,d&&a>0&&d(` +${a} Ultimate! (${h}  ${f.current}/${f.max})`),_.log(`Ultimate: +${a} from ${i} (${h}  ${f.current})`,"COMBAT"),f.ready&&h<f.max&&(d&&d(" ULTIMATE READY! "),_.log("Ultimate gauge READY!","COMBAT")),m._notify()}static useUltimate(a,i,d,f){this.initializeUltimateGauge();const h=m.current.player.ultimate;if(!h.ready||h.current<h.max)return f&&f(" Ultimate not ready!"),!1;const x=this.getUltimateAbility(a);return x?(this.executeUltimate(x,i,d,f),h.current=0,h.ready=!1,m._notify(),!0):(_.log(`No ultimate ability found for character: ${a}`,"ERROR"),!1)}static getUltimateAbility(a){return{warrior:{id:"titans_wrath",name:{en:"Titan's Wrath",ar:" "},description:{en:"Deal 300% damage to all enemies + heal 30% max HP",ar:" 300%    +  30%   "},element:"fire",damageMultiplier:3,targetAll:!0,selfHeal:.3,icon:""},sorceress:{id:"elemental_cataclysm",name:{en:"Elemental Cataclysm",ar:" "},description:{en:"Deal 250% damage to all enemies, hits ALL weaknesses",ar:" 250%       "},element:"multi",damageMultiplier:2.5,targetAll:!0,hitsAllWeaknesses:!0,icon:""},rogue:{id:"shadow_assassination",name:{en:"Shadow Assassination",ar:" "},description:{en:"Deal 500% damage to single target + Death Mark (50% bonus damage for 2 turns)",ar:" 500%    +   (50%    )"},element:"shadow",damageMultiplier:5,targetAll:!1,deathMark:!0,icon:""}}[a]||null}static executeUltimate(a,i,d,f){const h=m.current.player,x=typeof a.name=="string"?a.name:a.name.en;if(f&&(f(""),f(` ${x.toUpperCase()}! `),f("")),_.log(`ULTIMATE: ${x} activated!`,"COMBAT"),(a.targetAll?m.current.enemies.filter(w=>w.isAlive):[i[0]]).forEach(w=>{if(!w||!w.isAlive)return;let R=d.calculateDamage(h,w,a.damageMultiplier);w.stats.hp=Math.max(0,w.stats.hp-R);const D=w.level?`Lv.${w.level} ${w.nameKey?v(w.nameKey):"Enemy"}`:w.nameKey?v(w.nameKey):"Enemy";if(f&&f(`${a.icon} ${D} takes ${R} damage!`),a.hitsAllWeaknesses&&w.breakData&&!w.breakData.isBroken){const{BreakSystem:C}=require("./break-system.js");w.breakData.currentToughness=0,C.breakEnemy(w,a.element,f)}a.deathMark&&(w.statusEffects=w.statusEffects||[],w.statusEffects.push({type:"death_mark",multiplier:1.5,duration:2,icon:""}),f&&f(` ${D} marked for death! (+50% damage for 2 turns)`)),w.stats.hp<=0&&d.killUnit(w)}),a.selfHeal){const w=Math.floor(h.maxStats.hp*a.selfHeal);h.stats.hp=Math.min(h.maxStats.hp,h.stats.hp+w),f&&f(` Healed ${w} HP! (${h.stats.hp}/${h.maxStats.hp})`)}f&&f(""),m._notify()}static resetUltimateGauge(){m.current.player.ultimate?(m.current.player.ultimate.current=0,m.current.player.ultimate.ready=!1,_.log("Ultimate gauge reset for new battle","COMBAT")):this.initializeUltimateGauge()}static isUltimateReady(){return this.initializeUltimateGauge(),m.current.player.ultimate.ready}static getUltimatePercentage(){this.initializeUltimateGauge();const a=m.current.player.ultimate;return Math.floor(a.current/a.max*100)}static getUltimateBarColor(){const a=this.getUltimatePercentage();return a>=100?"#ffd700":a>=67?"#ffff44":a>=34?"#ff8844":"#ff4444"}}const Qn={BASIC_ATTACK:10,USE_ABILITY:15,TAKE_DAMAGE:8,BREAK_ENEMY:25};class Of{constructor({forceUpdate:a}){this.updateCallback=a,this.onLog=()=>{}}startBattle(a,i={}){this.onLog=i.onLog||(()=>{}),m.update("battleInProgress",!0),m.current.player&&(m.current.player.isAlive=!0),cr.initializeBattle(),Nr.resetUltimateGauge();const d=m.current.currentFloor||1;a.forEach(x=>{Gn.initializeEnemyBreakData(x,d)}),this.organizeWaves(a),this.currentWave=1,this.spawnWave(1);const f=a.length,h=v("combat.messages.battleBegins",{enemies:`${f} enemies in ${this.totalWaves} waves`});_.log(h,"COMBAT"),this.onLog(h),this.calculateTurnOrder(),this.processTurn()}organizeWaves(a){if(this.allWaveEnemies=a,this.waves=[],a.length<=2)this.waves=[a];else if(a.length===3)this.waves=[a.slice(0,2),a.slice(2,3)];else{const i=Math.ceil(a.length/Math.ceil(a.length/2));for(let d=0;d<a.length;d+=i)this.waves.push(a.slice(d,d+i))}this.totalWaves=this.waves.length,_.log(`Combat organized into ${this.totalWaves} waves: ${this.waves.map(i=>i.length).join(", ")} enemies`,"COMBAT")}spawnWave(a){const i=this.waves[a-1];if(!i)return;m.current.enemies=i.map((f,h)=>({...f,originalIndex:h,isAlive:!0,statusEffects:[]}));const d=a===1?v("combat.messages.waveBegins",{wave:a,total:this.totalWaves}):v("combat.messages.waveSpawn",{wave:a,total:this.totalWaves,enemies:i.map(f=>f.level?`Lv.${f.level} ${f.nameKey?v(f.nameKey):"Enemy"}`:f.nameKey?v(f.nameKey):"Enemy").join(", ")});this.onLog(d),_.log(d,"COMBAT")}calculateTurnOrder(){const a={...m.current.player,id:"player"},i=m.current.enemies.map(d=>({...d,id:`enemy_${d.originalIndex}`}));m.current.turnOrder=[...i,a].sort((d,f)=>f.stats.spd-d.stats.spd).map(d=>d.id),m.current.currentTurnIndex=0,m.update("turnOrder",m.current.turnOrder)}isPlayerTurn(){return m.current.battleInProgress?m.current.turnOrder[m.current.currentTurnIndex]==="player":!1}playerAttack(a){if(!this.isPlayerTurn())return;const i=m.current.enemies.find(b=>b.originalIndex===a);if(!i||!i.isAlive)return;const d="physical";let f=this.calculateDamageWithElements(m.current.player,i,1,d);i.stats.hp=Math.max(0,i.stats.hp-f);const h=i.level?`Lv.${i.level} ${i.nameKey?v(i.nameKey):"Enemy"}`:i.nameKey?v(i.nameKey):"Enemy";this.onLog(v("combat.messages.youAttack",{target:h,damage:f})),Gn.dealToughnessDamage(i,d,this.onLog.bind(this)).broken&&Nr.addUltimatePoints(Qn.BREAK_ENEMY,"breaking enemy",this.onLog.bind(this)),cr.processBuffEffects("damage_dealt",{damage:f,onLog:this.onLog.bind(this)}),Nr.addUltimatePoints(Qn.BASIC_ATTACK,"basic attack",this.onLog.bind(this)),i.stats.hp<=0&&this.killUnit(i),this.updateCallback(),this.nextTurn()}playerSkill(a){if(!this.isPlayerTurn())return;const i=m.current.player,d=i.abilities[0],f=te.ABILITIES[d];if(!f){_.log(`Skill not found: ${d}`,"ERROR");return}const h=i.resource.current;if(!m.spendResource(f.cost)){const C=i.resource.nameKey?v(i.resource.nameKey):"Resource",O=typeof f.name=="object"?f.name.en:f.name;this.onLog(`Not enough ${C} for ${O}.`);return}const x=i.resource.current,b=i.resource.nameKey?v(i.resource.nameKey):"Resource",w=typeof f.name=="object"?f.name[Ve.getCurrentLanguage()]||f.name.en:f.name;this.onLog(`Used ${w} (-${f.cost} ${b})`),_.log(`[COMBAT] Resource before: ${h}, after spend: ${x}, cost: ${f.cost}`,"COMBAT"),cr.processBuffEffects("ability_used",{cost:f.cost,onLog:this.onLog.bind(this)}),this.onLog(v("combat.messages.youUseSkill",{skill:w}));const R=Lf(d);(f.target==="all"?m.current.enemies.filter(C=>C.isAlive):[m.current.enemies.find(C=>C.originalIndex===a)].filter(Boolean)).forEach(C=>{if(f.damageMultiplier){const O=this.calculateDamageWithElements(i,C,f.damageMultiplier,R);C.stats.hp=Math.max(0,C.stats.hp-O);const re=typeof f.name=="object"?f.name[Ve.getCurrentLanguage()]||f.name.en:f.name,pe=C.level?`Lv.${C.level} ${C.nameKey?v(C.nameKey):"Enemy"}`:C.nameKey?v(C.nameKey):"Enemy";this.onLog(v("combat.messages.skillHits",{skill:re,target:pe,damage:O})),Gn.dealToughnessDamage(C,R,this.onLog.bind(this)).broken&&Nr.addUltimatePoints(Qn.BREAK_ENEMY,"breaking enemy",this.onLog.bind(this)),cr.processBuffEffects("damage_dealt",{damage:O,onLog:this.onLog.bind(this)}),C.stats.hp<=0&&this.killUnit(C)}if(f.effect&&C.isAlive){const O=C.statusEffects.find(pe=>pe.type===f.effect.type);O?O.duration=f.effect.duration:C.statusEffects.push({...f.effect});const re=C.level?`Lv.${C.level} ${C.nameKey?v(C.nameKey):"Enemy"}`:C.nameKey?v(C.nameKey):"Enemy";this.onLog(v("combat.messages.targetAfflicted",{target:re,effect:f.effect.type}))}}),Nr.addUltimatePoints(Qn.USE_ABILITY,"using ability",this.onLog.bind(this)),this.updateCallback(),this.nextTurn()}playerDefend(){this.isPlayerTurn()&&(this.onLog(v("combat.messages.defensiveStance")),m.current.player.defending=!0,this.updateCallback(),this.nextTurn())}playerUltimate(a){if(!this.isPlayerTurn())return;const i=m.current.player.characterId,f=[m.current.enemies.find(x=>x.originalIndex===a)].filter(Boolean);Nr.useUltimate(i,f,this,this.onLog.bind(this))&&(this.updateCallback(),this.nextTurn())}playerFlee(){this.isPlayerTurn()&&(Math.random()<te.COMBAT.fleeChance?(this.onLog(v("combat.messages.successfulEscape")),m.current.onBattleEnd(!1,null)):(this.onLog(v("combat.messages.failedEscape")),this.updateCallback(),this.nextTurn()))}enemyAttack(a){if(Gn.shouldSkipTurn(a)){const h=a.level?`Lv.${a.level} ${a.nameKey?v(a.nameKey):"Enemy"}`:a.nameKey?v(a.nameKey):"Enemy";this.onLog(` ${h} is STUNNED! Turn skipped!`),this.updateCallback();return}const i=m.current.player;let d=this.calculateDamage(a,i);i.defending&&(d=Math.floor(d*.5),this.onLog(v("combat.messages.defenseReduced"))),i.stats.hp=Math.max(0,i.stats.hp-d);const f=a.level?`Lv.${a.level} ${a.nameKey?v(a.nameKey):"Enemy"}`:a.nameKey?v(a.nameKey):"Enemy";this.onLog(v("combat.messages.enemyAttacks",{enemy:f,damage:d})),Nr.addUltimatePoints(Qn.TAKE_DAMAGE,"taking damage",this.onLog.bind(this)),i.stats.hp<=0&&this.killUnit(i),this.updateCallback()}processTurn(){if(!m.current.battleInProgress)return;const a=this.getCurrentTurnUnit();if(!a||!a.isAlive){this.nextTurn();return}if(this.processStatusEffects(a),!a.isAlive){this.nextTurn();return}if(this.isPlayerTurn()){const i=m.current.player,d=te.COMBAT.resourceRegeneration.baseAmount,f=(m.current.level-1)*.5;let h=Math.floor(d+f);const x=cr.getModifiedResourceRegen(h),b=i.resource.current;i.resource.current=Math.min(i.resource.max,i.resource.current+x);const w=i.resource.current-b,R=i.resource.nameKey?v(i.resource.nameKey):"Resource";w>0&&(this.onLog(`[Regen] +${w} ${R} (${b}  ${i.resource.current})`),_.log(`[COMBAT] Resource regeneration: +${w} (${b}  ${i.resource.current})`,"COMBAT")),cr.processBuffEffects("turn_start",{onLog:this.onLog.bind(this)}),this.onLog(v("combat.messages.yourTurn")),m.current.player.defending=!1,this.updateCallback()}else setTimeout(()=>{a.isAlive&&m.current.battleInProgress&&this.enemyAttack(a),this.nextTurn()},800)}nextTurn(){if(!m.current.battleInProgress)return;const a=this.checkBattleEnd();if(a!==null){const i=a?m.current.enemies.map(d=>({gold:d.goldReward?Math.floor(Math.random()*(d.goldReward.max-d.goldReward.min+1))+d.goldReward.min:0,xp:d.xpReward||0})):null;m.current.onBattleEnd(a,i);return}m.current.currentTurnIndex=(m.current.currentTurnIndex+1)%m.current.turnOrder.length,m.update("currentTurnIndex",m.current.currentTurnIndex),m.current.turnOrder.length>0&&this.processTurn()}checkBattleEnd(){const a=m.current.enemies.every(d=>!d.isAlive),i=m.current.player.stats.hp<=0;return a?this.currentWave<this.totalWaves?(this.onLog(v("combat.messages.waveCleared",{wave:this.currentWave,next:this.currentWave+1})),m.awardSouls(1,`Clearing wave ${this.currentWave}`),setTimeout(()=>{this.currentWave++,this.spawnWave(this.currentWave),this.calculateTurnOrder(),this.processTurn(),this.updateCallback()},1500),null):(this.onLog(v("combat.messages.allEnemiesDefeated")),m.update("battleInProgress",!1),!0):i?(this.onLog(v("combat.messages.youDefeated")),m.update("battleInProgress",!1),!1):null}killUnit(a){if(a.isAlive=!1,a.id==="player")this.onLog(v("combat.messages.youDefeated"));else{const i=a.level?`Lv.${a.level} ${a.nameKey?v(a.nameKey):"Enemy"}`:a.nameKey?v(a.nameKey):"Enemy";this.onLog(v("combat.messages.unitDefeated",{unit:i})),m.awardSouls(3,`Defeating ${i}`)}this.updateCallback()}processStatusEffects(a){a.statusEffects||(a.statusEffects=[]);const i=[];a.statusEffects.forEach(d=>{if(d.type==="poison"){const f=d.damage;a.stats.hp=Math.max(0,a.stats.hp-f);const h=a.nameKey?v(a.nameKey):a.id==="player"?"Player":"Enemy";this.onLog(v("combat.messages.poisonDamage",{unit:h,damage:f})),a.stats.hp<=0&&this.killUnit(a)}if(d.duration--,d.duration>0)i.push(d);else{const f=a.nameKey?v(a.nameKey):a.id==="player"?"Player":"Enemy";this.onLog(v("combat.messages.statusWoreOff",{unit:f,effect:d.type}))}}),a.statusEffects=i}getCurrentTurnUnit(){const a=m.current.turnOrder[m.current.currentTurnIndex];if(a==="player")return m.current.player;const i=parseInt(a.split("_")[1]);return m.current.enemies.find(d=>d.originalIndex===i)}instantWin(){m.current.battleInProgress&&(_.log("DEBUG: Instantly winning battle.","SYSTEM"),m.current.enemies.forEach(a=>{a.stats.hp=0,a.isAlive=!1}),this.updateCallback(),this.nextTurn())}calculateDamage(a,i,d=1){if(i.id==="player"&&m.current.godMode)return _.log("GOD MODE: Player takes 0 damage.","SYSTEM"),0;if(a.id==="player"&&m.current.godMode)return _.log("GOD MODE: Player deals 9999 damage.","SYSTEM"),9999;let f=a.stats.atk;const h=i.stats.def;let x=f*f/(f+h);x<1&&(x=1);let b=Math.floor(x*d);return Math.random()*100<a.stats.crit&&(b=Math.floor(b*te.COMBAT.baseCritMultiplier),this.onLog(v("combat.messages.criticalHit"))),Math.max(1,b)}calculateDamageWithElements(a,i,d=1,f="physical"){let h=this.calculateDamage(a,i,d);if(i.breakData){const b=If(f,i.breakData.weaknesses,i.breakData.resistances);h=Math.floor(h*b),b>1?this.onLog(` Weakness hit! (${b}x damage)`):b<1&&this.onLog(` Resisted! (${b}x damage)`)}const x=Gn.getBrokenMultiplier(i);return x>1&&(h=Math.floor(h*x),this.onLog(" BONUS DAMAGE! (Enemy is broken!)")),Math.max(1,h)}}class Df{constructor({getSystem:a}){this.getSystem=a}init(){_.log("InventorySystem initialized.","SYSTEM")}getRandomRarity(){const a=Math.random()*100;let i=0;for(const d in te.RARITIES)if(i+=te.RARITIES[d].chance,a<i)return{id:d,...te.RARITIES[d]};return{id:"common",...te.RARITIES.common}}generateItem(a=1){const i=Object.keys(te.ITEM_TYPES).filter(w=>!te.ITEM_TYPES[w].consumable),d=i[Math.floor(Math.random()*i.length)],f=te.ITEM_TYPES[d],h=this.getRandomRarity(),x={id:`item_${Date.now()}_${Math.random()}`,baseType:d,nameKey:`items.${d}`,slot:f.slot,rarity:h.id,stats:{...f.baseStats}},b=h.statMult+(a-1)*.1;for(const w in x.stats)x.stats[w]=Math.ceil(x.stats[w]*b);if(Math.random()<.3){const w=Math.floor(Math.random()*te.ITEM_PREFIXES.length),R=te.ITEM_PREFIXES[w];x.prefixKey=w===0?"prefixes.sturdy":"prefixes.sharp";for(const D in R.statMod)x.stats[D]=(x.stats[D]||0)+R.statMod[D]}return x.price=10*h.statMult+a*5,x.price=Math.floor(x.price),_.log(`Generated item: ${x.nameKey} (Rarity: ${h.id})`,"INVENTORY"),x}generateItemsForShop(a=3,i=1){return Array.from({length:a},()=>this.generateItem(i))}}function Af({onLanguageSelected:c}){const[a,i]=Z.useState("en"),[d,f]=Z.useState(!1);Z.useEffect(()=>{const b=()=>{Ve.isReady()?(f(!0),i(Ve.getCurrentLanguage())):setTimeout(b,100)};b()},[]);const h=b=>{i(b),_.log(`Language selected: ${b}`,"UI")},x=()=>{Ve.setLanguage(a),_.log(`Language confirmed and applied: ${a}`,"SYSTEM"),c(a)};return d?o.jsx("div",{className:"h-full bg-rpg-radial text-rpg-text flex items-center justify-center px-4",children:o.jsxs("div",{className:"bg-rpg-bg-darker border-2 border-rpg-primary rounded-lg p-8 max-w-md w-full text-center shadow-2xl backdrop-blur-sm",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-rpg-primary mb-4",children:""}),o.jsx("h2",{className:"text-2xl font-bold mb-2",children:Ve.get("language.select")}),o.jsx("div",{className:"text-lg text-rpg-text opacity-80",children:"Select Language /  "})]}),o.jsxs("div",{className:"space-y-4 mb-8",children:[o.jsxs("button",{onClick:()=>h("en"),className:`w-full p-4 rounded-lg text-xl font-bold transition-all duration-200 flex items-center justify-center gap-3 ${a==="en"?"bg-rpg-primary border-2 border-rpg-secondary text-rpg-text shadow-lg scale-105":"bg-rpg-secondary border-2 border-rpg-primary text-rpg-text opacity-80 hover:bg-rpg-primary hover:opacity-100"}`,children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{children:"English"}),a==="en"&&o.jsx("span",{className:"text-uncommon",children:""})]}),o.jsxs("button",{onClick:()=>h("ar"),className:`w-full p-4 rounded-lg text-xl font-bold transition-all duration-200 flex items-center justify-center gap-3 ${a==="ar"?"bg-rpg-primary border-2 border-rpg-secondary text-rpg-text shadow-lg scale-105":"bg-rpg-secondary border-2 border-rpg-primary text-rpg-text opacity-80 hover:bg-rpg-primary hover:opacity-100"}`,dir:"rtl",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{children:""}),a==="ar"&&o.jsx("span",{className:"text-uncommon",children:""})]})]}),o.jsxs("button",{onClick:x,className:"w-full bg-uncommon hover:bg-rare text-rpg-text font-bold py-3 px-6 rounded-lg text-xl transition-all duration-200 transform hover:scale-105 shadow-lg",children:[Ve.get("language.confirm")," / "]}),o.jsxs("div",{className:"mt-6 text-sm text-rpg-text opacity-60",children:["You can change this later in settings",o.jsx("br",{}),"     "]})]})}):o.jsx("div",{className:"h-full bg-rpg-radial text-rpg-text flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-4",children:""}),o.jsx("div",{className:"text-lg text-rpg-text opacity-80",children:"Loading..."})]})})}const qn={DEBOUNCE_MS:3e4,MIN_INTERVAL_MS:5e3,STORAGE_KEY:"pathOfHeroes_autosave_metadata"},sn={FLOOR_COMPLETE:"floor_complete",BOSS_DEFEAT:"boss_defeat",PLAYER_DEATH:"player_death",MANUAL:"manual"};class Ff{constructor(){this.lastSaveTimestamp=null,this.pendingSave=!1,this.saveTimer=null,this.observers={saveStart:[],saveComplete:[],saveError:[]}}shouldAutoSave(a,i){if(a===sn.PLAYER_DEATH||a===sn.MANUAL)return!0;if(!m.current.selectedCharacter)return _.log("Cannot auto-save: No character selected","ERROR"),!1;const d=Date.now();if(this.lastSaveTimestamp){const f=d-this.lastSaveTimestamp;if(f<qn.MIN_INTERVAL_MS||a!==sn.BOSS_DEFEAT&&f<qn.DEBOUNCE_MS)return!1}return!0}async performAutoSave(a){const i=m.current.selectedCharacter,d=m.getCurrentSaveSlot();return!i||!d?(_.log("Cannot auto-save: Missing character or slot info","ERROR"),this._notifyError(new Error("Missing character or slot")),!1):!this.shouldAutoSave(a,m.current.currentFloor)||this.pendingSave?!1:(this.pendingSave=!0,this._notifySaveStart(),new Promise(f=>{const h=()=>{try{m.saveGame(i,d)?(this.lastSaveTimestamp=Date.now(),this._saveMetadata(a,m.current.currentFloor),this._notifySaveComplete(),_.log(`Auto-save completed: ${a} (Floor ${m.current.currentFloor})`,"SYSTEM"),f(!0)):(this._notifyError(new Error("Save failed")),_.log(`Auto-save failed: ${a}`,"ERROR"),f(!1))}catch(x){this._notifyError(x),_.log(`Auto-save error: ${x.message}`,"ERROR"),f(!1)}finally{this.pendingSave=!1}};"requestIdleCallback"in window?requestIdleCallback(h,{timeout:2e3}):setTimeout(h,0)}))}getTimeSinceLastSave(){return this.lastSaveTimestamp?Date.now()-this.lastSaveTimestamp:null}getLastSaveMetadata(){try{const a=localStorage.getItem(qn.STORAGE_KEY);if(a)return JSON.parse(a)}catch(a){_.log(`Failed to load auto-save metadata: ${a.message}`,"ERROR")}return null}subscribe(a,i){if(this.observers[a])this.observers[a].push(i);else return _.log(`Unknown auto-save event: ${a}`,"ERROR"),()=>{};return()=>{this.observers[a]=this.observers[a].filter(d=>d!==i)}}clearTimer(){this.saveTimer&&(clearTimeout(this.saveTimer),this.saveTimer=null)}reset(){this.clearTimer(),this.pendingSave=!1,this.lastSaveTimestamp=null}_notifySaveStart(){this.observers.saveStart.forEach(a=>{try{a()}catch(i){_.log(`Error in saveStart callback: ${i.message}`,"ERROR")}})}_notifySaveComplete(){this.observers.saveComplete.forEach(a=>{try{a()}catch(i){_.log(`Error in saveComplete callback: ${i.message}`,"ERROR")}})}_notifyError(a){this.observers.saveError.forEach(i=>{try{i(a)}catch(d){_.log(`Error in saveError callback: ${d.message}`,"ERROR")}})}_saveMetadata(a,i){try{const d={lastSaveTimestamp:this.lastSaveTimestamp,trigger:a,floor:i,character:m.current.selectedCharacter,version:te.GAME_VERSION};localStorage.setItem(qn.STORAGE_KEY,JSON.stringify(d))}catch(d){_.log(`Failed to save auto-save metadata: ${d.message}`,"ERROR")}}_loadMetadata(){try{const a=localStorage.getItem(qn.STORAGE_KEY);if(a){const i=JSON.parse(a);this.lastSaveTimestamp=i.lastSaveTimestamp||null,te.DEBUG_MODE}}catch(a){_.log(`Failed to load auto-save metadata: ${a.message}`,"ERROR")}}}const rn=new Ff;rn._loadMetadata();_.log("autosave.js: Module loaded.","SYSTEM");function zf({player:c,enemies:a,combatSystem:i,combatLog:d}){const[f,h]=Z.useState(d||[]),[x,b]=Z.useState([]),[w,R]=Z.useState([]),[D,C]=Z.useState(()=>{const M=a.find(le=>le.isAlive);return M?M.originalIndex:null});Z.useEffect(()=>{const M=m.current.enemies,le=M.find(fe=>fe.originalIndex===D);if(!le||!le.isAlive){const fe=M.find(I=>I.isAlive),ie=fe?fe.originalIndex:null;D!==ie&&(_.log(`Target defeated or invalid. Auto-targeting next enemy: index ${ie}.`,"UI"),C(ie))}},[d,D]),Z.useEffect(()=>{if(h(d),d&&d.length>0){const M=d[d.length-1];if(M){O(M);const le=M.match(/(\d+)\s*damage/i),fe=/critical/i.test(M)||//i.test(M);if(le&&D!==null){const I=parseInt(le[1],10);re(D,I,fe?"crit":"damage")}const ie=M.match(/heal(?:ed)?\s*(\d+)/i);ie&&parseInt(ie[1],10)}}},[d,D]);const O=(M,le=2e3)=>{const fe=Date.now()+Math.random(),ie={id:fe,text:M,timestamp:Date.now()};b(I=>[...I,ie].slice(-3)),setTimeout(()=>{b(I=>I.filter(Y=>Y.id!==fe))},le)},re=(M,le,fe="damage")=>{const ie=Date.now()+Math.random(),I={id:ie,entityId:M,value:le,type:fe,timestamp:Date.now()};R(Y=>[...Y,I]),setTimeout(()=>{R(Y=>Y.filter(F=>F.id!==ie))},1500)},pe=()=>{D!==null&&i.playerAttack(D)},A=()=>{D!==null&&i.playerSkill(D)},Q=M=>{if(!V)return;if(cc.usePotion(M)){const fe=v(`items.${M}`),ie=v("combat.messages.usedPotion",{potion:fe});_.log(ie,"COMBAT"),h(I=>[...I,ie])}},Ne=M=>{if(!M||!M.stats)return 0;const le=M.maxStats?.hp||M.stats.hp||1;return Math.max(0,M.stats.hp/le*100)},Ge=M=>!M||!M.resource?0:Math.max(0,M.resource.current/M.resource.max*100),Re=M=>{switch(M?v(M):""){case"Vigor":case"":return"bg-vigor-full";case"Mana":case"":return"bg-mana-full";case"Energy":case"":return"bg-energy-full";default:return"bg-common"}},U=M=>{switch(M?v(M):""){case"Vigor":case"":return"bg-vigor-empty";case"Mana":case"":return"bg-mana-empty";case"Energy":case"":return"bg-energy-empty";default:return"bg-common"}},ne=()=>{const M=m.current.level,le=m.current.experience||0;if(M>=te.XP_CURVE.maxLevel)return{percentage:100,current:"MAX",required:"LEVEL"};const fe=m.getRequiredExperience(M-1),I=m.getRequiredExperience(M)-fe,Y=le-fe;return{percentage:I===0?0:Math.max(0,Math.min(100,Y/I*100)),current:Math.max(0,Y),required:I}},V=i.isPlayerTurn(),xe=c?te.ABILITIES[c.abilities[0]]:null,je=ne(),ze=m.current.enemies||[],ft=ze.filter(M=>M.isAlive),me=ze.find(M=>M.originalIndex===D),Ae=ze.filter(M=>M.isAlive&&M.originalIndex!==D),Qe=Ve.getCurrentLanguage();return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translateY(20px); }
                    15% { opacity: 1; transform: translateY(0); }
                    85% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-10px); }
                }
                .feedback-message {
                    animation: fadeInOut 2s ease-in-out forwards;
                }

                @keyframes floatUp {
                    0% {
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                    50% {
                        transform: translateY(-30px) scale(1.2);
                    }
                    100% {
                        opacity: 0;
                        transform: translateY(-60px) scale(0.8);
                    }
                }
                .floating-number {
                    animation: floatUp 1.5s ease-out forwards;
                    pointer-events: none;
                    font-weight: bold;
                    text-shadow: 0 0 10px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
                }
            `}),o.jsx("div",{className:"h-full bg-rpg-radial text-rpg-text p-4 flex flex-col overflow-y-auto",children:o.jsxs("div",{className:"w-full max-w-3xl mx-auto flex flex-col flex-grow min-h-0",children:[o.jsxs("div",{className:"text-center mb-4 flex-shrink-0",children:[o.jsxs("h1",{className:"text-2xl font-bold text-rpg-primary",children:[" ",v("combat.battle")," "]}),(i.totalWaves>1||ze.length>1)&&o.jsx("div",{className:"inline-block bg-rpg-secondary border border-rpg-primary rounded-full px-3 py-1 text-sm text-rpg-primary font-semibold mb-2",children:i.totalWaves>1?o.jsxs(o.Fragment,{children:[" Wave ",i.currentWave,"/",i.totalWaves]}):o.jsxs(o.Fragment,{children:[" ",v("combat.messages.enemiesRemaining",{alive:ft.length,total:ze.length})]})}),o.jsx("p",{className:"text-lg text-rpg-text opacity-80",children:V?v("combat.playerTurn",{player:c?.nameKey?v(c.nameKey):"Player"}):v("combat.enemyTurn")})]}),o.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4",children:[o.jsxs("div",{className:"bg-rpg-bg-darker bg-opacity-80 p-4 rounded-lg border border-rpg-primary backdrop-blur-sm",children:[o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsx("div",{className:"flex-shrink-0 w-24 h-24 bg-rpg-bg-darkest rounded-lg flex items-center justify-center text-5xl border-2 border-uncommon",children:""}),o.jsxs("div",{className:"flex-grow min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("h2",{className:"text-xl font-bold text-uncommon truncate",children:[c?.nameKey?v(c.nameKey):"Player"," (",v("stats.level")," ",m.current.level,")"]}),o.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c?.defending&&o.jsx("div",{className:"text-sm bg-rare bg-opacity-50 border border-rare rounded-full px-2 py-0.5",children:" Defending"}),c?.statusEffects?.map((M,le)=>o.jsxs("div",{className:"text-sm bg-health-dark bg-opacity-50 border border-health-mid rounded-full px-2 py-0.5",children:[M.icon," ",M.duration]},le))]})]}),o.jsx("div",{className:"h-4 bg-health-empty rounded overflow-hidden mb-1",children:o.jsx("div",{className:"h-4 bg-health-full",style:{width:`${Ne(c)}%`}})}),o.jsxs("div",{className:"text-sm text-right text-rpg-text opacity-80 mb-2",children:[v("stats.hpShort"),": ",c?.stats.hp," / ",c?.maxStats.hp]}),o.jsx("div",{className:`h-4 rounded overflow-hidden mb-1 ${U(c?.resource?.nameKey)}`,children:o.jsx("div",{className:`h-4 ${Re(c?.resource?.nameKey)}`,style:{width:`${Ge(c)}%`}})}),o.jsxs("div",{className:"text-sm text-right text-rpg-text opacity-80",children:[c?.resource?.nameKey?v(c.resource.nameKey):"Resource",": ",c?.resource.current," / ",c?.resource.max]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-2 text-sm text-rpg-text opacity-70",children:[o.jsxs("span",{children:[" ",c?.stats.atk]})," ",o.jsxs("span",{children:[" ",c?.stats.def]})," ",o.jsxs("span",{children:[" ",c?.stats.spd]})," ",o.jsxs("span",{children:[" ",c?.stats.crit,"%"]})]})]})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"h-4 bg-rpg-bg-darkest rounded overflow-hidden mb-1",children:o.jsx("div",{className:"h-4 bg-mana-light",style:{width:`${je.percentage}%`}})}),o.jsxs("div",{className:"text-sm text-right text-mana-light",children:[v("stats.xpShort"),": ",je.current," / ",je.required]})]}),m.current.battleBuffs&&m.current.battleBuffs.length>0&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-rpg-secondary",children:[o.jsxs("h3",{className:"text-sm font-bold text-rpg-primary mb-2",children:[" ",v("combat.activeBuffs")]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:m.current.battleBuffs.map((M,le)=>o.jsxs("div",{className:"bg-legendary bg-opacity-20 border border-legendary rounded-lg px-3 py-1.5 text-sm",title:typeof M.description=="object"?M.description[Ve.getCurrentLanguage()]:M.description,children:[o.jsx("span",{className:"text-lg mr-1",children:M.icon}),o.jsx("span",{className:"font-bold text-legendary",children:typeof M.name=="object"?M.name[Ve.getCurrentLanguage()]:M.name})]},le))})]})]}),Ae.map(M=>o.jsxs("button",{onClick:()=>C(M.originalIndex),className:"w-full bg-rpg-secondary bg-opacity-30 hover:bg-rpg-secondary hover:bg-opacity-50 rounded-lg p-2 border border-rpg-secondary text-left flex items-center text-sm transition-all",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-rpg-bg-darkest flex items-center justify-center mr-3 text-lg",children:M.isAlive?"":""}),o.jsxs("div",{className:"flex-grow text-rpg-text font-semibold",children:[M.prefixKey?`${v(M.prefixKey)} `:"",M.nameKey?v(M.nameKey):M.id||"Enemy"," ",M.level?`(${v("stats.level")} ${M.level})`:""]}),o.jsx("div",{className:"w-1/3 h-3 bg-health-empty rounded-full overflow-hidden mr-2",children:o.jsx("div",{className:"h-3 bg-health-full",style:{width:`${Ne(M)}%`}})}),o.jsxs("div",{className:"text-rpg-text opacity-70 text-right w-20",children:[M.stats.hp," / ",M.maxStats.hp]})]},M.originalIndex)),me&&o.jsxs("div",{className:`relative bg-rpg-bg-darker bg-opacity-80 p-4 rounded-lg border-2 backdrop-blur-sm ${me.isAlive?"border-legendary":"border-rpg-secondary opacity-60"}`,children:[w.filter(M=>M.entityId===me.originalIndex).map(M=>{const le=()=>{switch(M.type){case"crit":return{color:"#ffff00",fontSize:"2.5rem"};case"heal":return{color:"#44ff44",fontSize:"2rem"};case"miss":return{color:"#999999",fontSize:"1.5rem"};default:return{color:"#ff4444",fontSize:"2rem"}}};return o.jsxs("div",{className:"floating-number absolute top-4 left-1/2 transform -translate-x-1/2 z-50",style:le(),children:[M.type==="heal"?"+":M.type==="miss"?"MISS":"-",M.type!=="miss"&&M.value]},M.id)}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsx("div",{className:"flex-shrink-0 w-24 h-24 bg-rpg-bg-darkest rounded-lg flex items-center justify-center text-5xl border-2 border-health-dark",children:me.isAlive?"":""}),o.jsxs("div",{className:"flex-grow min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("h2",{className:"text-xl font-bold text-health-mid truncate",children:[me.prefixKey?`${v(me.prefixKey)} `:"",me.nameKey?v(me.nameKey):me.id||"Enemy"," ",me.level?`(${v("stats.level")} ${me.level})`:""]}),o.jsx("div",{className:"flex gap-2 flex-shrink-0",children:me.statusEffects?.map((M,le)=>o.jsxs("div",{className:"text-sm bg-epic bg-opacity-50 border border-epic rounded-full px-2 py-0.5",children:[M.icon," ",M.duration]},le))})]}),o.jsx("div",{className:"h-4 bg-health-empty rounded overflow-hidden mb-1",children:o.jsx("div",{className:"h-4 bg-health-full",style:{width:`${Ne(me)}%`}})}),o.jsxs("p",{className:"text-sm text-right text-rpg-text opacity-80",children:[v("stats.hpShort"),": ",me.stats.hp," / ",me.maxStats.hp]}),o.jsxs("div",{className:"flex justify-end gap-4 mt-2 text-sm text-rpg-text opacity-70",children:[o.jsxs("span",{children:[" ",me.stats.atk]})," ",o.jsxs("span",{children:[" ",me.stats.def]})," ",o.jsxs("span",{children:[" ",me.stats.spd]})," ",o.jsxs("span",{children:[" ",me.stats.crit,"%"]})]})]})]})]})]}),o.jsxs("div",{className:"mt-auto flex-shrink-0 pt-4",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-2",children:[o.jsxs("button",{onClick:pe,disabled:!V||!me?.isAlive,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V&&me?.isAlive?"bg-rpg-primary hover:bg-legendary":"bg-rpg-secondary bg-opacity-50 opacity-50 cursor-not-allowed"}`,children:[" ",v("combat.attack")]}),xe?o.jsx("button",{onClick:A,disabled:!V||c.resource.current<xe.cost||!me?.isAlive,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V&&c.resource.current>=xe.cost&&me?.isAlive?"bg-epic hover:bg-mythic":"bg-rpg-secondary bg-opacity-50 opacity-50 cursor-not-allowed"}`,children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{children:xe.name?typeof xe.name=="object"?xe.name[Qe]||xe.name.en:xe.name:v("combat.skill")}),o.jsxs("span",{className:"text-xs opacity-75",children:["Cost: ",xe.cost]})]})}):o.jsxs("button",{disabled:!0,className:"px-2 py-2 text-sm rounded font-bold bg-rpg-secondary bg-opacity-50 text-rpg-text opacity-50 cursor-not-allowed",children:[" ",v("combat.noSkill")]}),o.jsxs("button",{onClick:()=>i.playerDefend(),disabled:!V,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V?"bg-rpg-secondary hover:bg-rpg-primary":"bg-rpg-secondary bg-opacity-50 cursor-not-allowed"}`,children:[" ",v("combat.defend")]}),o.jsxs("button",{onClick:()=>i.playerFlee(),disabled:!V,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V?"bg-health-full hover:bg-health-mid":"bg-rpg-secondary bg-opacity-50 cursor-not-allowed"}`,children:[" ",v("combat.flee")]})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-1 mb-4",children:[o.jsxs("button",{onClick:()=>Q("hp_potion"),disabled:!V||!m.current.potions?.hp_potion||m.current.potions.hp_potion<=0,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V&&m.current.potions?.hp_potion>0?"bg-health-full hover:bg-health-mid":"bg-rpg-secondary bg-opacity-50 opacity-50 cursor-not-allowed"}`,children:[" HP (",m.current.potions?.hp_potion||0,")"]}),o.jsxs("button",{onClick:()=>Q("resource_potion"),disabled:!V||!m.current.potions?.resource_potion||m.current.potions.resource_potion<=0,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V&&m.current.potions?.resource_potion>0?"bg-mana-full hover:bg-mana-light":"bg-rpg-secondary bg-opacity-50 opacity-50 cursor-not-allowed"}`,children:[" MP (",m.current.potions?.resource_potion||0,")"]}),o.jsxs("button",{onClick:()=>Q("greater_hp_potion"),disabled:!V||!m.current.potions?.greater_hp_potion||m.current.potions.greater_hp_potion<=0,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V&&m.current.potions?.greater_hp_potion>0?"bg-legendary hover:bg-mythic":"bg-rpg-secondary bg-opacity-50 opacity-50 cursor-not-allowed"}`,children:[" G.HP (",m.current.potions?.greater_hp_potion||0,")"]}),o.jsxs("button",{onClick:()=>Q("elixir_of_vitality"),disabled:!V||!m.current.potions?.elixir_of_vitality||m.current.potions.elixir_of_vitality<=0,className:`px-2 py-2 text-sm rounded font-bold transition-colors text-rpg-text ${V&&m.current.potions?.elixir_of_vitality>0?"bg-epic hover:bg-legendary":"bg-rpg-secondary bg-opacity-50 opacity-50 cursor-not-allowed"}`,children:[" Elixir (",m.current.potions?.elixir_of_vitality||0,")"]})]}),o.jsxs("div",{className:"relative h-16 flex items-center justify-center overflow-hidden",children:[x.map((M,le)=>o.jsx("div",{className:"feedback-message absolute text-center text-base font-bold px-4 py-2 bg-black bg-opacity-60 rounded-lg backdrop-blur-sm border border-rpg-primary",style:{zIndex:x.length-le,color:"#f8e4c0"},children:M.text},M.id)),x.length===0&&o.jsx("div",{className:"text-rpg-text opacity-30 italic text-sm",children:v(V?"combat.chooseAction":"combat.enemyThinking")})]})]})]})})]})}const al={UNIQUE_REWARD_CHANCE:.25,PREFERRED_ITEM_WEIGHT:2.5,RARITY_BOOST_CHANCE:.15,GOLD_VARIANCE:.2},ac={heavy_armor:{slot:"chest",baseStats:{def:8,hp:10},nameKey:"items.heavy_armor",icon:""},shields:{slot:"weapon",baseStats:{def:6,atk:4},nameKey:"items.shield",icon:""},staves:{slot:"weapon",baseStats:{atk:10,crit:3},nameKey:"items.staff",icon:""},mana_crystals:{slot:"head",baseStats:{atk:5,spd:2},nameKey:"items.mana_crystal",icon:""},daggers:{slot:"weapon",baseStats:{atk:8,spd:4,crit:5},nameKey:"items.dagger",icon:""},poisons:{slot:null,consumable:!0,nameKey:"items.poison_vial",icon:"",effect:"poison",value:12}};class Uf{constructor(){this.currentCharacterId=null,this.characterConfig=null}initialize(a){const i=a.toUpperCase();return this.characterConfig=ln[i],this.characterConfig?(this.currentCharacterId=a,_.log(`RewardService: Initialized for ${a}`,"SYSTEM"),!0):(_.log(`RewardService: Invalid character ID: ${a}`,"ERROR"),!1)}getUniqueRewardTypes(){return this.characterConfig?this.characterConfig.uniqueRewards||[]:[]}isPreferredItemType(a){if(this.getUniqueRewardTypes().includes(a))return!0;const d=ac[a]||te.ITEM_TYPES[a];return d?this.currentCharacterId==="warrior"?d.slot==="chest"||a.includes("shield"):this.currentCharacterId==="sorceress"?d.slot==="weapon"||a.includes("staff")||a.includes("mana"):this.currentCharacterId==="rogue"?d.slot==="weapon"||a.includes("dagger")||a.includes("poison"):!1:!1}getRandomRarity(a=1){const i=Math.random()*100;let d=0;const f=Math.min(a*.5,15);for(const h in te.RARITIES){const x=te.RARITIES[h];let b=x.chance;if(h!=="common"&&h!=="uncommon"&&(b+=f),d+=b,i<d)return{id:h,...x}}return{id:"common",...te.RARITIES.common}}boostRarity(a){const i=["common","uncommon","rare","epic","mythic","legendary"],d=i.indexOf(a);return d===-1||d>=i.length-1?a:i[d+1]}generateItem(a=1){if(!this.characterConfig)return _.log("RewardService: Not initialized, using default generation","ERROR"),this._generateDefaultItem(a);const i=this.getUniqueRewardTypes();let d=null,f=null;if(Math.random()<al.UNIQUE_REWARD_CHANCE&&i.length>0){const w=i[Math.floor(Math.random()*i.length)];f=ac[w],d=w}if(!f){const w=Object.keys(te.ITEM_TYPES).filter(D=>!te.ITEM_TYPES[D].consumable),R=[];w.forEach(D=>{const C=this.isPreferredItemType(D)?al.PREFERRED_ITEM_WEIGHT:1,O=Math.floor(C*10);for(let re=0;re<O;re++)R.push(D)}),d=R[Math.floor(Math.random()*R.length)],f=te.ITEM_TYPES[d]}let h=this.getRandomRarity(a);if(this.isPreferredItemType(d)&&Math.random()<al.RARITY_BOOST_CHANCE){const w=this.boostRarity(h.id);h={id:w,...te.RARITIES[w]}}const x={id:`item_${Date.now()}_${Math.random()}`,baseType:d,nameKey:f.nameKey||`items.${d}`,slot:f.slot,rarity:h.id,stats:{...f.baseStats}},b=h.statMult+(a-1)*.1;for(const w in x.stats)x.stats[w]=Math.ceil(x.stats[w]*b);if(Math.random()<.3){const w=Math.floor(Math.random()*te.ITEM_PREFIXES.length),R=te.ITEM_PREFIXES[w];x.prefixKey=w===0?"prefixes.sturdy":"prefixes.sharp";for(const D in R.statMod)x.stats[D]=(x.stats[D]||0)+R.statMod[D]}return x.price=10*h.statMult+a*5,x.price=Math.floor(x.price),_.log(`RewardService: Generated ${d} (${h.id}) for ${this.currentCharacterId}`,"SYSTEM"),x}generateItemsForShop(a=3,i=1){return Array.from({length:a},()=>this.generateItem(i))}calculateGoldReward(a,i=1){const d=1+(Math.random()*2-1)*al.GOLD_VARIANCE,f=Math.floor(a*d);return Math.max(1,f)}_generateDefaultItem(a){const i=Object.keys(te.ITEM_TYPES).filter(w=>!te.ITEM_TYPES[w].consumable),d=i[Math.floor(Math.random()*i.length)],f=te.ITEM_TYPES[d],h=this.getRandomRarity(a),x={id:`item_${Date.now()}_${Math.random()}`,baseType:d,nameKey:`items.${d}`,slot:f.slot,rarity:h.id,stats:{...f.baseStats}},b=h.statMult+(a-1)*.1;for(const w in x.stats)x.stats[w]=Math.ceil(x.stats[w]*b);return x.price=10*h.statMult+a*5,x.price=Math.floor(x.price),x}reset(){this.currentCharacterId=null,this.characterConfig=null,_.log("RewardService: Reset","SYSTEM")}}const il=new Uf;_.log("reward-service.js: Module loaded.","SYSTEM");const Bf={common:"text-common",uncommon:"text-uncommon",rare:"text-rare",epic:"text-epic",mythic:"text-mythic",legendary:"text-legendary"};function Kf({inventorySystem:c,onLeave:a}){const[i,d]=Z.useState(()=>m.current.selectedCharacter&&il.currentCharacterId?il.generateItemsForShop(3,m.current.currentFloor):c.generateItemsForShop(3,m.current.currentFloor)),[f,h]=Z.useState(!1),[x,b]=Z.useState({}),w=R=>{if(!f)if(m.current.gold>=R.price){m.spendGold(R.price),m.current.inventory.push(R);const D=(R.prefixKey?`${v(R.prefixKey)} `:"")+v(R.nameKey||"items.sword");_.log(`Purchased ${D} for ${R.price} gold.`,"PLAYER"),h(!0),setTimeout(()=>{a()},1e3)}else{const D=(R.prefixKey?`${v(R.prefixKey)} `:"")+v(R.nameKey||"items.sword");_.log(`Not enough gold to purchase ${D}.`,"PLAYER"),b(C=>({...C,[R.id]:v("shop.notEnoughGold")})),setTimeout(()=>{b(C=>{const O={...C};return delete O[R.id],O})},2e3)}};return o.jsx("div",{className:"fixed inset-0 bg-rpg-bg-darkest/90 flex items-center justify-center z-[100] p-4",children:o.jsxs("div",{className:"bg-rpg-bg-darker border-2 border-rpg-primary rounded-lg p-6 max-w-sm w-full text-center shadow-2xl backdrop-blur-sm",children:[o.jsxs("h1",{className:"text-4xl font-bold mb-6 text-rpg-primary",children:[" ",v("shop.title")]}),o.jsx("div",{className:"mb-4 bg-rpg-secondary rounded-lg p-3 border border-rpg-primary",children:o.jsxs("div",{className:"text-xl font-bold text-legendary",children:[" ",m.current.gold," ",v("stats.gold")]})}),o.jsx("p",{className:"text-rpg-text opacity-70 mb-6",children:v("shop.onePurchaseOnly")}),o.jsx("div",{className:"space-y-4 mb-8",children:i.map(R=>o.jsxs("div",{className:"bg-rpg-bg-darkest bg-opacity-80 p-4 rounded-lg text-left backdrop-blur-sm",children:[o.jsxs("h2",{className:`font-bold text-lg ${Bf[R.rarity]}`,children:[R.prefixKey?`${v(R.prefixKey)} `:"",v(R.nameKey||"items.sword")]}),o.jsxs("p",{className:"text-sm text-rpg-text opacity-60 capitalize",children:[v(`rarities.${R.rarity}`)," ",R.slot]}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsx("div",{className:"text-rpg-text opacity-80",children:Object.entries(R.stats).map(([D,C])=>o.jsxs("span",{className:"mr-4",children:[D.toUpperCase(),": +",C]},D))}),o.jsx("button",{onClick:()=>w(R),disabled:f||m.current.gold<R.price,className:`font-bold py-2 px-4 rounded transition-colors ${x[R.id]?"bg-health-full text-white":"bg-uncommon hover:bg-rare disabled:bg-rpg-secondary disabled:bg-opacity-50 disabled:cursor-not-allowed text-rpg-text"}`,"data-item-id":R.id,children:x[R.id]||`${R.price} G`})]})]},R.id))}),f?o.jsx("p",{className:"text-uncommon",children:v("shop.thankYou")}):o.jsx("button",{onClick:a,className:"w-full bg-health-full hover:bg-health-mid text-rpg-text font-bold py-2 px-4 rounded-lg",children:v("shop.leave")})]})})}function Hf({victory:c,results:a,onContinue:i}){_.log(`Rendering OutcomeScreen. Victory: ${c}`,"UI");const d=m.current.currentRunSouls,f=v(c?"combat.victory":"combat.defeat"),h=c?"text-uncommon":"text-health-full";return o.jsx("div",{className:"fixed inset-0 bg-rpg-bg-darkest/90 flex items-center justify-center z-[100] p-4",children:o.jsxs("div",{className:"bg-rpg-bg-darker border-2 border-rpg-primary rounded-lg p-8 max-w-sm w-full text-center shadow-2xl backdrop-blur-sm",children:[o.jsx("h1",{className:`text-4xl font-bold mb-6 ${h}`,children:f}),c&&o.jsxs("div",{className:"space-y-3 text-lg mb-8",children:[o.jsx("p",{children:v("combat.victorious")}),o.jsxs("p",{className:"text-rpg-text",children:[v("combat.goldAcquired")," ",o.jsxs("span",{className:"text-legendary font-bold",children:["+",a.gold]})]}),o.jsxs("p",{className:"text-rpg-text",children:[v("combat.experienceGained")," ",o.jsxs("span",{className:"text-mana-light font-bold",children:["+",a.xp]})]}),o.jsxs("p",{className:"text-rpg-text",children:[v("souls.earned")," ",o.jsxs("span",{className:"text-epic font-bold",children:[" ",d]})]})]}),!c&&o.jsxs("div",{className:"space-y-3 text-lg mb-8",children:[o.jsx("p",{className:"text-rpg-text",children:v("combat.journeyEnds")}),o.jsxs("p",{className:"text-rpg-text",children:[v("combat.goldLost")," ",o.jsxs("span",{className:"text-health-full font-bold",children:["-",a.goldLost," (",a.goldKept," ",v("combat.remaining"),")"]})]}),o.jsxs("p",{className:"text-rpg-text",children:[v("souls.earned")," ",o.jsxs("span",{className:"text-epic font-bold",children:[" ",d]})]}),o.jsx("p",{className:"text-sm text-epic opacity-80",children:v("souls.kept")})]}),o.jsx("button",{onClick:i,className:"w-full bg-rpg-primary hover:bg-rpg-secondary text-rpg-text font-bold py-3 px-4 rounded-lg text-xl transition-transform transform hover:scale-105",children:v(c?"combat.continue":"combat.returnToMenu")})]})})}function Yf({characterId:c,slotNumber:a,onClose:i}){const[d,f]=Z.useState(0),h=m.getCharacterSouls(c,a),x=m.getCharacterLevel(c,a),b=m.getSoulUpgrades(c,x),w=m.getCharacterUpgrades(c,a),R=O=>{const re=m.getCharacterSouls(c,a),pe=b[O].cost,A=w[O];_.log(`Purchase attempt: ${O}, Souls: ${re}, Cost: ${pe}, Owned: ${A}`,"UI"),m.purchaseCharacterUpgrade(c,a,O)?(_.log(`Successfully purchased ${b[O].nameKey} for ${c} slot ${a}`,"UI"),f(Q=>Q+1)):_.log(`Cannot purchase ${b[O].nameKey} - insufficient souls or already owned`,"UI")},D=O=>w[O]?"owned":h>=b[O].cost?"available":"locked",C=O=>{switch(O){case"owned":return"bg-uncommon text-rpg-text cursor-default";case"available":return"bg-rpg-primary hover:bg-rpg-secondary text-rpg-text cursor-pointer";case"locked":return"bg-rpg-secondary bg-opacity-50 text-rpg-text opacity-50 cursor-not-allowed";default:return""}};return o.jsx("div",{className:"fixed inset-0 bg-rpg-bg-darkest/90 flex items-center justify-center z-[100] p-4",children:o.jsxs("div",{className:"bg-rpg-bg-darker border-2 border-epic rounded-lg p-6 max-w-lg w-full shadow-2xl backdrop-blur-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("h1",{className:"text-3xl font-bold text-epic",children:[" ",v("souls.forge")]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-lg text-epic",children:v(`characters.${c}.name`)}),o.jsxs("p",{className:"text-sm text-epic opacity-80",children:[v("saveSlots.slot")," ",a]})]}),o.jsx("button",{onClick:i,className:"text-rpg-text opacity-70 hover:text-rpg-primary text-2xl font-bold",children:""})]}),o.jsxs("div",{className:"mb-6 text-center",children:[o.jsxs("div",{className:"text-2xl font-bold text-epic",children:[" ",h," ",v("souls.heroSouls")]}),o.jsx("div",{className:"text-sm text-rpg-text opacity-70 mt-1",children:v("souls.permanentUpgrades")})]}),o.jsx("div",{className:"space-y-4",children:Object.entries(b).map(([O,re])=>{const pe=D(O),A=pe==="owned",Q=pe==="available";return o.jsxs("div",{className:"bg-rpg-bg-darker bg-opacity-60 rounded-lg p-4 border border-rpg-secondary backdrop-blur-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"text-lg font-bold text-rpg-text",children:v(`upgrades.${O}.name`)}),o.jsx("div",{className:"text-epic font-bold",children:A?` ${v("souls.owned")}`:`${re.cost} `})]}),o.jsx("p",{className:"text-rpg-text opacity-80 text-sm mb-3",children:v(`upgrades.${O}.description`)}),o.jsx("button",{onClick:()=>Q&&R(O),disabled:!Q,className:`w-full py-2 px-4 rounded font-bold transition-colors ${C(pe)}`,children:A?v("souls.purchased"):Q?v("souls.purchaseCost",{cost:re.cost}):v("souls.needSouls",{cost:re.cost})})]},O)})}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:i,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:v("souls.closeForge")})}),o.jsx("div",{className:"mt-4 text-xs text-gray-500 text-center",children:v("souls.earnDescription")})]})})}function Wf({reward:c,onClose:a}){if(!c)return null;const i=f=>{switch(f){case"gold":return"";case"blessing":return"";case"item":return"";default:return""}},d=f=>{switch(f){case"gold":return v("rewards.goldFound");case"blessing":return v("rewards.blessingReceived");case"item":return v("rewards.itemFound");default:return v("rewards.reward")}};return o.jsx("div",{className:"fixed inset-0 bg-rpg-bg-darkest/60 flex items-center justify-center z-[200] p-4",children:o.jsxs("div",{className:"bg-rpg-bg-darker border-2 border-rpg-primary rounded-lg p-6 max-w-sm w-full text-center shadow-2xl animate-pulse backdrop-blur-sm",children:[o.jsx("div",{className:"text-6xl mb-4",children:i(c.type)}),o.jsx("h2",{className:"text-2xl font-bold text-rpg-primary mb-4",children:d(c.type)}),o.jsx("div",{className:"text-lg text-rpg-text mb-6",children:c.message}),o.jsx("button",{onClick:a,className:"w-full bg-rpg-primary hover:bg-rpg-secondary text-rpg-text font-bold py-3 px-4 rounded-lg text-xl transition-transform transform hover:scale-105",children:v("rewards.continue")})]})})}function ic({characterId:c,onBack:a,onGameStart:i}){const[d,f]=Z.useState([]),[h,x]=Z.useState(null),[b,w]=Z.useState(null);Z.useEffect(()=>{const A=[];for(let Q=1;Q<=3;Q++){const Ne=m.getSaveSlotInfo(c,Q);A.push({slotNumber:Q,...Ne})}f(A)},[c]);const R=A=>{const Q=d.find(Ne=>Ne.slotNumber===A);Q&&Q.exists?x({type:"overwrite",slotNumber:A,message:v("saveSlots.confirmOverwrite",{slot:A})}):C(A)},D=A=>{m.loadGame(c,A)?(_r.initialize(c),il.initialize(c),_.log(`Initialized services for ${c}`,"SYSTEM"),ni(),_.log(`Loaded ${c} from slot ${A}`,"SYSTEM"),i&&i()):_.log(`Failed to load save slot ${A}`,"ERROR")},C=A=>{_.log(`Starting new game for ${c} in slot ${A}`,"SYSTEM"),m.newGame(c),_r.initialize(c),il.initialize(c),_.log(`Initialized services for ${c}`,"SYSTEM"),m.saveGame(c,A),setTimeout(()=>{ni(),i&&i()},10),x(null)},O=A=>{x({type:"delete",slotNumber:A,message:v("saveSlots.confirmDelete",{slot:A})})},re=()=>{if(h.type==="overwrite")C(h.slotNumber);else if(h.type==="delete"){m.deleteSave(c,h.slotNumber);const A=[];for(let Q=1;Q<=3;Q++){const Ne=m.getSaveSlotInfo(c,Q);A.push({slotNumber:Q,...Ne})}f(A)}x(null)},pe=A=>A?new Date(A).toLocaleString():"";return h?o.jsx("div",{className:"fixed inset-0 bg-rpg-bg-darkest/90 flex items-center justify-center z-[200] p-4",children:o.jsxs("div",{className:"bg-rpg-bg-darker border-2 border-rpg-primary rounded-lg p-6 max-w-md w-full text-center backdrop-blur-sm",children:[o.jsx("h2",{className:"text-2xl font-bold text-rpg-primary mb-4",children:v("saveSlots.confirm")}),o.jsx("p",{className:"text-rpg-text opacity-80 mb-6",children:h.message}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>x(null),className:"flex-1 bg-rpg-secondary hover:bg-rpg-primary text-rpg-text font-bold py-2 px-4 rounded-lg",children:v("saveSlots.cancel")}),o.jsx("button",{onClick:re,className:"flex-1 bg-health-full hover:bg-health-mid text-rpg-text font-bold py-2 px-4 rounded-lg",children:v("saveSlots.confirm")})]})]})}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-full bg-rpg-radial text-rpg-text p-4 overflow-y-auto",children:o.jsxs("div",{className:"max-w-md mx-auto",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("button",{onClick:a,className:"text-rpg-primary hover:text-rpg-secondary text-lg",children:[" ",v("saveSlots.back")]}),o.jsx("button",{onClick:a,className:"text-rpg-text opacity-70 hover:text-rpg-primary text-sm bg-rpg-secondary hover:bg-rpg-primary px-3 py-1 rounded",children:v("saveSlots.switchCharacter")})]}),o.jsx("h1",{className:"text-4xl font-bold text-rpg-primary mb-2",children:v(`characters.${c}.name`)}),o.jsx("p",{className:"text-rpg-text opacity-70",children:v("saveSlots.selectSlot")})]}),o.jsx("div",{className:"space-y-4",children:d.map(A=>o.jsxs("div",{className:"bg-rpg-bg-darker bg-opacity-80 border border-rpg-secondary rounded-lg p-4 backdrop-blur-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-3",children:[o.jsxs("h3",{className:"text-xl font-bold text-rpg-primary",children:[v("saveSlots.slot")," ",A.slotNumber]}),A.exists&&o.jsxs("button",{onClick:()=>O(A.slotNumber),className:"text-health-mid hover:text-health-full text-sm",children:[" ",v("saveSlots.delete")]})]}),A.exists?o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:"text-rpg-text opacity-80",children:[v("saveSlots.level"),": ",A.level," | ",v("saveSlots.floor"),": ",A.floor]}),o.jsxs("p",{className:"text-rpg-text opacity-80",children:[v("saveSlots.gold"),": ",A.gold]}),o.jsxs("p",{className:"text-epic",children:[" ",m.getCharacterSouls(c,A.slotNumber)," ",v("souls.heroSouls")]}),o.jsx("p",{className:"text-rpg-text opacity-50 text-sm",children:pe(A.timestamp)})]}):o.jsx("p",{className:"text-rpg-text opacity-50 mb-4",children:v("saveSlots.empty")}),o.jsxs("div",{className:"flex gap-2",children:[A.exists&&o.jsx("button",{onClick:()=>D(A.slotNumber),className:"flex-1 bg-uncommon hover:bg-rare text-rpg-text font-bold py-2 px-4 rounded-lg",children:v("saveSlots.load")}),o.jsx("button",{onClick:()=>R(A.slotNumber),className:"flex-1 bg-rpg-primary hover:bg-rpg-secondary text-rpg-text font-bold py-2 px-4 rounded-lg",children:v("saveSlots.newGame")}),o.jsxs("button",{onClick:()=>w({characterId:c,slotNumber:A.slotNumber}),className:"bg-rpg-secondary hover:bg-rpg-primary text-rpg-text font-bold py-2 px-4 rounded-lg flex items-center gap-1",children:[" ",v("souls.forge")]})]})]},A.slotNumber))})]})}),b&&o.jsx(Yf,{characterId:b.characterId,slotNumber:b.slotNumber,onClose:()=>w(null)})]})}function Vf({type:c,eventType:a,eventData:i,message:d,autoAdvance:f=!0,delay:h=2e3,onContinue:x}){Z.useEffect(()=>{if(f&&x){const D=setTimeout(()=>{x()},h);return()=>clearTimeout(D)}},[f,h,x]);const b=()=>{switch(a){case"battle":return"";case"boss":return"";case"shop":return"";case"shrine":return"";case"treasure":return"";case"elite":return"";default:return""}},w=()=>{if(d)return d;if(c==="intro")switch(a){case"battle":const D=i?.map(re=>v(`enemies.${re.id}`)||re.nameKey).join(", ")||v("events.unknownEnemies");return v("events.battleIntro",{enemies:D});case"boss":const C=i?.[0]?.nameKey||v("enemies.boss");return v("events.bossIntro",{boss:C});case"shop":return v("events.shopIntro");case"shrine":return v("events.shrineIntro");case"treasure":return v("events.treasureIntro");case"elite":const O=i?.[0]?.nameKey||v("enemies.elite");return v("events.eliteIntro",{elite:O});default:return v("events.encounterIntro",{event:v(`rooms.${a}`)})}else switch(a){case"battle":case"boss":case"elite":return v("events.battleOutro");case"shop":return v("events.shopOutro");case"shrine":return v("events.shrineOutro");case"treasure":return v("events.treasureOutro");default:return v("events.encounterOutro")}},R=()=>{switch(a){case"battle":case"elite":return"bg-gradient-to-b from-red-900 to-gray-900";case"boss":return"bg-gradient-to-b from-purple-900 to-black";case"shop":return"bg-gradient-to-b from-blue-900 to-gray-900";case"shrine":return"bg-gradient-to-b from-yellow-900 to-gray-900";case"treasure":return"bg-gradient-to-b from-amber-900 to-gray-900";default:return"bg-gradient-to-b from-gray-900 to-black"}};return o.jsx("div",{className:`h-full text-white flex items-center justify-center p-4 overflow-y-auto ${R()}`,children:o.jsxs("div",{className:"text-center max-w-md mx-auto",children:[o.jsx("div",{className:"text-8xl mb-6 animate-pulse",children:b()}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:w()}),o.jsx("div",{className:"mb-6",children:c==="intro"?o.jsx("div",{className:"text-lg text-gray-300",children:v("events.preparing")}):o.jsx("div",{className:"text-lg text-gray-300",children:v("events.returning")})}),!f&&x&&o.jsx("button",{onClick:x,className:"bg-amber-600 hover:bg-amber-500 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:v("events.continue")}),f&&o.jsxs("div",{className:"text-sm text-gray-400 mt-4",children:[v("events.autoAdvancing"),"..."]})]})})}function Gf({onBuffSelected:c}){const[a,i]=Z.useState([]),[d,f]=Z.useState(null);Z.useEffect(()=>{const w=cr.generateBuffChoices(3);i(w),_.log(`Generated buff choices: ${w.map(R=>R.key).join(", ")}`,"SYSTEM")},[]);const h=w=>{f(w)},x=()=>{d&&(cr.applyBuff(d),_.log(`Buff selected and applied: ${d}`,"SYSTEM"),c(d))},b=()=>{_.log("Buff selection skipped","SYSTEM"),c(null)};return o.jsx("div",{className:"h-full bg-rpg-radial text-rpg-text flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-2xl w-full",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("h1",{className:"text-4xl font-bold text-rpg-primary mb-2",children:[" ",v("buffs.chooseYourBlessing")," "]}),o.jsx("p",{className:"text-lg text-rpg-text opacity-80",children:v("buffs.selectOneBuffForBattle")})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:a.map(w=>o.jsxs("button",{onClick:()=>h(w.key),className:`p-6 rounded-lg border-2 transition-all duration-200 text-left ${d===w.key?"bg-rpg-primary border-legendary shadow-lg scale-105":"bg-rpg-bg-darker border-rpg-secondary hover:border-rpg-primary hover:scale-102"}`,children:[o.jsx("div",{className:"text-5xl mb-3 text-center",children:w.icon}),o.jsx("h3",{className:"text-xl font-bold text-rpg-primary mb-2 text-center",children:typeof w.name=="object"?w.name[Ve.getCurrentLanguage()]:w.name}),o.jsx("p",{className:"text-sm text-rpg-text opacity-90 text-center",children:typeof w.description=="object"?w.description[Ve.getCurrentLanguage()]:w.description}),d===w.key&&o.jsxs("div",{className:"mt-3 text-center text-uncommon font-bold",children:[" ",v("buffs.selected")]})]},w.key))}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsx("button",{onClick:b,className:"px-6 py-3 bg-rpg-secondary hover:bg-rpg-primary text-rpg-text font-bold rounded-lg transition-colors",children:v("buffs.skip")}),o.jsx("button",{onClick:x,disabled:!d,className:`px-8 py-3 font-bold rounded-lg transition-all ${d?"bg-uncommon hover:bg-rare text-white":"bg-rpg-secondary opacity-50 cursor-not-allowed text-rpg-text"}`,children:v("buffs.confirm")})]}),o.jsx("div",{className:"mt-6 text-center text-sm text-rpg-text opacity-60",children:v("buffs.buffsStackAcrossBattles")})]})})}function Qf({onClose:c}){const[a,i]=Z.useState(m.current.player),[d,f]=Z.useState(m.current.inventory||[]),[h,x]=Z.useState(m.current.equipped||{}),[b,w]=Z.useState(m.current.potions||{}),[R,D]=Z.useState(null),[C,O]=Z.useState("equipment");Z.useEffect(()=>{const U=m.subscribe(()=>{i(m.current.player),f(m.current.inventory||[]),x(m.current.equipped||{}),w(m.current.potions||{})});return()=>U()},[]);const re=U=>{if(!U||!U.slot)return;const ne=h[U.slot];ne&&m.current.inventory.push(ne),m.current.equipped[U.slot]=U,m.current.inventory=m.current.inventory.filter(V=>V.id!==U.id),m.recalculatePlayerStats(),m._notify()},pe=U=>{const ne=h[U];ne&&(m.current.inventory.push(ne),delete m.current.equipped[U],m.recalculatePlayerStats(),m._notify())},A=U=>te.RARITIES[U]?.color||"#95a5a6",Q=U=>{const ne=te.EQUIPMENT_SLOTS[U];if(!ne)return null;const V=h[U],xe=typeof ne.name=="string"?ne.name:ne.name[m.current.language]||ne.name.en;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-4 border border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:ne.icon}),o.jsx("span",{className:"text-rpg-text font-semibold",children:xe})]}),V&&o.jsx("button",{onClick:()=>pe(U),className:"text-xs px-2 py-1 bg-red-600 hover:bg-red-700 text-white rounded",children:"Unequip"})]}),V?o.jsxs("div",{className:"bg-black bg-opacity-40 rounded p-3 cursor-pointer hover:bg-opacity-60 transition-all",onClick:()=>D(V),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[V.prefixKey&&o.jsx("span",{className:"text-xs text-blue-400",children:v(V.prefixKey)}),o.jsx("span",{className:"font-semibold",style:{color:A(V.rarity)},children:v(V.nameKey)})]}),o.jsx("div",{className:"flex flex-wrap gap-2 text-xs",children:Object.entries(V.stats).map(([je,ze])=>o.jsxs("span",{className:"text-green-400",children:["+",ze," ",je.toUpperCase()]},je))})]}):o.jsx("div",{className:"bg-black bg-opacity-20 rounded p-3 text-center text-gray-500 italic",children:"Empty"})]},U)},Ne=U=>o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-3 border border-gray-700 cursor-pointer hover:border-rpg-primary transition-all",onClick:()=>D(U),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[U.prefixKey&&o.jsx("span",{className:"text-xs text-blue-400",children:v(U.prefixKey)}),o.jsx("span",{className:"font-semibold text-sm",style:{color:A(U.rarity)},children:v(U.nameKey)})]}),o.jsx("div",{className:"flex flex-wrap gap-2 text-xs mb-2",children:Object.entries(U.stats).map(([ne,V])=>o.jsxs("span",{className:"text-green-400",children:["+",V," ",ne.toUpperCase()]},ne))}),U.slot&&o.jsx("button",{onClick:ne=>{ne.stopPropagation(),re(U)},className:"text-xs px-3 py-1 bg-rpg-primary hover:bg-rpg-secondary text-black rounded w-full font-semibold",children:"Equip"})]},U.id),Ge=()=>o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-xl font-bold text-rpg-primary mb-4",children:"Potions & Consumables"}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(b).map(([U,ne])=>{const V=te.ITEM_TYPES[U];if(!V)return null;const xe=typeof V.name=="string"?V.name:V.name[m.current.language]||V.name.en,je=typeof V.description=="string"?V.description:V.description[m.current.language]||V.description.en;return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-4 border border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-3xl",children:V.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-rpg-text",children:xe}),o.jsxs("div",{className:"text-sm text-rpg-primary",children:["x",ne]})]})]}),o.jsx("div",{className:"text-xs text-gray-400",children:je})]},U)})}),Object.keys(b).length===0&&o.jsx("div",{className:"text-center text-gray-500 italic py-8",children:"No consumables in inventory"})]}),Re=()=>{const U=a.stats,ne=a.resource;return o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-xl font-bold text-rpg-primary mb-4",children:"Character Stats"}),o.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-4 border border-gray-700",children:o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"text-5xl",children:a.icon}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-rpg-primary",children:v(a.nameKey)}),o.jsxs("div",{className:"text-rpg-text",children:["Level ",m.current.level]})]})]})}),o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-4 border border-gray-700",children:[o.jsx("h4",{className:"text-lg font-semibold text-rpg-text mb-3",children:"Combat Stats"}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(tn,{label:"HP",value:U.hp,icon:""}),o.jsx(tn,{label:v(ne.nameKey),value:`${ne.current}/${ne.max}`,icon:ne.icon}),o.jsx(tn,{label:"ATK",value:U.atk,icon:""}),o.jsx(tn,{label:"DEF",value:U.def,icon:""}),o.jsx(tn,{label:"SPD",value:U.spd,icon:""}),o.jsx(tn,{label:"CRIT",value:`${(U.crit*100).toFixed(0)}%`,icon:""})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg p-4 border border-gray-700",children:[o.jsx("h4",{className:"text-lg font-semibold text-rpg-text mb-3",children:"Resources"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-rpg-text",children:" Gold"}),o.jsx("span",{className:"text-rpg-primary font-bold",children:m.current.gold})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-rpg-text",children:" Hero Souls"}),o.jsx("span",{className:"text-rpg-primary font-bold",children:m.current.souls})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-rpg-text",children:" Experience"}),o.jsx("span",{className:"text-rpg-primary font-bold",children:m.current.experience})]})]})]})]})};return o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 p-4",children:[o.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] bg-gradient-to-br from-rpg-bg via-gray-900 to-black rounded-lg shadow-2xl border-2 border-rpg-primary overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-rpg-secondary to-rpg-primary p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-2xl font-bold text-black",children:" Inventory"}),o.jsx("button",{onClick:c,className:"text-2xl font-bold text-black hover:text-red-600 transition-colors",children:""})]}),o.jsxs("div",{className:"flex bg-gray-900 border-b border-gray-700",children:[o.jsx("button",{onClick:()=>O("equipment"),className:`flex-1 py-3 font-semibold transition-colors ${C==="equipment"?"bg-rpg-primary text-black":"text-rpg-text hover:bg-gray-800"}`,children:" Equipment"}),o.jsx("button",{onClick:()=>O("consumables"),className:`flex-1 py-3 font-semibold transition-colors ${C==="consumables"?"bg-rpg-primary text-black":"text-rpg-text hover:bg-gray-800"}`,children:" Consumables"}),o.jsx("button",{onClick:()=>O("stats"),className:`flex-1 py-3 font-semibold transition-colors ${C==="stats"?"bg-rpg-primary text-black":"text-rpg-text hover:bg-gray-800"}`,children:" Stats"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[C==="equipment"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-rpg-primary mb-4",children:"Equipped"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.keys(te.EQUIPMENT_SLOTS).map(U=>Q(U))})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-rpg-primary mb-4",children:["Inventory (",d.length,"/",te.INVENTORY.maxSlots,")"]}),d.length>0?o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:d.map(U=>Ne(U))}):o.jsx("div",{className:"text-center text-gray-500 italic py-8",children:"No items in inventory. Visit shops to purchase equipment!"})]})]}),C==="consumables"&&Ge(),C==="stats"&&Re()]}),o.jsxs("div",{className:"bg-gray-900 border-t border-gray-700 p-4 flex justify-between items-center",children:[o.jsxs("div",{className:"text-rpg-text text-sm",children:["Floor ",m.current.currentFloor,"  ",v(a.nameKey),"  Lv.",m.current.level]}),o.jsx("button",{onClick:c,className:"px-6 py-2 bg-rpg-primary hover:bg-rpg-secondary text-black font-bold rounded transition-colors",children:"Close"})]})]}),R&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",onClick:()=>D(null),children:o.jsxs("div",{className:"bg-gray-900 rounded-lg p-6 max-w-md border-2 border-rpg-primary",onClick:U=>U.stopPropagation(),children:[o.jsxs("h3",{className:"text-xl font-bold mb-2",style:{color:A(R.rarity)},children:[R.prefixKey&&`${v(R.prefixKey)} `,v(R.nameKey)]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"text-sm text-gray-400",children:["Rarity: ",o.jsx("span",{style:{color:A(R.rarity)},children:v(`rarities.${R.rarity}`)})]}),o.jsxs("div",{className:"text-sm text-gray-400",children:["Slot: ",R.slot||"None"]}),o.jsx("div",{className:"space-y-1 mt-3",children:Object.entries(R.stats).map(([U,ne])=>o.jsxs("div",{className:"text-green-400",children:["+",ne," ",U.toUpperCase()]},U))})]}),o.jsx("button",{onClick:()=>D(null),className:"w-full px-4 py-2 bg-rpg-primary hover:bg-rpg-secondary text-black font-bold rounded",children:"Close"})]})})]})}function tn({label:c,value:a,icon:i}){return o.jsx("div",{className:"bg-black bg-opacity-40 rounded p-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:i}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-xs text-gray-400",children:c}),o.jsx("div",{className:"text-lg font-bold text-rpg-primary",children:a})]})]})})}_.log("App.jsx: Module loaded.","SYSTEM");let dc=()=>_.log("forceUI called before App component mounted!","ERROR");const oc=new Of({forceUpdate:()=>dc()}),qf=new Df({});function Xf(){_.log("App component rendering started.","UI");const[c,a]=Z.useState(m.current),[i,d]=Z.useState([]),[f,h]=Z.useState(null),[x,b]=Z.useState(!1),[w,R]=Z.useState(!1),[D,C]=Z.useState("en"),[O,re]=Z.useState(null),[pe,A]=Z.useState(null),[Q,Ne]=Z.useState(!1),[Ge,Re]=Z.useState(null),[U,ne]=Z.useState(!1),[V,xe]=Z.useState(!1),[je,ze]=Z.useState(null),[ft,me]=Z.useState(!1),Ae=Z.useCallback(()=>{a({...m.current})},[]);Z.useEffect(()=>{dc=Ae},[Ae]),Z.useEffect(()=>{_.log("App component mounted. Initializing localization and GameState.","UI");const K=async()=>{await Ve.loadTranslations(),R(!0),C(Ve.getCurrentLanguage());const Se=Ve.subscribe(Ue=>{C(Ue),_.log(`App language changed to: ${Ue}`,"UI")});return localStorage.getItem("pathOfHeroes_language")||b(!0),Se};let he;K().then(Se=>{he=Se}),m.loadSoulData();const ue=m.subscribe(a);return()=>{_.log("App component unmounting. Unsubscribing from GameState and Localization.","UI"),ue(),he&&he()}},[]),Z.useEffect(()=>{const K=rn.subscribe("saveComplete",()=>{ne(!0),setTimeout(()=>ne(!1),2e3)}),he=rn.subscribe("saveError",ue=>{_.log(`Auto-save failed: ${ue.message}`,"ERROR")});return()=>{K(),he()}},[]);const Qe=K=>K.completed?M(K):!K.visited&&K.type!==q.WALL&&K.type!==q.EMPTY?"":bf[K.type],M=K=>{switch(K.type){case q.BATTLE:case q.ELITE:case q.BOSS:return"";case q.TREASURE:return"";case q.SHOP:return"";case q.SHRINE:return"";case q.STAIRS:return"";default:return""}},le=(K,he)=>{if(he)return"bg-rpg-primary animate-pulse";if(!K.revealed)return"bg-rpg-bg-darker";if(K.type===q.WALL)return"bg-rpg-secondary text-rpg-text opacity-60";if(K.completed)switch(K.type){case q.BATTLE:case q.ELITE:case q.BOSS:return"bg-uncommon bg-opacity-30 text-uncommon";case q.TREASURE:return"bg-legendary bg-opacity-30 text-legendary";case q.SHRINE:return"bg-epic bg-opacity-30 text-epic";case q.STAIRS:return"bg-rare bg-opacity-30 text-rare";default:return"bg-rpg-bg-darker"}return K.type===q.STAIRS?"bg-rare bg-opacity-50 hover:bg-rare hover:bg-opacity-70 animate-pulse":"bg-rpg-bg-darker hover:bg-rpg-secondary hover:bg-opacity-50"},fe=Z.useCallback((K,he)=>{if(m.current.currentScreen!=="exploration")return;const ue=m.current.playerPos,Se=ue.x+K,Ie=ue.y+he,Ue=m.current.dungeon;if(Ue&&Se>=0&&Se<Ue[0].length&&Ie>=0&&Ie<Ue.length){const $e=Ue[Ie][Se];$e.revealed&&$e.type!==q.WALL&&(m.current.playerPos={x:Se,y:Ie},$e.visited||($e.visited=!0,$e.completed||ie($e)),Ae())}},[Ae]);Z.useEffect(()=>{const K=he=>{if(m.current.currentScreen!=="exploration")return;let ue=0,Se=0;const Ie=Ve.getCurrentLanguage()==="ar";switch(he.key.toLowerCase()){case"arrowup":case"w":Se=-1;break;case"arrowdown":case"s":Se=1;break;case"arrowleft":case"a":ue=Ie?1:-1;break;case"arrowright":case"d":ue=Ie?-1:1;break;default:return}he.preventDefault(),_.log(`Key press detected: ${he.key}`,"INPUT"),fe(ue,Se)};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[fe]);const ie=K=>{if(_.log(`Handling event for room type: ${K.type}`,"SYSTEM"),K.encounter&&!K.completed){const ue=K.type===q.BOSS?"boss":K.type===q.ELITE?"elite":"battle";Re({type:"intro",eventType:ue,eventData:K.encounter,onContinue:()=>{Re(null),F(K.encounter)}});return}const he=(ue,Se=null)=>{Re({type:"intro",eventType:ue,eventData:Se,onContinue:()=>{Re(null),I(K,ue)}})};switch(K.type){case q.SHOP:K.completed||he("shop");break;case q.TREASURE:K.completed||I(K,"treasure");break;case q.SHRINE:K.completed||I(K,"shrine");break;case q.STAIRS:K.completed||he("stairs");break;default:I(K,K.type)}},I=(K,he)=>{switch(he){case"shop":m.update("currentScreen","shop"),K.completed=!0;break;case"treasure":const ue=3+Math.floor(Math.random()*7),Se=1+(m.current.currentFloor-1)*.2,Ie=Math.floor(ue*Se);m.addGold(Ie),re({type:"gold",message:v("rewards.goldFoundAmount",{amount:Ie})}),K.completed=!0,Y("treasure");break;case"shrine":if(m.current.player){const $e=Math.floor((m.current.currentFloor-1)*.5),Tt=[{nameKey:"blessings.strength",effect:"atk",bonus:3+$e},{nameKey:"blessings.fortitude",effect:"def",bonus:2+$e},{nameKey:"blessings.swiftness",effect:"spd",bonus:2+$e},{nameKey:"blessings.fortune",effect:"crit",bonus:5+$e*2}],lt=Tt[Math.floor(Math.random()*Tt.length)];m.current.player.stats[lt.effect]+=lt.bonus,m.current.player.maxStats[lt.effect]+=lt.bonus,re({type:"blessing",message:v("rewards.blessingDetails",{blessing:v(lt.nameKey),bonus:lt.bonus,stat:v(`stats.${lt.effect}`)})}),K.completed=!0,Y("shrine")}break;case"stairs":const Ue=m.nextFloor();re({type:"floor_complete",message:v("rewards.floorComplete",{floor:m.current.currentFloor-1,gold:Ue.gold,souls:Ue.souls})}),rn.performAutoSave(sn.FLOOR_COMPLETE),setTimeout(()=>{m.resetForNewFloor(),ni()},2e3),K.completed=!0;break}Ae()},Y=K=>{Re({type:"outro",eventType:K,onContinue:()=>{Re(null),K==="shop"&&m.update("currentScreen","exploration")}})},F=K=>{ze(K),xe(!0)},S=K=>{if(xe(!1),je){const he=je.map(ue=>({...ue}));d([]),m.current.onBattleEnd=j,m.update("currentScreen","battle"),oc.startBattle(he,{onLog:ue=>d(Se=>[...Se,ue])}),ze(null)}},j=(K,he)=>{if(_.log(`Battle ended. Victory: ${K}`,"SYSTEM"),K){const{x:ue,y:Se}=m.current.playerPos,Ie=m.current.dungeon[Se][ue];Ie.completed=!0;const Ue=he.reduce((Tt,lt)=>Tt+(lt.gold||0),0),$e=he.reduce((Tt,lt)=>Tt+(lt.xp||0),0);m.addGold(Ue),m.addExperience($e),Ie.type===q.BOSS&&(jf(),_.log("Boss defeated! Stairs to next floor have appeared!","SYSTEM"),rn.performAutoSave(sn.BOSS_DEFEAT)),h({gold:Ue,xp:$e})}else{const ue=m.applyDeathPenalty();h(ue)}m.update("currentScreen","outcome")},ae=()=>{if(h(null),m.current.player&&m.current.player.stats&&m.current.player.stats.hp>0){const{x:K,y:he}=m.current.playerPos,ue=m.current.dungeon[he][K],Se=ue.type===q.BOSS?"boss":ue.type===q.ELITE?"elite":"battle";Re({type:"outro",eventType:Se,onContinue:()=>{Re(null),m.update("currentScreen","exploration")}})}else m.collectRunSouls(),rn.performAutoSave(sn.PLAYER_DEATH),m.reset()};if(_.log(`Rendering screen: ${c.currentScreen}`,"UI"),!w)return o.jsx("div",{className:"min-h-screen bg-rpg-radial text-rpg-text flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-4",children:""}),o.jsx("div",{className:"text-lg text-rpg-text opacity-80",children:"Loading..."})]})});if(x)return o.jsx(Af,{onLanguageSelected:()=>b(!1)});if(V)return o.jsxs(o.Fragment,{children:[o.jsx(Gf,{onBuffSelected:S}),o.jsx(Ot,{})]});if(Ge)return o.jsxs(o.Fragment,{children:[o.jsx(Vf,{...Ge}),o.jsx(Ot,{})]});if(c.currentScreen==="outcome")return o.jsxs(o.Fragment,{children:[o.jsx(Hf,{victory:c.player&&c.player.stats&&c.player.stats.hp>0,results:f,onContinue:ae}),o.jsx(Ot,{})]});if(c.currentScreen==="battle")return o.jsxs(o.Fragment,{children:[o.jsx(zf,{player:c.player,enemies:c.enemies,combatSystem:oc,combatLog:i}),o.jsx(Ot,{})]});if(c.currentScreen==="shop")return o.jsxs(o.Fragment,{children:[o.jsx(Kf,{inventorySystem:qf,onLeave:()=>Y("shop")}),o.jsx(Ot,{})]});if(c.currentScreen==="save-slots")return o.jsxs(o.Fragment,{children:[o.jsx(ic,{characterId:c.selectedCharacter,onBack:()=>{m.update("selectedCharacter",null),m.update("currentScreen","main-menu")},onGameStart:()=>{Ae()}}),o.jsx(Ot,{})]});if(pe&&Q)return o.jsxs(o.Fragment,{children:[o.jsx(ic,{characterId:pe,onBack:()=>{A(null),Ne(!1)},onGameStart:()=>{A(null),Ne(!1),Ae()}}),o.jsx(Ot,{})]});if(!c.gameStarted||c.currentScreen==="main-menu")return o.jsxs(o.Fragment,{children:[o.jsx(Jf,{onCharacterSelect:K=>{A(K),Ne(!0)},currentLanguage:D}),o.jsx(Ot,{})]});const oe=c.dungeon||[],se=c.playerPos,de=c.player,ke=m.getRequiredExperience(c.level),ye=m.getRequiredExperience(c.level+1),Ee=ye-ke,rt=Math.max(0,c.experience-ke),dr=Ee>0?rt/Ee*100:0,an=c.selectedCharacter,jr=m.getCurrentSaveSlot(),on=an?m.getCharacterSouls(an,jr):0;return oe.length===0||!se?o.jsxs("div",{className:"min-h-screen bg-rpg-radial text-rpg-text flex items-center justify-center",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl mb-4",children:""}),o.jsx("div",{className:"text-lg text-rpg-text opacity-80",children:v("menu.loading")})]}),o.jsx(Ot,{})]}):o.jsxs("div",{className:"w-full max-w-2xl h-full bg-rpg-radial text-rpg-text p-1 flex flex-col overflow-hidden",children:[U&&o.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-uncommon text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-fade-in",children:[o.jsx("span",{children:""}),o.jsx("span",{className:"font-bold",children:v("system.gameSaved")})]}),o.jsxs("div",{className:"bg-rpg-bg-darker bg-opacity-80 rounded-lg px-2 py-1.5 mb-1 border border-rpg-primary shrink-0 backdrop-blur-sm",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center text-xs mb-1.5",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-rpg-text opacity-70 text-xs leading-none",children:v("stats.floor")}),o.jsx("div",{className:"text-rpg-primary font-bold text-sm leading-none",children:c.currentFloor})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-rpg-text opacity-70 text-xs leading-none",children:v("stats.level")}),o.jsx("div",{className:"text-mana-light font-bold text-sm leading-none",children:c.level})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-rpg-text opacity-70 text-xs leading-none",children:v("stats.gold")}),o.jsx("div",{className:"text-legendary font-bold text-sm leading-none",children:c.gold})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-rpg-text opacity-70 text-xs leading-none",children:v("stats.souls")}),o.jsx("div",{className:"text-epic font-bold text-sm leading-none",children:on+c.currentRunSouls})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-rpg-text opacity-70 leading-none mb-0.5",children:[o.jsxs("span",{children:["XP: ",c.experience,"/",ye]}),o.jsxs("span",{children:[Math.floor(dr),"%"]})]}),o.jsx("div",{className:"h-1.5 bg-rpg-bg-darkest bg-opacity-80 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-1.5 bg-mana-light transition-all duration-300",style:{width:`${Math.min(100,Math.max(0,dr))}%`}})})]}),de&&o.jsxs("div",{className:"text-xs text-center",children:[o.jsx("div",{className:"text-rpg-text opacity-70 text-xs leading-none",children:"HP"}),o.jsxs("div",{className:"text-health-mid font-bold text-sm leading-none",children:[de.stats.hp,"/",de.maxStats.hp]})]})]})]}),o.jsx("div",{className:"shrink-0 mb-1",children:o.jsxs("button",{onClick:()=>me(!0),className:"w-full px-4 py-2 bg-gradient-to-r from-rpg-secondary to-rpg-primary text-black font-bold rounded-lg hover:from-rpg-primary hover:to-rpg-secondary transition-all flex items-center justify-center gap-2 border border-rpg-primary",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsx("span",{children:"Inventory"})]})}),o.jsxs("div",{className:"bg-rpg-bg-darker bg-opacity-60 rounded-lg p-1.5 border border-rpg-secondary flex-1 flex flex-col min-h-0 backdrop-blur-sm",children:[o.jsx("div",{className:"grid grid-cols-5 gap-1 w-full max-w-md mx-auto",style:{aspectRatio:"5/9",maxHeight:"100%"},children:oe.map((K,he)=>K.map((ue,Se)=>{const Ie=se&&se.x===Se&&se.y===he;return o.jsx("div",{className:`aspect-square flex items-center justify-center text-xl rounded transition-colors ${ue.revealed&&ue.type!==q.WALL?"cursor-pointer":"cursor-default"} ${le(ue,Ie)}`,onClick:()=>{ue.revealed&&ue.type!==q.WALL&&se&&Math.abs(Se-se.x)+Math.abs(he-se.y)===1&&fe(Se-se.x,he-se.y)},children:Ie?"":ue.revealed?Qe(ue):""},`${Se},${he}`)}))}),o.jsx("div",{className:"text-center text-xs text-rpg-text opacity-60 mt-1 px-1 leading-tight",children:v("exploration.controls")})]}),o.jsx(Ot,{}),O&&o.jsx(Wf,{reward:O,onClose:()=>re(null)}),ft&&o.jsx(Qf,{onClose:()=>me(!1)})]})}function Jf({onCharacterSelect:c,currentLanguage:a}){return o.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-rpg-radial text-rpg-text px-4",children:[o.jsx("h1",{className:"text-5xl font-extrabold text-rpg-primary mb-3 drop-shadow-lg",children:v("game.title")}),o.jsx("p",{className:"text-lg text-rpg-text opacity-80 mb-6",children:v("game.subtitle")}),o.jsx("div",{className:"mb-4",children:o.jsxs("button",{onClick:()=>{const i=a==="en"?"ar":"en";Ve.setLanguage(i)},className:"px-4 py-2 bg-rpg-secondary hover:bg-rpg-primary text-sm rounded-lg border border-rpg-primary transition-all duration-200",children:[" ",a==="en"?"":"English"]})}),o.jsx("div",{className:"flex flex-wrap justify-center gap-4 max-w-lg",children:Object.values(ln).map(i=>o.jsxs("button",{onClick:()=>c(i.id),className:"px-6 py-4 bg-rpg-bg-darker bg-opacity-80 hover:bg-rpg-secondary text-lg rounded-lg border border-rpg-primary shadow-md transition-all duration-200 backdrop-blur-sm",children:[v(i.nameKey)," ",o.jsxs("span",{className:"text-sm text-rpg-text opacity-70",children:["(",v(i.roleKey),")"]})]},i.id))})]})}_.initGlobalErrorHandling();_.log("main.jsx: Script start.","SYSTEM");try{xf.createRoot(document.getElementById("root")).render(o.jsx(ff.StrictMode,{children:o.jsx(Xf,{})})),_.log("main.jsx: React app mount initiated.","SYSTEM")}catch(c){_.log(`[FATAL] React failed to render: ${c.message}`,"ERROR"),console.error("Fatal error during React rendering:",c)}
